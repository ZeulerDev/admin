function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./FlatRateVatRegistrationPDF-D46uKFcJ.js","./index-DijmUoR3.js","./index-BQTabIt4.css","./react-pdf.browser-DgjrfRbz.js","./inheritsLoose-CkMbdMht.js","./index-Be6HuV4N.js","./_commonjs-dynamic-modules-TDtrdbi3.js","./zeuler-Bzj9BogB.js","./OccasionalEmployeePDF-D6TGLOI9.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{a as C,g as w,r as o,y as G,A as h,j as e,i as J}from"./index-DijmUoR3.js";import{a as z}from"./axios-Cm0UX6qg.js";import{B}from"./config-HOLfLxHr.js";import{b as K,a as p}from"./CContainer-DN72PnMC.js";import{d as R,C as X,a as Z,b as ss,c}from"./DefaultLayout-DwXwd1MO.js";import{C as es}from"./CNavbar-B3uKpzIw.js";import{C as as}from"./CFormInput-D1WkWuFp.js";import{C as ts,a as os,b as I,c as l,d as ls,e as r}from"./CTable-BIC5taFL.js";import{C as L,a as V,b as O,c as $}from"./CModalTitle-Cf1p3xG9.js";import"./CFormLabel-CGCgOzYe.js";C.lazy(()=>w(()=>import("./FlatRateVatRegistrationPDF-D46uKFcJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url));C.lazy(()=>w(()=>import("./OccasionalEmployeePDF-D6TGLOI9.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url));C.lazy(()=>w(()=>import("./react-pdf.browser-DgjrfRbz.js"),__vite__mapDeps([3,4,1,2,5,6]),import.meta.url).then(d=>({default:d.PDFViewer})));const gs=()=>{const[d,P]=o.useState(!1),[H,x]=o.useState(!1),[{user:b,token:y},u]=G(),[M,S]=o.useState(!1),[T,_]=o.useState([]),[rs,N]=o.useState([]),[F,k]=o.useState("All"),[D,E]=o.useState(""),[f,Y]=o.useState(""),[v,g]=o.useState(""),[A,Q]=o.useState("");o.useEffect(()=>{console.log("Payout with"),b&&y&&W()},[D,f]);const W=()=>{S(!0),z.get(B+`assistant/pickers/payouts/0?status=${D}&no=${f}`,{headers:{Authorization:`Bearer ${y}`}}).then(s=>{s.status===200?(_(s.data),S(!1)):s.status===204?u({type:h,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}}):s.status===500&&u({type:h,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}})}).catch(s=>{console.log("Error",s)})},q=(s,a)=>{P(!d),N({type:s,item:a}),console.log("Toggle",s,a)},j=(s,a)=>{x(!d),Q(s),console.log("VIew",s,a),a==="waiting"||a==="sent"?g("ready"):a==="ready"&&g("done")},U=()=>{console.log("Confirmation",v,A);const s={status:v};b&&y&&z.patch(B+"assistant/payout/change/"+A,s,{headers:{Authorization:`Bearer ${y}`}}).then(a=>{if(a.status===200){console.log("updated"),x(!1);const t=a.data,n=T.map(m=>m.id===t.id?t:m);_([...n])}else a.status===203?u({type:h,payload:{status:!0,title:"Pricker Payout status error",message:a.data.message}}):a.status===204?(console.log("204"),u({type:h,payload:{status:!0,title:"Pricker Payout status error",message:a.data.message}})):a.status===500&&u({type:h,payload:{status:!0,title:"Pricker Payout status update error",message:a.data.message}})}).catch(a=>{console.error(a)})},i=s=>{s==="all"?(E(""),k("All")):(console.log(s),E(s),k(s))};return e.jsxs(K,{children:[e.jsx(R,{style:{marginLeft:"75%"},color:"secondary",children:"Filter by"}),e.jsxs(X,{style:{marginLeft:"2%",width:"17%",backgroundColor:"#ff4d4d"},children:[e.jsx(Z,{style:{color:"white"},children:F}),e.jsxs(ss,{children:[e.jsx(c,{onClick:()=>i("all"),children:"All"}),e.jsx(c,{onClick:()=>i("pending"),children:"Pending"}),e.jsx(c,{onClick:()=>i("sent"),children:"Sent"}),e.jsx(c,{onClick:()=>i("ready"),children:"Ready"}),e.jsx(c,{onClick:()=>i("waiting"),children:"Waiting"}),e.jsx(c,{onClick:()=>i("done"),children:"Done"})]})]}),e.jsx(es,{style:{marginTop:"1%"},className:"bg-body-tertiary",children:e.jsx(as,{type:"text",placeholder:"Search By No",style:{width:450,marginLeft:"0%"},value:f,onChange:s=>Y(s.target.value)})}),M?e.jsx(J,{}):e.jsxs(ts,{children:[e.jsx(os,{children:e.jsxs(I,{children:[e.jsx(l,{scope:"col",children:"No"}),e.jsx(l,{scope:"col",children:"Name"}),e.jsx(l,{scope:"col",children:"Status"}),e.jsx(l,{scope:"col",children:"Date"}),e.jsx(l,{scope:"col",children:"Total"}),e.jsx(l,{scope:"col",children:"Tax"}),e.jsx(l,{scope:"col",children:"Tips"}),e.jsx(l,{scope:"col",children:"Payable"}),e.jsx(l,{scope:"col",children:"Action"}),e.jsx(l,{scope:"col",children:"PDF"})]})}),e.jsx(ls,{children:T.map((s,a)=>{let t="info",n="";return(s==null?void 0:s.status)==="pending"?(n="Pending",t="info"):(s==null?void 0:s.status)==="done"?(n="Paid",t="primary"):(s==null?void 0:s.status)==="sent"?(n="Sent",t="success"):(s==null?void 0:s.status)==="waiting"?(n="Waiting",t="warning"):(s==null?void 0:s.status)==="ready"&&(n="Ready",t="danger"),e.jsxs(I,{children:[e.jsx(r,{children:s.no}),e.jsx(r,{children:s.name}),e.jsx(r,{children:e.jsx(R,{style:{width:60},color:t,children:n})}),e.jsx(r,{children:s.date}),e.jsx(r,{children:s.total}),e.jsx(r,{children:s.tax}),e.jsx(r,{children:s.tips}),e.jsx(r,{children:s.payable}),e.jsxs(r,{children:[(s==null?void 0:s.status)==="waiting"&&e.jsx(p,{onClick:()=>j(s.id,s.status),size:"sm",color:t,style:{width:90},children:"Received"}),(s==null?void 0:s.status)==="sent"&&e.jsx(p,{size:"sm",onClick:()=>j(s.id,s.status),color:t,style:{width:90},children:"Received"}),(s==null?void 0:s.status)==="ready"&&e.jsx(p,{size:"sm",onClick:()=>j(s.id,s.status),color:t,style:{width:90},children:"To Pay"})]}),e.jsxs(r,{children:[e.jsx(p,{size:"sm",style:{backgroundColor:"#ff4d4d",width:80,color:"white"},onClick:()=>q(s.type,s),children:"View"})," "]})]},a)})})]}),e.jsxs(L,{visible:d,scrollable:!0,size:"xl",onClose:()=>P(!1),children:[e.jsx(V,{closeButton:!0,children:e.jsx(O,{children:"Information"})}),e.jsx($,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"}})]}),e.jsxs(L,{transition:!1,alignment:"center",visible:H,scrollable:!0,size:"lg",onClose:()=>x(!1),children:[e.jsx(V,{closeButton:!0,children:e.jsx(O,{children:"Confirmation"})}),e.jsxs($,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:[e.jsx("a",{children:"Are you sure you want to pay out status ?"}),e.jsx(p,{onClick:()=>U(),style:{display:"flex",justifyContent:"center"},color:"primary",children:"Yes"})]})]})]})};export{gs as default};
