import{r as s,x as J,l as K,z as o,j as e}from"./index-Dru6cJd9.js";import{a as R}from"./axios-B4uVmeYG.js";import{b as O,a as v}from"./CContainer-kO2Y6oaX.js";import{C as i}from"./CCol-CgJ3Fg_f.js";import{C as d}from"./CFormInput-B0afyM5h.js";import{C as u}from"./CFormSelect-Xslpmxb2.js";import{C as Q,a as U,b as L,c as h,d as V,e as p}from"./CTable-DhhKy43I.js";import"./CFormLabel-Bk9i1EOs.js";const re=()=>{const[w,E]=s.useState([]),[{user:T,token:c},l]=J(),[B,X]=s.useState(["conad","carrefour","everli","everli_Carrefour","pam","cosicomodo","il_Gigante"]),[m,F]=s.useState(""),[x,_]=s.useState(""),[j,z]=s.useState(""),[y,N]=s.useState(""),[g,q]=s.useState(""),[C,H]=s.useState(""),P=K(),[n,b]=s.useState(""),[S,k]=s.useState(""),[f,A]=s.useState(""),[r,M]=s.useState([]),W=()=>{if(n&&S&&f){if(r.find(D=>D.day===n)){l({type:o,payload:{status:!0,title:"Day already exists",message:"Schedule for "+n+" already exists"}});return}const a={day:n,info:{startTime:S,closeTime:f}};M([...r,a]),b(""),k(""),A("")}else console.log("All fields are required"),l({type:o,payload:{status:!0,title:"Please Check",message:"All fields are required"}})},$=t=>{const a=r.filter((D,I)=>I!==t);M(a)},G=()=>{if(console.log(r),m&&x&&j&&y&&g&&C){const t={lat:m,lng:x,address:j,id:y,city:g,source:C,times:r};console.log(t),T&&c&&R.post("http://15.160.211.157/assistant/market/create",t,{headers:{Authorization:`Bearer ${c}`}}).then(a=>{a.status===200?(l({type:o,payload:{status:!0,title:"Market Registration",message:"Market Registration Success",color:"success"}}),P("/markets")):a.status===204?l({type:o,payload:{status:!0,title:"Market Registration error",message:a.data.message}}):a.status===500&&l({type:o,payload:{status:!0,title:"Market Registration error",message:a.data.message}})}).catch(a=>{console.error("Error:",a)})}else alert("Please Check the Fields!")};return s.useEffect(()=>{c&&T&&R.get("http://15.160.211.157/assistant/market/chains/all",{headers:{Authorization:`Bearer ${c}`}}).then(t=>{t.status===200?E(t.data):t.status===500&&l({type:o,payload:{status:!0,title:"Market Registration error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)})},[]),e.jsx(O,{children:e.jsxs("div",{className:"row g-3",children:[e.jsx(i,{md:6,children:e.jsx(d,{id:"inputlatitue",label:"Latitude",value:m,onChange:t=>F(t.target.value)})}),e.jsx(i,{md:6,children:e.jsx(d,{id:"inputlongtitu",label:"Longitude",value:x,onChange:t=>_(t.target.value)})}),e.jsx(i,{xs:12,children:e.jsx(d,{id:"inputAddress",label:"Address",placeholder:"",value:j,onChange:t=>z(t.target.value)})}),e.jsx(i,{md:4,children:e.jsxs(u,{id:"inputState",label:"City",value:g,onChange:t=>q(t.target.value),children:[e.jsx("option",{children:"Select City"}),e.jsx("option",{children:"Milano"}),e.jsx("option",{children:"Napoli"})]})}),e.jsx(i,{md:4,children:e.jsxs(u,{id:"inputState",label:"Market Chain",value:y,onChange:t=>N(t.target.value),children:[e.jsx("option",{children:"Select Chain"}),w.map((t,a)=>e.jsx("option",{value:t.id,children:t.name},a))]})}),e.jsx(i,{md:4,children:e.jsxs(u,{id:"inputState",label:"Source",value:C,onChange:t=>H(t.target.value),children:[e.jsx("option",{children:"Select"}),B.map((t,a)=>e.jsx("option",{children:t},a))]})}),e.jsx(i,{md:2,children:e.jsxs(u,{id:"inputState",label:"Day",value:n,onChange:t=>b(t.target.value),children:[e.jsx("option",{children:"Select Day"}),e.jsx("option",{value:"mon",children:"Monday"}),e.jsx("option",{value:"tue",children:"Tuesday"}),e.jsx("option",{value:"wed",children:"Wednesday"}),e.jsx("option",{value:"thu",children:"Thursday"}),e.jsx("option",{value:"fri",children:"Friday"}),e.jsx("option",{value:"sat",children:"Saturday"}),e.jsx("option",{value:"sun",children:"Sunday"})]})}),e.jsx(i,{md:4,children:e.jsx(d,{id:"inputstart",label:"Start Time",type:"time",value:S,onChange:t=>k(t.target.value)})}),e.jsx(i,{md:4,children:e.jsx(d,{id:"inputend",label:"Close Time",type:"time",value:f,onChange:t=>A(t.target.value)})}),e.jsx(i,{md:2,children:e.jsx(v,{style:{marginTop:31},color:"primary",onClick:W,children:"Add"})}),e.jsxs(Q,{children:[e.jsx(U,{children:e.jsxs(L,{children:[e.jsx(h,{scope:"col",children:"Day"}),e.jsx(h,{scope:"col",children:"Start Time"}),e.jsx(h,{scope:"col",children:"Close Time"}),e.jsx(h,{scope:"col",children:"Action"})]})}),e.jsx(V,{children:r.map((t,a)=>e.jsxs(L,{children:[e.jsx(p,{children:t.day==="mon"?"Monday":t.day==="tue"?"Tuesday":t.day==="wed"?"Wednesday":t.day==="thu"?"Thursday":t.day==="fri"?"Friday":t.day==="sat"?"Saturday":"Sunday"}),e.jsx(p,{children:t.info.startTime}),e.jsx(p,{children:t.info.closeTime}),e.jsx(p,{children:e.jsx(v,{color:"danger",onClick:()=>$(a),children:"Remove"})})]},a))})]}),e.jsx(i,{xs:12,children:e.jsx(v,{color:"warning",type:"submit",style:{marginBottom:"3%",width:"200px"},onClick:()=>G(),children:"Add Market"})})]})})};export{re as default};
