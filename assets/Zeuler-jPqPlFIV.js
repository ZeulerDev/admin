import{r as l,y as xe,A as x,j as e,L as _,h as ue,m as D}from"./index-Bsn8dk4K.js";import{a as V}from"./axios-Cm0UX6qg.js";import{B as Y}from"./config-CAsDK75y.js";import{b as he,a as pe}from"./CContainer-AV4JspaL.js";import{a as je,b as me,d as ge,e as k}from"./DefaultLayout-FA2rmZWX.js";import{C as fe}from"./CNavbar-5ERL6Uil.js";import{C as y,a as b,b as n,c as t,d as P,e as a}from"./CTable-CwbSrcrF.js";import{c as Ce}from"./cil-clipboard-CrSEg4F6.js";import{c as Z}from"./cil-info-CmGCY32x.js";import{C as ke,a as L}from"./CPaginationItem-TLWytmzh.js";import{C as ye,a as be,b as Pe,c as Me}from"./CModalTitle-BnZCXL7j.js";import{C as Te}from"./CCardImage-QNsgrsKa.js";import{C as Se}from"./CModalFooter-ylOqhqYb.js";const He=()=>{var E,R,z,U,$,H;const[w,v]=l.useState(!1);l.useState(!1);const[{user:A,token:h},d]=xe(),[q,J]=l.useState([]);l.useState([]);const[K,u]=l.useState(!1),[De,I]=l.useState(!1);l.useState(!1),l.useState([]);const[M,O]=l.useState([]),[p,T]=l.useState(0),[Q,N]=l.useState(!0),[W,X]=l.useState(0),[j,S]=l.useState(1),[c,ee]=l.useState([]),[B,se]=l.useState([]),[G,te]=l.useState([]),[ae,m]=l.useState("All"),[F,g]=l.useState("");l.useEffect(()=>{const s=setTimeout(()=>{d({type:x,payload:{status:!0,title:"Data Loading",message:"Data loading error or  Timeout exceeded",color:"warning"}}),u(!1)},2e4);return A&&h&&f(0,s),()=>{clearTimeout(s)}},[A,h,F]);const f=(s,r)=>{u(!0),V.get(Y+`deepLinkUrls/all/${s}?type=${F}`,{headers:{Authorization:`Bearer ${h}`}}).then(o=>{o.status===200?(J(o.data.list),X(o.data.count),u(!1),clearTimeout(r),o.data.length<50?N(!0):o.data.length>49&&N(!1)):o.status===204?(u(!1),d({type:x,payload:{status:!0,title:"Links loading error",message:"No links found",color:"info"}})):o.status===500&&(u(!1),d({type:x,payload:{status:!0,title:"links loading error",message:o.data.message}}))}).catch(o=>{console.error("Error:",o),u(!1),d({type:x,payload:{status:!0,title:"links loading error",message:res.data.message}})})},re=()=>{S(j+1);const s=p+50;T(s),f(s,!0)},le=()=>{S(j-1);const s=p-50;console.log(s),T(s),f(s,!1)},oe=s=>{S(s);const r=(s-1)*50;T(r),f(r,!0)},ce=()=>{const s=Math.ceil(W/50),r=[];for(let i=1;i<=s;i++)r.push(i);const o=Math.max(j-2,1),de=Math.min(o+4,s);return r.slice(o-1,de).map(i=>e.jsx(L,{active:j===i,onClick:()=>oe(i),children:i},i))},ie=s=>{v(!w),O(s),s.market!==null?(console.log("market"),se(s.market)):s.marketGroup!==null?(console.log("marketGroup"),te(s.marketGroup)):s.product!==null&&(console.log("product"),ne(s.product._id))},ne=s=>{I(!0),V.get(Y+`product/view/${s}`,{headers:{Authorization:`Bearer ${h}`}}).then(r=>{r.status===200?(ee(r.data.list),I(!1)):r.status===204?d({type:x,payload:{status:!0,title:"Product Loading error",message:r.data.message}}):r.status===500&&d({type:x,payload:{status:!0,title:"Product Loading error",message:r.data.message}})}).catch(r=>{console.error("Error: ",r)})},C=s=>{s==="all"?(m("All"),g("")):s==="Product"?(m(s),g("Product")):s==="Market"?(m(s),g("Market")):s==="Market Group"&&(m(s),g("Market Group"))};return e.jsxs(he,{children:[e.jsx(_,{to:"/marketing/create/marketing",children:e.jsx(pe,{style:{marginLeft:"0%",width:"17%",backgroundColor:"#ff4d4d",color:"white"},children:"Create URL"})}),e.jsxs(je,{style:{marginLeft:"2%",width:"17%",backgroundColor:"#ff4d4d"},children:[e.jsx(me,{style:{color:"white"},children:ae}),e.jsxs(ge,{children:[e.jsx(k,{onClick:()=>{C("all")},children:"All"}),e.jsx(k,{onClick:()=>{C("Product")},children:"Product"}),e.jsx(k,{onClick:()=>{C("Market")},children:"Market"}),e.jsx(k,{onClick:()=>{C("Market Group")},children:"Market Group"})]})]}),e.jsx(fe,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),K?e.jsx(ue,{}):e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs(n,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Type"}),e.jsx(t,{scope:"col",children:"URL"}),e.jsx(t,{scope:"col",children:"View Details"})]})}),e.jsx(P,{children:q.map((s,r)=>e.jsxs(n,{children:[e.jsx(a,{children:p+r+1}),e.jsx(a,{children:s.type}),e.jsx(a,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:s.url}),e.jsx("div",{children:e.jsx(D,{icon:Ce,onClick:()=>{navigator.clipboard.writeText(s.url),d({type:x,payload:{status:!0,title:"Copy Success",message:"URL copied to clipboard",color:"success"}})}})})]})}),e.jsx(a,{children:s.items===null?e.jsx(D,{icon:Z,size:"xl"}):e.jsx(_,{children:e.jsx(D,{icon:Z,size:"xl",onClick:()=>ie(s)})})})]},r))})]}),e.jsxs(ke,{"aria-label":"Page navigation example",children:[e.jsx(L,{disabled:p<=0,onClick:le,children:"Previous"}),ce(),e.jsx(L,{disabled:Q===!0,onClick:re,children:"Next"})]}),e.jsxs(ye,{visible:w,scrollable:!0,size:"xl",onClose:()=>v(!1),children:[e.jsx(be,{closeButton:!0,children:e.jsx(Pe,{children:"Link Information"})}),e.jsx(Me,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:M.market!==null?e.jsx(e.Fragment,{children:e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs(n,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Chain Name"}),e.jsx(t,{scope:"col",children:"Address"})]})}),e.jsx(P,{children:e.jsxs(n,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:(E=B.chain)==null?void 0:E.name}),e.jsx(a,{children:B.address})]})})]})}):M.marketGroup!==null?e.jsx(e.Fragment,{children:e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs(n,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"City"})]})}),e.jsx(P,{children:e.jsxs(n,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:G.name}),e.jsx(a,{children:G.city})]})})]})}):M.product!==null?e.jsx(e.Fragment,{children:e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs(n,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Product Id"}),e.jsx(t,{scope:"col",children:"Photo"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"Base Price"}),e.jsx(t,{scope:"col",children:"Tax"}),e.jsx(t,{scope:"col",children:"Markup Percentage "}),e.jsx(t,{scope:"col",children:"Markup"}),e.jsx(t,{scope:"col",children:"Total"}),e.jsx(t,{scope:"col",children:"Brand"}),e.jsx(t,{scope:"col",children:"Chain"}),e.jsx(t,{scope:"col",children:"Market Address"})]})}),e.jsx(P,{children:e.jsxs(n,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:c.pid}),e.jsx(t,{children:e.jsx(Te,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+c.image})}),e.jsx(a,{children:c.name}),e.jsx(a,{children:(((R=c.price)==null?void 0:R.basePrice)??0).toFixed(2)}),e.jsx(a,{children:(((z=c.price)==null?void 0:z.tax)??0).toFixed(2)}),e.jsxs(a,{children:[(U=c.price)==null?void 0:U.percentage,"%"]}),e.jsx(a,{children:((($=c.price)==null?void 0:$.markup)??0).toFixed(2)}),e.jsx(a,{children:(((H=c.price)==null?void 0:H.total)??0).toFixed(2)}),e.jsx(a,{children:c.brand}),e.jsx(a,{children:c.chainName}),e.jsx(a,{children:c.marketAddress})]})})]})}):e.jsx(e.Fragment,{})}),e.jsx(Se,{})]})]})};export{He as default};
