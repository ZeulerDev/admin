import{r as o,x as z,z as c,j as e,h as M}from"./index-BismIp9s.js";import{a as T}from"./axios-B4uVmeYG.js";import{B as A}from"./config-HOLfLxHr.js";import{b as N,a as j}from"./CContainer-BEr4FbZI.js";import{C as L}from"./CNavbar-yECAKyfe.js";import{C as V}from"./CFormInput-BKuvivfL.js";import{C as R,a as H,b as D,c as t,d as F,e as r}from"./CTable-BeI7nJZA.js";import{d}from"./DefaultLayout-CH4w68Bh.js";import{C as Q,a as U,b as Y,c as _}from"./CModalTitle-hhCfvApu.js";import{C as $}from"./CModalFooter-yY-_tgW2.js";import"./CFormLabel-s32zAUud.js";const ae=()=>{const[g,u]=o.useState(!1),[{user:f,token:i},l]=z(),[p,C]=o.useState([]),[w,m]=o.useState(!1),[E,I]=o.useState(""),[v,y]=o.useState(""),[x,S]=o.useState("");o.useEffect(()=>{f&&i&&(m(!0),T.get(A+"assistant/vat/riders/00?search="+x,{headers:{Authorization:`Bearer ${i}`}}).then(s=>{s.status===200?(C(s.data),m(!1),console.log("done")):s.status===204?l({type:c,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}}):s.status===500&&l({type:c,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}})}).catch(s=>{console.error("Error:",s)}))},[x]);const b=(s,a=null)=>{u(!g),I(s),a!==null?y(a):console.log("VAT DID not provided"),console.log(s)},B=()=>{const s={vat:v};f&&i&&T.patch(A+"assistant/rider/vat/"+E,s,{headers:{Authorization:`Bearer ${i}`}}).then(a=>{if(a.status===200){console.log("updated"),u(!1);const n=a.data,h=p.find(k=>k.id===n.id);h&&(h.vat=n.vat),C([...p]),l({type:c,payload:{status:!0,title:"Driver VAT Id ",message:"VAT Id updated successfully"}})}else a.status===203?(console.log("203"),l({type:c,payload:{status:!0,title:"Driver VAT Id error",message:a.data.message}})):a.status===204?(console.log("204"),l({type:c,payload:{status:!0,title:"Driver VAT Id error",message:a.data.message}})):a.status===500&&l({type:c,payload:{status:!0,title:"Driver VAT Id update error",message:a.data.message}})}).catch(a=>{console.error(a)})};return e.jsxs(N,{children:[e.jsx(L,{className:"bg-body-tertiary",children:e.jsx(V,{type:"text",placeholder:"Search",style:{width:450,marginLeft:"0%"},value:x,onChange:s=>S(s.target.value)})}),w?e.jsx(M,{}):e.jsxs(R,{children:[e.jsx(H,{children:e.jsxs(D,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"City"}),e.jsx(t,{scope:"col",children:"Vat"}),e.jsx(t,{scope:"col",children:"Activate"}),e.jsx(t,{scope:"col",children:"Disabled"}),e.jsx(t,{scope:"col",children:"Groups"}),e.jsx(t,{scope:"col",children:"Action"})]})}),e.jsx(F,{children:p.map((s,a)=>e.jsxs(D,{children:[e.jsx(r,{children:a+1}),e.jsx(r,{children:s.name}),e.jsx(r,{children:s.city}),e.jsx(r,{children:s.vat?s.vat:e.jsx(d,{color:"warning",children:"Null"})}),e.jsx(r,{children:s.activate?e.jsx(d,{color:"success",children:"Yes"}):e.jsx(d,{color:"warning",children:"No"})}),e.jsx(r,{children:s.disabled?e.jsx(d,{color:"success",children:"No"}):e.jsx(d,{color:"warning",children:"Yes"})}),e.jsx(r,{children:s.groups.map((n,h)=>e.jsx("div",{children:n.name},h))}),e.jsx(r,{children:s.vat===""?e.jsx(j,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70,color:"white"},onClick:()=>b(s.id,s.vat),children:"Insert "}):e.jsx(j,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70,color:"white"},onClick:()=>b(s.id,s.vat),children:"Edit "})})]},a))})]}),e.jsxs(Q,{alignment:"center",visible:g,scrollable:!0,size:"sm",onClose:()=>u(!1),children:[e.jsx(U,{closeButton:!0,children:e.jsx(Y,{children:"Confirmation"})}),e.jsxs(_,{children:[e.jsx("a",{children:"Enter Driver's VAT id here"}),e.jsx("br",{}),e.jsx(V,{type:"text",placeholder:"Vat id",value:v,onChange:s=>y(s.target.value)})]}),e.jsx($,{children:e.jsx(j,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>B(),children:"Save changes"})})]})]})};export{ae as default};
