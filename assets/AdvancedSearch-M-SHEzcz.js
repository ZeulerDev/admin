import{r as s,y as $,l as z,A as S,j as t,h as H}from"./index-vIOSoMUu.js";import{a as Q}from"./axios-Cm0UX6qg.js";/* empty css               */import{B as _}from"./config-HOLfLxHr.js";import{f as h}from"./index-PqYCJD3r.js";import{b as F}from"./CContainer-DQqje6Yb.js";import{C as U}from"./CNavbar-CKkucrSO.js";import{D as q}from"./index-B2NW4UHY.js";import{C as G}from"./CFormInput-D-Eh3JXR.js";import{C as J,a as K,b as M,c as r,d as V,e as l}from"./CTable-CA_T2BdW.js";import{C as W}from"./CCardImage-DSZEHEI-.js";import{C as X,a as D}from"./CPaginationItem-4rDKfmAB.js";import"./typeof-QjJsDpFa.js";import"./inheritsLoose-BR9xv5Kf.js";import"./CFormLabel-B9P4EuKI.js";const ge=()=>{s.useState(!1),s.useState(!1);const[{user:b,token:g},p]=$();z();const[T,E]=s.useState([]);s.useState([]);const[I,y]=s.useState(!1);s.useState(!1),s.useState([]);const[c,x]=s.useState([]),[i,f]=s.useState(0),[w,P]=s.useState(!0),[N,R]=s.useState(0),[d,C]=s.useState(1);s.useState("EMAIL");const[j,v]=s.useState("");s.useEffect(()=>{const e=new Date,o=new Date(e.getTime()-30*24*60*60*1e3),a=h(o,"yyyy-MM-dd"),m=h(e,"yyyy-MM-dd");x([a,m]),console.log(a,m)},[]),s.useEffect(()=>{const e=setTimeout(()=>{p({type:S,payload:{status:!0,title:"Data Loading",message:"There no data to display at the moment or something went wrong",color:"warning"}}),y(!1)},2e4);return b&&g&&u(0,e),()=>{clearTimeout(e)}},[b,g,c,j]);const u=(e,o)=>{console.log(e,c),y(!0),Q.get(_+`assistant/users/advance/search/${e}?date=${c}&name=${j}`,{headers:{Authorization:`Bearer ${g}`}}).then(a=>{a.status===200?(E(a.data.list),R(a.data.count),console.log(a.data.list),y(!1),clearTimeout(o),a.data.list.length<50?(P(!0),console.log("ok")):a.data.list.length>49&&P(!1)):a.status===204?p({type:S,payload:{status:!0,title:"Orders loading error",message:a.data.message}}):a.status===500&&p({type:S,payload:{status:!0,title:"Orders loading error",message:a.data.message}})}).catch(a=>{console.error("Error:",a)})},L=()=>{C(d+1);const e=i+50;f(e),u(e,!0)},k=()=>{C(d-1);const e=i-50;console.log(e),f(e),u(e,!1)},A=e=>{C(e);const o=(e-1)*50;f(o),u(o,!0)},B=()=>{const e=Math.ceil(N/50),o=[];for(let n=1;n<=e;n++)o.push(n);const a=Math.max(d-2,1),m=Math.min(a+4,e);return o.slice(a-1,m).map(n=>t.jsx(D,{active:d===n,onClick:()=>A(n),children:n},n))},O=e=>{if(e){const o=h(e[0],"yyyy-MM-dd"),a=h(e[1],"yyyy-MM-dd");x([o,a])}else x([])};return t.jsxs(F,{children:[t.jsxs(U,{className:"bg-body-tertiary",children:[t.jsx(q,{style:{marginLeft:0},format:"yyyy/MM/dd",onChange:O,value:c.length>0?[new Date(c[0]),new Date(c[1])]:null}),t.jsx(G,{type:"text",placeholder:"Search by customer name, surname, email and contact",style:{width:450,marginRight:"0%"},value:j,onChange:e=>v(e.target.value)})]}),I?t.jsx(H,{}):t.jsxs(J,{children:[t.jsx(K,{children:t.jsxs(M,{children:[t.jsx(r,{scope:"col",children:"#"}),t.jsx(r,{scope:"col",children:"Photo"}),t.jsx(r,{scope:"col",children:"Name"}),t.jsx(r,{scope:"col",children:"Surname"}),t.jsx(r,{scope:"col",children:"email"}),t.jsx(r,{scope:"col",children:"Contact"}),t.jsx(r,{scope:"col",children:"Country"}),t.jsx(r,{scope:"col",children:"Language"})]})}),t.jsx(V,{children:T.map((e,o)=>t.jsxs(M,{children:[t.jsx(l,{children:i+o+1}),t.jsx(r,{children:t.jsx(W,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+e.photo})}),t.jsx(l,{children:e.name}),t.jsx(l,{children:e.surname}),t.jsx(l,{children:e.email}),t.jsx(l,{children:e.contact}),t.jsx(l,{children:e.country==="it"||e.country==="Italy"?"Italy":e.country}),t.jsx(l,{children:e.language==="en"?"English":e.language==="it"?"Italy":e.language})]},o))})]}),t.jsxs(X,{"aria-label":"Page navigation example",children:[t.jsx(D,{disabled:i<=0,onClick:k,children:"Previous"}),B(),t.jsx(D,{disabled:w===!0,onClick:L,children:"Next"})]})]})};export{ge as default};
