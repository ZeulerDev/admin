import{r as l,x as E,B as z,z as h,j as e,i as p,L,m as A}from"./index-CPWz2mBo.js";import{a as F}from"./axios-B4uVmeYG.js";import{b as H,a as N}from"./CContainer-DVjuDtow.js";import{C as O}from"./CNavbar-BtIsg1Gz.js";import{C as R}from"./CForm-2L6OIrNj.js";import{C as u,a as C,b as c,c as a,d as f,e as t}from"./CTable-CHBcUNK4.js";import{e as g}from"./DefaultLayout-DMPR4tUM.js";import{c as P}from"./cil-info-CmGCY32x.js";import{C as q,a as Q,b as V,c as Y}from"./CModalTitle-Xk0eoXg3.js";import{C as _}from"./CCardImage-DyjukZ3v.js";import{C as $}from"./CModalFooter-HZC0g86p.js";const le=()=>{const[x,i]=l.useState(!1),[{user:j,token:d},n]=E(),[y,b]=l.useState([]),[k,M]=l.useState([]),[B,m]=l.useState(!1),[S,G]=l.useState(!1);l.useState([]),l.useState([]);const{id:T,market:I}=z();l.useEffect(()=>{j&&d&&v(T,I)},[j,d]);const v=(s,o)=>{m(!0),F.get("https://15.160.211.157/assistant/batch/market/orders/"+s+"/"+o,{headers:{Authorization:`Bearer ${d}`}}).then(r=>{r.status===200?(M(r.data.orders.flatMap(D=>D.items)),b(r.data.orders),m(!1)):r.status===203?n({type:h,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===204?n({type:h,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===500&&n({type:h,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}})}).catch(r=>{console.error("Error:",r)})},w=()=>{i(!x)};return e.jsxs(H,{children:[e.jsx(O,{className:"bg-body-tertiary",children:e.jsx(R,{})}),B?e.jsx(p,{}):e.jsxs(u,{children:[e.jsx(C,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"No"}),e.jsx(a,{scope:"col",children:"Status"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Delivery Fee"}),e.jsx(a,{scope:"col",children:"Slot"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Total"}),e.jsx(a,{scope:"col",children:"Markup"}),e.jsx(a,{scope:"col",children:"Order Items"})]})}),e.jsx(f,{children:y.map((s,o)=>e.jsxs(c,{children:[e.jsx(t,{children:s.order.no}),e.jsx(t,{children:e.jsx(g,{style:{width:80},color:"info",children:s.order.status})}),e.jsx(t,{children:s.order.address}),e.jsx(t,{children:s.order.deliveryFee}),e.jsx(t,{children:s.order.slot}),e.jsx(t,{children:s.order.date}),e.jsx(t,{children:s.order.total}),e.jsx(t,{children:s.order.markup}),e.jsx(t,{children:e.jsx(L,{children:e.jsx(A,{icon:P,size:"xl",onClick:()=>w()})})})]},o))})]}),e.jsxs(q,{visible:x,scrollable:!0,size:"xl",onClose:()=>i(!1),children:[e.jsx(Q,{closeButton:!0,children:e.jsx(V,{children:"Customer Information"})}),e.jsx(Y,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:S?e.jsx(p,{}):e.jsxs(u,{children:[e.jsx(C,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"}),e.jsx(a,{scope:"col",children:"Status"})]})}),e.jsx(f,{children:k.map((s,o)=>e.jsxs(c,{children:[e.jsx(a,{scope:"row",children:e.jsx(_,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.price}),e.jsx(t,{children:s.qty}),e.jsx(t,{children:s.measure}),e.jsxs(t,{children:[s.chain," - ",s.market]}),e.jsx(t,{children:e.jsx(g,{style:{width:80},color:"info",children:s.status})})]},o))})]})}),e.jsx($,{children:e.jsx(N,{color:"secondary",onClick:()=>i(!1),children:"Close"})})]})]})};export{le as default};
