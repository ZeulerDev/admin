import{r as o,y as w,D as A,A as i,j as e,h as p,L as O,m as R}from"./index-BYmq4vc5.js";import{a as z}from"./axios-Cm0UX6qg.js";import{B as H}from"./config-HOLfLxHr.js";import{b as N}from"./CContainer-CHPGgvmL.js";import{C as F}from"./CNavbar-C8iiLf1a.js";import{C as u,a as f,b as d,c as a,d as C,e as t}from"./CTable--SWjA8cW.js";import{C as g}from"./DefaultLayout-D2DuRGJD.js";import{c as P}from"./cil-info-CmGCY32x.js";import{C as _,a as q,b as Q,c as U}from"./CModalTitle-Cg7yZsHL.js";import{C as V}from"./CCardImage-C9Pj1z_J.js";import{C as Y}from"./CModalFooter-DeikAXwR.js";const oe=()=>{const[x,j]=o.useState(!1),[{user:m,token:n},c]=w(),[y,b]=o.useState([]),[k,T]=o.useState([]),[M,h]=o.useState(!1),[S,$]=o.useState(!1);o.useState([]),o.useState([]);const{id:B,market:D}=A();o.useEffect(()=>{const s=setTimeout(()=>{c({type:i,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),h(!1)},2e4);return m&&n&&L(B,D,s),()=>{clearTimeout(s)}},[m,n]);const L=(s,l,I)=>{h(!0),z.get(H+"assistant/batch/market/orders/"+s+"/"+l,{headers:{Authorization:`Bearer ${n}`}}).then(r=>{r.status===200?(T(r.data.orders.flatMap(v=>v.items)),b(r.data.orders),h(!1),clearTimeout(I)):r.status===203?c({type:i,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===204?c({type:i,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===500&&c({type:i,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}})}).catch(r=>{console.error("Error:",r)})},E=()=>{j(!x)};return e.jsxs(N,{children:[e.jsx(F,{className:"bg-body-tertiary"}),M?e.jsx(p,{}):e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(d,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"No"}),e.jsx(a,{scope:"col",children:"Status"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Delivery Fee"}),e.jsx(a,{scope:"col",children:"Slot"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Total"}),e.jsx(a,{scope:"col",children:"Markup"}),e.jsx(a,{scope:"col",children:"Order Items"})]})}),e.jsx(C,{children:y.map((s,l)=>e.jsxs(d,{children:[e.jsx(t,{children:l+1}),e.jsx(t,{children:s.order.no}),e.jsx(t,{children:e.jsx(g,{style:{width:80},color:"info",children:s.order.status})}),e.jsx(t,{children:s.order.address}),e.jsx(t,{children:s.order.deliveryFee}),e.jsx(t,{children:s.order.slot}),e.jsx(t,{children:s.order.date}),e.jsx(t,{children:s.order.total}),e.jsx(t,{children:s.order.markup}),e.jsx(t,{children:e.jsx(O,{children:e.jsx(R,{icon:P,size:"xl",onClick:()=>E()})})})]},l))})]}),e.jsxs(_,{visible:x,scrollable:!0,size:"xl",onClose:()=>j(!1),children:[e.jsx(q,{closeButton:!0,children:e.jsx(Q,{children:"Customer Order List Information"})}),e.jsx(U,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:S?e.jsx(p,{}):e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(d,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"}),e.jsx(a,{scope:"col",children:"Status"})]})}),e.jsx(C,{children:k.map((s,l)=>e.jsxs(d,{children:[e.jsx(t,{children:l+1}),e.jsx(t,{children:e.jsx(V,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.price}),e.jsx(t,{children:s.qty}),e.jsx(t,{children:s.measure}),e.jsxs(t,{children:[s.chain," - ",s.market]}),e.jsx(t,{children:e.jsx(g,{style:{width:80},color:"info",children:s.status})})]},l))})]})}),e.jsx(Y,{})]})]})};export{oe as default};
