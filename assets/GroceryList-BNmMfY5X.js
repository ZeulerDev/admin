import{r as o,y as Z,A as E,j as e,h as j,m as i,L as I}from"./index-BxH1rakr.js";import{a as ee}from"./axios-Cm0UX6qg.js";import{B as se}from"./config-HOLfLxHr.js";import{b as ae}from"./CContainer-ylatMxJB.js";import{C as le}from"./CNavbar-Biexb92H.js";import{C as N,a as k,b as n,c as a,d as M,e as l}from"./CTable-Bx9QinPx.js";import{c as z}from"./cil-info-CmGCY32x.js";import{e as B}from"./DefaultLayout-Bcif4Pss.js";import{C as te,a as F}from"./CPaginationItem-BWnNNVZj.js";import{C as A,a as R,b as w,c as H}from"./CModalTitle-DB18yAI6.js";import{C as oe}from"./CCardImage-8vDqrVcB.js";import{C as V}from"./CModalFooter-DqdykCSc.js";import{C as re}from"./CRow-SHWPen9A.js";import{C as u}from"./CFormLabel-CIPrM9rP.js";import{C as p}from"./CCol-B7zMXfy9.js";import{C}from"./CFormInput-BenDwOPe.js";const Te=()=>{const[f,g]=o.useState(!1),[G,y]=o.useState(!1),[{user:b,token:d},v]=Z(),[O,Y]=o.useState([]);o.useState([]);const[_,S]=o.useState(!1),[x,ce]=o.useState(!1);o.useState([]);const[m,q]=o.useState([]),[Q,U]=o.useState([]),[c,T]=o.useState(0),[$,L]=o.useState(!0);o.useEffect(()=>{b&&d&&h(0)},[b,d]);const h=(s,r)=>{S(!0),ee.get(se+"assistant/grocery/list/"+s,{headers:{Authorization:`Bearer ${d}`}}).then(t=>{t.status===200?(Y(t.data),S(!1),t.data.length<50?(L(!0),console.log("ok")):t.data.length>49&&L(!1)):t.status===204?v({type:E,payload:{status:!0,title:"Grocery List loading error",message:t.data.message}}):t.status===500&&v({type:E,payload:{status:!0,title:"Grocery List loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)})},J=()=>{console.log(c);const s=c+50;T(s),h(s)},K=()=>{const s=c-50;console.log(s),T(s),h(s)},W=s=>{g(!f),U(s)},X=s=>{y(!x),q(s)};return e.jsxs(ae,{children:[e.jsx(le,{className:"bg-body-tertiary"}),_?e.jsx(j,{}):e.jsxs(N,{children:[e.jsx(k,{children:e.jsxs(n,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Type"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Items"}),e.jsx(a,{scope:"col",children:"Customer"})]})}),e.jsx(M,{children:O.map((s,r)=>e.jsxs(n,{children:[e.jsx(l,{children:c+r+1}),e.jsx(l,{children:s.name?s.name:""}),e.jsx(l,{children:s.data}),e.jsx(l,{children:s.type}),e.jsx(l,{children:s.address}),e.jsx(l,{children:s.items===null?e.jsx(i,{icon:z,size:"xl"}):e.jsx(I,{children:e.jsx(i,{icon:z,size:"xl",onClick:()=>W(s.items)})})}),e.jsx(l,{children:s.customer===null?e.jsx(i,{icon:B,size:"xl"}):e.jsx(I,{children:e.jsx(i,{icon:B,size:"xl",onClick:()=>X(s.customer)})})})]},r))})]}),e.jsxs(te,{"aria-label":"Page navigation example",children:[e.jsx(F,{disabled:c<=0,onClick:K,children:"Previous"}),e.jsx(F,{disabled:$===!0,onClick:J,children:"Next"})]}),e.jsxs(A,{visible:f,scrollable:!0,size:"xl",onClose:()=>g(!1),children:[e.jsx(R,{closeButton:!0,children:e.jsx(w,{children:"Customer Order List Information"})}),e.jsx(H,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:x?e.jsx(j,{}):e.jsxs(N,{children:[e.jsx(k,{children:e.jsxs(n,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Saving"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"})]})}),e.jsx(M,{children:Q.map((s,r)=>{var t,P,D;return e.jsxs(n,{children:[e.jsx(l,{children:r+1}),e.jsx(a,{children:e.jsx(oe,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(l,{children:s.name}),e.jsx(l,{children:s.price}),e.jsx(l,{children:s.saving?s.saving.toFixed(2):null}),e.jsx(l,{children:s.qty}),e.jsx(l,{children:s.um}),e.jsxs(l,{children:[(P=(t=s.market)==null?void 0:t.chain)==null?void 0:P.name," - ",(D=s.market)==null?void 0:D.address]})]},r)})})]})}),e.jsx(V,{})]}),e.jsxs(A,{visible:G,scrollable:!0,size:"lg",onClose:()=>y(!1),children:[e.jsx(R,{closeButton:!0,children:e.jsx(w,{children:"Customer Information"})}),e.jsx(H,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:x?e.jsx(j,{}):e.jsx("div",{children:e.jsxs(re,{className:"mb-3",children:[e.jsx(u,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(p,{sm:10,children:e.jsx(C,{type:"text",defaultValue:m.name,readOnly:!0,plainText:!0})}),e.jsx(u,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(p,{sm:10,children:e.jsx(C,{type:"text",defaultValue:m.email,readOnly:!0,plainText:!0})}),e.jsx(u,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(p,{sm:10,children:e.jsx(C,{type:"text",defaultValue:m.contact,readOnly:!0,plainText:!0})})]})})}),e.jsx(V,{})]})]})};export{Te as default};
