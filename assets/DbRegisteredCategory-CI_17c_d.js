import{y as ce,r as a,A as l,j as t,h as ue,m as de}from"./index-Bsn8dk4K.js";import{a as R}from"./axios-Cm0UX6qg.js";import{B as v}from"./config-CAsDK75y.js";import{b as ge,a as y}from"./CContainer-AV4JspaL.js";import{C as he}from"./CNavbar-5ERL6Uil.js";import{C as w}from"./CFormInput--iaGGot-.js";import{C as me,a as ye,b as z,c as T,d as Ce,e as D}from"./CTable-CwbSrcrF.js";import{c as pe}from"./cil-pencil-m516yCOw.js";import{C as fe,a as E}from"./CPaginationItem-TLWytmzh.js";import{C as $,a as L,b as Q,c as H}from"./CModalTitle-BnZCXL7j.js";import{C as _}from"./CModalFooter-ylOqhqYb.js";import"./CFormLabel-iOJk5yzm.js";import"./DefaultLayout-FA2rmZWX.js";const Be=()=>{const[{user:N,token:c},r]=ce();a.useState(!1),a.useState(!1);const[F,C]=a.useState(0),[p,xe]=a.useState(0),[V,A]=a.useState(!0);a.useState([]),a.useState("All Chains"),a.useState("All market"),a.useState(""),a.useState(""),a.useState([]);const[i,U]=a.useState(""),[q,I]=a.useState(i);a.useState([]);const[G,J]=a.useState(0),[h,f]=a.useState(1),[x,be]=a.useState(),[K,O]=a.useState([]),[W,b]=a.useState(!1),[X,d]=a.useState(!1),[Y,S]=a.useState(!1),[m,j]=a.useState(""),[P,M]=a.useState(""),[k,B]=a.useState("");a.useEffect(()=>{const e=setTimeout(()=>{r({type:l,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),b(!1)},2e4);return N&&c&&g(0,e),()=>{clearTimeout(e)}},[N,c,q]),a.useEffect(()=>{const e=setTimeout(()=>{(i.length>=3||i.length===0)&&I(i)},500);return()=>{clearTimeout(e)}},[i]);const g=(e,o)=>{console.log("search",i),b(!0),R.get(v+`product/category/main/${e}?name=${i}`,{headers:{Authorization:`Bearer ${c}`}}).then(s=>{s.status===200?(O(s.data.list),J(s.data.count),console.log(s.data.list.length),b(!1),clearTimeout(o),s.data.list.length<50?(A(!0),console.log("ok")):s.data.list.length>49&&A(!1),console.log(s.data.list.length)):s.status===500&&r({type:l,payload:{status:!0,title:"Category loading error",message:s.data.message}})}).catch(s=>{console.error("Error:",s)})},Z=()=>{f(h+1);const e=p+50;C(e),g(e,x)},ee=()=>{f(h-1);const e=p-50;console.log(e),C(e),g(e,x)},te=e=>{f(e);const o=(e-1)*50;C(o),g(o,x)},ae=()=>{const e=Math.ceil(G/50),o=[];for(let n=1;n<=e;n++)o.push(n);const s=Math.max(h-2,1),u=Math.min(s+4,e);return o.slice(s-1,u).map(n=>t.jsx(E,{active:h===n,onClick:()=>te(n),children:n},n))},se=()=>{d(!0)},oe=e=>{S(!0),B(e)},re=()=>{m?(console.log(m),ie(m),d(!1)):r({type:l,payload:{status:!0,title:"Check the fields",message:"Please check the fields",color:"warning"}})},le=()=>{k?(console.log(P,k),ne(P,k),d(!1)):r({type:l,payload:{status:!0,title:"Check the fields",message:"Please check the fields",color:"warning"}})},ie=e=>{if(e){const o={name:e};c&&R.post(v+"product/category/main/add",o,{headers:{Authorization:`Bearer ${c}`}}).then(s=>{s.status===200?(r({type:l,payload:{status:!0,title:"Category Registration",message:"Category Registration Success",color:"success"}}),d(!1),j(""),g(0)):s.status===400?r({type:l,payload:{status:!0,title:"Category Registration error",message:"Category Registration error",color:"warning"}}):s.status===500&&r({type:l,payload:{status:!0,title:"Picker Registration error",message:"Picker Registration error 500",color:"warning"}})}).catch(s=>{console.error("Error:",s)})}else r({type:l,payload:{status:!0,title:"Error!",message:"Picker Registration error, Please Check the input fields",color:"warning"}})},ne=(e,o)=>{if(e){const s={name:e,categoryId:o};c&&R.post(v+"product/category/sub/add",s,{headers:{Authorization:`Bearer ${c}`}}).then(u=>{u.status===200?(r({type:l,payload:{status:!0,title:"SubCategory Registration",message:"SubCategory Registration Success",color:"success"}}),S(!1),B(""),M("")):u.status===400?r({type:l,payload:{status:!0,title:"SubCategory Registration error",message:"SubCategory Registration error",color:"warning"}}):u.status===500&&r({type:l,payload:{status:!0,title:"SubCategory Registration error",message:"SubCategory Registration error 500",color:"warning"}})}).catch(u=>{console.error("Error:",u)})}else r({type:l,payload:{status:!0,title:"Error!",message:"Category Registration error, Please Check the input fields",color:"warning"}})};return t.jsxs(ge,{children:[t.jsx(y,{onClick:()=>{se()},style:{backgroundColor:"#ff4d4d",width:"17%",color:"white"},children:"Add Main Category"}),t.jsx(he,{style:{marginTop:"1%"},className:"bg-body-tertiary",children:t.jsx(w,{type:"text",placeholder:"Search here",style:{width:450,marginRight:"30%"},value:i,onChange:e=>U(e.target.value)})}),W?t.jsx(ue,{}):t.jsxs(me,{children:[t.jsx(ye,{children:t.jsxs(z,{children:[t.jsx(T,{scope:"col",children:"#"}),t.jsx(T,{scope:"col",children:"Name"}),t.jsx(T,{scope:"col",children:"Add Subcategory"})]})}),t.jsx(Ce,{children:K.map((e,o)=>t.jsxs(z,{children:[t.jsx(D,{children:F+o+1}),t.jsx(D,{children:e.name}),t.jsx(D,{children:t.jsx(y,{size:"sm",style:{backgroundColor:"#ff4d4d"},variant:"outline",onClick:()=>{oe(e._id)},children:t.jsx(de,{icon:pe,size:"lg",style:{color:"white"}})})})]},o))})]}),t.jsxs(fe,{"aria-label":"Page navigation example",children:[t.jsx(E,{disabled:p<=0,onClick:ee,children:"Previous"}),ae(),t.jsx(E,{disabled:V===!0,onClick:Z,children:"Next"})]}),t.jsxs($,{alignment:"center",visible:X,scrollable:!0,size:"sm",onClose:()=>{d(!1),j("")},children:[t.jsx(L,{closeButton:!0,children:t.jsx(Q,{children:"Category Registration"})}),t.jsx(H,{children:t.jsx(w,{type:"text",placeholder:"Enter Category Name",value:m,onChange:e=>j(e.target.value)})}),t.jsx(_,{children:t.jsx(y,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>{re()},children:"Save"})})]}),t.jsxs($,{alignment:"center",visible:Y,scrollable:!0,size:"sm",onClose:()=>{S(!1),M("")},children:[t.jsx(L,{closeButton:!0,children:t.jsx(Q,{children:"Subcategory Registration"})}),t.jsx(H,{children:t.jsx(w,{type:"text",placeholder:"Enter Subcategory Name",value:P,onChange:e=>M(e.target.value)})}),t.jsx(_,{children:t.jsx(y,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>{le()},children:"Save"})})]})]})};export{Be as default};
