import{A,x as E,r as n,z as o,j as e,h as x}from"./index-BzIi4H5T.js";import{a as g}from"./axios-B4uVmeYG.js";import{B as j}from"./config-HOLfLxHr.js";import{b as L,a as S}from"./CContainer-B_5lyMll.js";import{C as B}from"./CNavbar-nRmbgC54.js";import{C as D,a as w,b as d,c,d as N,e as r}from"./CTable-DraPgbcK.js";const P=()=>{const{id:u}=A(),[{user:i,token:l},a]=E(),[h,y]=n.useState([]),[C,p]=n.useState(!1),[b,f]=n.useState(!1);n.useEffect(()=>{m(u)},[i]);const m=s=>{s?i&&l&&(p(!0),g.get(j+`market/group/distance/${s}`,{headers:{Authorization:`Bearer ${l}`}}).then(t=>{t.status===200?(y(t.data),p(!1)):t.status===500&&a({type:o,payload:{status:!0,title:"Market group distance loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)})):a({type:o,payload:{status:!0,title:"Id Not found",color:"danger"}})},R=s=>{i&&l?(f(!0),g.get(j+`market/group/fetch/routes/${s}`,{headers:{Authorization:`Bearer ${l}`}}).then(t=>{t.status===200?(f(!1),console.log("load data"),a({type:o,payload:{status:!0,title:"Routes fetched",message:"Routes fetched successfully",color:"success"}}),m(s)):t.status===500&&a({type:o,payload:{status:!0,title:"Routes fetching error",message:t.data.message,color:"danger"}})})):a({type:o,payload:{status:!0,title:"User not found",message:"Please login to continue"}})};return e.jsxs(L,{children:[e.jsx(S,{onClick:()=>{R(u)},style:{marginLeft:"82%",width:"17%",backgroundColor:"#ff4d4d",color:"white"},children:b?e.jsx(x,{}):e.jsx(e.Fragment,{children:"  Fetch Routes"})}),e.jsx(B,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),C?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(x,{style:{marginTop:"15%"}})}):e.jsxs(D,{children:[e.jsx(w,{children:e.jsxs(d,{children:[e.jsx(c,{scope:"col",children:"#"}),e.jsx(c,{scope:"col",children:"Routers"}),e.jsx(c,{scope:"col",children:"Distance"}),e.jsx(c,{scope:"col",children:"Duration"})]})}),e.jsx(N,{children:h.length===0?e.jsx(d,{children:e.jsx(r,{colSpan:"4",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):h.map((s,t)=>e.jsxs(d,{children:[e.jsx(r,{children:t+1}),e.jsx(r,{children:s.routeFlow.map((T,k)=>e.jsx("div",{children:T},k))}),e.jsxs(r,{children:[s.distance," m"]}),e.jsxs(r,{children:[s.duration," min"]})]},t))})]})]})};export{P as default};
