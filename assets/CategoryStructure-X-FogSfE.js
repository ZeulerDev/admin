import{y as it,r as a,A as c,j as t,h as Ce,m as Se}from"./index-CHsjmxnU.js";import{a as y}from"./axios-Cm0UX6qg.js";import{B as h}from"./config-HOLfLxHr.js";import{b as nt,a as _}from"./CContainer-Dw7-AxLW.js";import{C as dt,a as ye,b as he,c as me,d as P,e as gt}from"./DefaultLayout-BwrjnTfX.js";import{C as ut}from"./CNavbar-DS_VKVWT.js";import{C as pe,a as Me,b as A,c as r,d as fe,e as i}from"./CTable-CpDj-LAf.js";import{C as be,a as je,b as ve,c as xe}from"./CModalTitle-BgBN8Bxw.js";import{C as Ct}from"./CRow-DAvNPRen.js";import{C as De}from"./CCol-CbSCCw0e.js";import{C as Pe}from"./CFormCheck-C3wURaiB.js";import{C as Ae}from"./CModalFooter-CZIgj7cX.js";import{C as St}from"./CCardImage-CzXum2IH.js";import{C as yt,a as q}from"./CPaginationItem-C_rJcpAt.js";import"./CFormLabel-BmodjjyT.js";var ht=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='403.814 165.089 381.187 187.716 433.069 239.598 272.402 239.598 272.402 78.932 324.284 130.813 346.912 108.187 256.402 17.676 165.892 108.187 188.52 130.813 240.402 78.932 240.402 239.598 78.932 239.598 130.814 187.716 108.187 165.089 17.677 255.598 108.186 346.107 130.814 323.48 78.931 271.598 240.402 271.598 240.402 433.068 188.52 381.187 165.892 403.813 256.402 494.324 346.912 403.813 324.284 381.187 272.402 433.068 272.402 271.598 433.069 271.598 381.186 323.48 403.814 346.107 494.323 255.598 403.814 165.089' class='ci-primary'/>"];const ta=()=>{const[{user:ke,token:n},l]=it();a.useState(!1);const[Ie,G]=a.useState(!1),[we,C]=a.useState(!1),[k,M]=a.useState(0),[J,mt]=a.useState(0),[ze,K]=a.useState(!0);a.useState([]),a.useState("All Chains"),a.useState("All market"),a.useState(""),a.useState(""),a.useState([]),a.useState(""),a.useState([]),a.useState("Selected markets"),a.useState([]);const[Be,I]=a.useState(!1),[pt,w]=a.useState("All Main Categories"),[Mt,z]=a.useState(""),[ft,Le]=a.useState([]),[bt,B]=a.useState(""),[jt,O]=a.useState("Select Sub Categories"),[vt,Q]=a.useState(""),[xt,X]=a.useState([]);a.useState({mainCategory:"",subCategory:"",category:""});const[m,f]=a.useState({selectMainCategory:"",selectMainSubCategory:"",moveMainCategory:"",moveMainSubCategory:""}),[g,S]=a.useState({selectMainCategory:"",selectMainSubCategory:"",selectMainSecondSubCategory:"",moveMainCategory:"",moveMainSubCategory:""}),[Y,Dt]=a.useState([]),[Pt,L]=a.useState("All Main Categories"),[At,E]=a.useState(""),[kt,Z]=a.useState("Select Sub Categories"),[It,ee]=a.useState(""),[wt,Ee]=a.useState([]),[zt,$]=a.useState([]),[Bt,b]=a.useState(""),[$e,N]=a.useState("All Main Categories"),[Lt,T]=a.useState(""),[Ne,te]=a.useState("Select Sub Categories"),[Et,ae]=a.useState(""),[Te,Re]=a.useState([]),[Ue,Ve]=a.useState([]),[Fe,se]=a.useState(""),[oe,re]=a.useState([]),[$t,le]=a.useState("Select Second Sub Categories"),[Nt,He]=a.useState([]),[Tt,R]=a.useState("All Main Categories"),[Rt,U]=a.useState(""),[Ut,ce]=a.useState("Select Sub Categories"),[We,j]=a.useState(""),[_e,qe]=a.useState([]),[Ge,ie]=a.useState([]),[Je,p]=a.useState(""),[Ke,ne]=a.useState(!1),[Oe,de]=a.useState([]),[Qe,ge]=a.useState(0),[v,x]=a.useState(1),[V,Xe]=a.useState();a.useEffect(()=>{n&&y.get(h+"product/categories",{headers:{Authorization:`Bearer ${n}`}}).then(e=>{e.status===200?(console.log(e.data[1]),Le(e.data),Ee(e.data),qe(e.data),Re(e.data)):e.status===500&&l({type:c,payload:{status:!0,title:"Main Category Loading error",message:"Main Category loading error"}})}).catch(e=>{console.error("Error: ",e)})},[]);const F=(e,s,o)=>{o==="move"?e==="all"?(E(""),L("All Main Categories"),b("")):(E(e),W(e,"move"),L(s),b(e),f({...m,moveMainCategory:e})):o==="select"?e==="all"?(z(""),w("All Main Categories"),B("")):(z(e),Ye(e),w(s),B(e),f({...m,selectMainCategory:e})):o==="select2"?e==="all"?(T(""),N("All Main Categories"),se("")):(T(e),W(e,"select2"),N(s),se(e),S({...g,selectMainCategory:e})):o==="move2"&&(e==="all"?(U(""),R("All Main Categories"),p("")):(U(e),W(e,"move2"),R(s),p(e),S({...g,moveMainCategory:e})))},H=(e,s,o)=>{o==="move"?e==="all"?(ee(""),Z("Select Main Categories"),E(""),L("All Main Categories"),$([]),b("")):(console.log("index",e),ee(e),Z(s),f({...m,moveMainSubCategory:e})):o==="select"?e==="all"?(Q(""),O("Select Main Categories"),z(""),w("All Main Categories"),X([]),B("")):(console.log("index",e),Q(e),O(s),f({...m,selectMainSubCategory:e})):o==="select2"?e==="all"?(ae(""),te("Select Main Categories"),T(""),N("All Main Categories"),$([]),b(""),le("Select Second Sub Categories")):(console.log("index",e),ae(e),te(s),Ze(Fe,e),S({...g,selectMainSubCategory:e})):o==="move2"&&(e==="all"?(j(""),ce("Select Main Categories"),U(""),R("All Main Categories"),ie([]),p("")):(console.log("index",e),j(e),ce(s),S({...g,moveMainSubCategory:e})))},Ye=e=>{n&&y.get(h+"product/categories/sub/"+e,{headers:{Authorization:`Bearer ${n}`}}).then(s=>{s.status===200?(X(s.data),console.log("select")):s.status===500&&l({type:c,payload:{status:!0,title:"Sub Category Loading",message:"Sub Category loading error"}})}).catch(s=>{console.error("Error: ",s)})},W=(e,s)=>{n&&y.get(h+"product/categories/sub/"+e,{headers:{Authorization:`Bearer ${n}`}}).then(o=>{o.status===200?(s==="move"?$(o.data):s==="select2"?Ve(o.data):s==="move2"&&ie(o.data),console.log("Move")):o.status===500&&l({type:c,payload:{status:!0,title:"Sub Category Loading",message:"Sub Category loading error"}})}).catch(o=>{console.error("Error: ",o)})},Ze=(e,s,o)=>{n&&(G(!0),y.get(h+`product/categories/sub?mId=${e}&subId=${s}`,{headers:{Authorization:`Bearer ${n}`}}).then(d=>{d.status===200?(re(d.data),G(!1),console.log("Done Load")):d.status===500&&l({type:c,payload:{status:!0,title:"Sub Category Loading",message:"Sub Category loading error"}})}).catch(d=>{console.error("Error: ",d)}))},et=()=>{if(m){let e={category:g};ke&&n&&y.put(h+"product/update/file/second/category",e,{headers:{Authorization:`Bearer ${n}`}}).then(s=>{if(s.status===200){l({type:c,payload:{status:!0,title:"Category Update",message:"Category update Success",color:"success"}});const o=oe.filter(d=>!Y.some(ue=>ue.name===d.name));console.log(o.length),p(""),j(""),re([...o])}else s.status===204?l({type:c,payload:{status:!0,title:"Category Update",message:"No category found",color:"danger"}}):s.status===500&&l({type:c,payload:{status:!0,title:"Category Update",message:"Category update error",color:"danger"}})}).catch(s=>{console.error("Error:",s)})}else l({type:c,payload:{status:!0,title:"Category Update",message:"Please Check the Fields!",color:"warning"}})},tt=e=>{He(e),le(e.name),Y.push(e),S({...g,selectMainSecondSubCategory:e}),I(!0)},at=()=>{g.moveMainCategory!==""&&g.moveMainSubCategory!==""?(console.log(g),et(),I(!1),S({selectMainCategory:"",selectMainSubCategory:"",selectMainSecondSubCategory:"",moveMainCategory:"",moveMainSubCategory:""})):l({type:c,payload:{status:!0,title:"Check the fields",message:"Please select the Main and Sub Category",color:"warning"}})},st=e=>{console.log(e),Xe(e.ids),ne(!0),D(0,e.ids)},D=(e,s)=>{C(!0),y.get(h+`product/category/${e}?ids=${s}`,{headers:{Authorization:`Bearer ${n}`}}).then(o=>{o.status===200?(de(o.data.list),console.log(o.data.list.length),ge(o.data.count),C(!1),o.data.list.length<50?(K(!0),console.log("ok")):o.data.list.length>50&&K(!1)):o.status===203?(C(!1),l({type:c,payload:{status:!0,title:"product loading error error",message:o.data.message}})):o.status===204?(C(!1),l({type:c,payload:{status:!0,title:"No Products",message:"No products found in this market address",color:"info"}})):o.status===500&&(C(!1),l({type:c,payload:{status:!0,title:"product loading error error",message:o.data.message}}))}).catch(o=>{C(!1),console.error("Error:",o)})},ot=()=>{x(v+1);const e=J+50;M(e),D(e,V)},rt=()=>{x(v-1);const e=J-50;console.log(e),M(e),D(e,V)},lt=e=>{x(e);const s=(e-1)*50;M(s),D(s,V)},ct=()=>{const e=Math.ceil(Qe/50),s=[];for(let u=1;u<=e;u++)s.push(u);const o=Math.max(v-2,1),d=Math.min(o+4,e);return s.slice(o-1,d).map(u=>t.jsx(q,{active:v===u,onClick:()=>lt(u),children:u},u))};return t.jsxs(nt,{children:[t.jsx(dt,{style:{marginLeft:"48%",width:"7%"},color:"secondary",children:"Select Category"}),t.jsxs(ye,{style:{marginLeft:"2%",width:"20%",backgroundColor:"#ff4d4d"},children:[t.jsx(he,{children:$e}),t.jsxs(me,{children:[t.jsx(P,{onClick:()=>F("all",null,"select2"),children:"All Main Category"}),Te.map((e,s)=>t.jsx(P,{onClick:()=>F(s,e,"select2"),children:e},s))]})]}),t.jsxs(ye,{style:{marginLeft:"2%",width:"20%",backgroundColor:"#ff4d4d"},children:[t.jsx(he,{children:Ne}),t.jsxs(me,{children:[t.jsx(P,{onClick:()=>H("all",null,"select2"),children:"Clear Category"}),Ue.map((e,s)=>t.jsx(P,{onClick:()=>H(s,e,"select2"),children:e},s))]})]}),t.jsx(ut,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),Ie?t.jsx(Ce,{}):t.jsxs(pe,{children:[t.jsx(Me,{children:t.jsxs(A,{children:[t.jsx(r,{scope:"col",children:"#"}),t.jsx(r,{scope:"col",children:"Category Name"}),t.jsx(r,{scope:"col",children:"Chain Name"}),t.jsx(r,{scope:"col",children:"Move"}),t.jsx(r,{scope:"col",children:"Product"})]})}),t.jsx(fe,{children:oe.map((e,s)=>t.jsxs(A,{children:[t.jsx(i,{children:k+s+1}),t.jsx(i,{children:e.name}),t.jsx(i,{children:e.chainName.map((o,d)=>t.jsxs("span",{children:[o," / "]},d))}),t.jsx(i,{children:t.jsx(_,{size:"sm",style:{backgroundColor:"#ff4d4d"},variant:"outline",onClick:()=>{tt(e)},children:t.jsx(Se,{icon:ht,size:"lg",style:{color:"white"}})})}),t.jsx(i,{children:t.jsx(_,{size:"sm",style:{backgroundColor:"#ff4d4d"},variant:"outline",onClick:()=>{st(e)},children:t.jsx(Se,{icon:gt,size:"lg",style:{color:"white"}})})})]},s))})]}),t.jsxs(be,{alignment:"center",visible:Be,scrollable:!0,size:"lg",onClose:()=>{p(""),j(""),I(!1)},children:[t.jsx(je,{closeButton:!0,children:t.jsx(ve,{children:"Add Category"})}),t.jsx(xe,{children:t.jsxs(Ct,{children:[t.jsxs(De,{md:6,children:[t.jsx("a",{style:{fontSize:17,fontWeight:"bold"},children:"Select the Main Category"}),t.jsx("br",{}),t.jsx("br",{}),_e.map((e,s)=>t.jsx(Pe,{onChange:()=>F(s,e,"move2"),type:"radio",name:"mainCategoryRadio",id:`flexRadioDefault${s}`,label:e,checked:Je===s},s))]}),t.jsxs(De,{md:6,children:[t.jsx("a",{style:{fontSize:17,fontWeight:"bold"},children:"Select the Sub Category"}),t.jsx("br",{}),t.jsx("br",{}),Ge.map((e,s)=>t.jsx(Pe,{onChange:()=>H(s,e,"move2"),checked:We===s,type:"radio",name:"subCategory",id:`flexRadioDefault2-${s}`,label:e},s))]})]})}),t.jsx(Ae,{children:t.jsx(_,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>{at()},children:"Save"})})]}),t.jsxs(be,{alignment:"center",visible:Ke,scrollable:!0,size:"xl",onClose:()=>{ne(!1),de([]),ge(0),x(1),M(0)},children:[t.jsx(je,{closeButton:!0,children:t.jsx(ve,{children:"View Products"})}),t.jsx(xe,{children:we?t.jsx(Ce,{}):t.jsxs(pe,{children:[t.jsx(Me,{children:t.jsxs(A,{children:[t.jsx(r,{scope:"col",children:"#"}),t.jsx(r,{scope:"col",children:"Product Id"}),t.jsx(r,{scope:"col",children:"Photo"}),t.jsx(r,{scope:"col",children:"Name"}),t.jsx(r,{scope:"col",children:"Price"}),t.jsx(r,{scope:"col",children:"Brand"}),t.jsx(r,{scope:"col",children:"Chain"}),t.jsx(r,{scope:"col",children:"Market Address"})]})}),t.jsx(fe,{children:Oe.map((e,s)=>t.jsxs(A,{children:[t.jsx(i,{children:k+s+1}),t.jsx(i,{children:e.pid}),t.jsx(r,{onClick:()=>{},children:t.jsx(St,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+e.image})}),t.jsx(i,{children:e.name}),t.jsx(i,{children:e.price}),t.jsx(i,{children:e.brand}),t.jsx(i,{children:e.chainName}),t.jsx(i,{children:e.marketAddress})]},s))})]})}),t.jsx(Ae,{children:t.jsxs(yt,{"aria-label":"Page navigation example",children:[t.jsx(q,{disabled:k<=0,onClick:rt,children:"Previous"}),ct(),t.jsx(q,{disabled:ze===!0,onClick:ot,children:"Next"})]})})]})]})};export{ta as default};
