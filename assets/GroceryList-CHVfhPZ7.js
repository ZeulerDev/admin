import{B as P,y as k,r as o,A as h,j as e,h as g}from"./index-BzWpTyRP.js";import{a as f}from"./axios-Cm0UX6qg.js";import{B as C}from"./config-HOLfLxHr.js";import{b as L,a as z}from"./CContainer-BohUAxSl.js";import{C as O}from"./CNavbar-u7Q3iHwm.js";import{C as y,a as T,b as c,c as r,d as b,e as a}from"./CTable-C62CAHLk.js";import{C as H,a as R,b as I,c as V}from"./CModalTitle-BEoCtNfZ.js";import{C as _}from"./CCardImage-DI-tOl1o.js";import{C as $}from"./CModalFooter-COP8gJvv.js";import"./DefaultLayout-Blmcm6y8.js";const Z=()=>{const{id:S}=P(),[{token:n,user:v},i]=k(),[x,D]=o.useState([]),[w,d]=o.useState(!1),[j,A]=o.useState([]);o.useState([]);const[B,p]=o.useState(!1),[u,m]=o.useState(!1);o.useEffect(()=>{const s=setTimeout(()=>{i({type:h,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),d(!1)},2e4);return v&&n&&M(S,s),()=>{clearTimeout(s)}},[]);const M=(s,t)=>{n&&(d(!0),f.get(C+"assistant/list/customer/"+s,{headers:{Authorization:`Bearer ${n}`}}).then(l=>{l.status===200?(D(l.data),d(!1),clearTimeout(t)):l.status===500&&i({type:h,payload:{status:!0,title:"Orders loading error",message:l.data.message}})}).catch(l=>{console.error("Error:",l)}))},E=s=>{n&&(p(!0),f.get(C+"assistant/products/list/"+s,{headers:{Authorization:`Bearer ${n}`}}).then(t=>{t.status===200?(A(t.data.products),p(!1)):t.status===500&&i({type:h,payload:{status:!0,title:"Order product loading error error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)}))},N=s=>{m(!u),E(s)};return e.jsxs(L,{children:[e.jsx(O,{className:"bg-body-tertiary"}),w?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(g,{style:{marginTop:"15%"}})}):e.jsxs(y,{children:[e.jsx(T,{children:e.jsxs(c,{children:[e.jsx(r,{scope:"col",children:"#"}),e.jsx(r,{scope:"col",children:"Name"}),e.jsx(r,{scope:"col",children:"Total"}),e.jsx(r,{scope:"col",children:"Date"}),e.jsx(r,{scope:"col",children:"Saving"}),e.jsx(r,{scope:"col",children:"Address"}),e.jsx(r,{scope:"col",children:"Products"})]})}),e.jsx(b,{children:x.length!==0?x.map((s,t)=>e.jsxs(c,{children:[e.jsx(a,{children:t+1}),e.jsx(a,{scope:"row",children:s.name}),e.jsx(a,{children:s.total}),e.jsx(a,{children:s.date}),e.jsx(a,{children:s.saving}),e.jsx(a,{children:s.address.address}),e.jsx(a,{children:e.jsx(z,{onClick:()=>N(s.id),size:"sm",style:{backgroundColor:"#ff4d4d",color:"white"},children:"View"})})]},t)):e.jsx(c,{children:e.jsx(a,{colSpan:"7",style:{textAlign:"center"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No data"})})})})]}),e.jsxs(H,{visible:u,scrollable:!0,size:"xl",onClose:()=>m(!1),children:[e.jsx(R,{closeButton:!0,children:e.jsx(I,{children:"Customer Order List Information"})}),e.jsx(V,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:B?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(g,{style:{marginTop:"15%"}})}):e.jsxs(y,{children:[e.jsx(T,{children:e.jsxs(c,{children:[e.jsx(r,{scope:"col",children:"#"}),e.jsx(r,{scope:"col",children:"Photo"}),e.jsx(r,{scope:"col",children:"Name"}),e.jsx(r,{scope:"col",children:"Price"}),e.jsx(r,{scope:"col",children:"SubTotal"}),e.jsx(r,{scope:"col",children:"Measurement"}),e.jsx(r,{scope:"col",children:"Saving"}),e.jsx(r,{scope:"col",children:"Quantity"}),e.jsx(r,{scope:"col",children:"Chain"}),e.jsx(r,{scope:"col",children:"Market"})]})}),e.jsx(b,{children:j.length===0?e.jsx(c,{children:e.jsx(a,{colSpan:"10",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):j.map((s,t)=>e.jsxs(c,{children:[e.jsx(a,{children:t+1}),e.jsx(a,{scope:"row",children:e.jsx(_,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(a,{children:s.name}),e.jsx(a,{children:s.price}),e.jsx(a,{children:s.subTotal}),e.jsx(a,{children:s.measurement}),e.jsx(a,{children:s.saving}),e.jsx(a,{children:s.quantity}),e.jsx(a,{children:s.chain}),e.jsx(a,{children:s.market})]},t))})]})}),e.jsx($,{})]})]})};export{Z as default};
