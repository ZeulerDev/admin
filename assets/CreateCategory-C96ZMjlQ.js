import{y as ot,r as a,A as i,j as e,h as q,m as I,L as nt}from"./index-BzWpTyRP.js";import{a as C}from"./axios-Cm0UX6qg.js";import{B as f}from"./config-HOLfLxHr.js";import{b as ct,a as x}from"./CContainer-BohUAxSl.js";import{C as ye,a as G,b as J,d as K,e as j,c as me}from"./DefaultLayout-Blmcm6y8.js";import{C as it}from"./CNavbar-u7Q3iHwm.js";import{C as O,a as Q,b as h,c as o,d as X,e as l}from"./CTable-C62CAHLk.js";import{C as Se,a as be,b as ke,c as Me}from"./CModalTitle-BEoCtNfZ.js";import{C as dt}from"./CRow-Du3Ku4yF.js";import{C as Pe}from"./CCol-DZj90Uni.js";import{C as Ae}from"./CFormCheck-CmIgHPF-.js";import{C as De}from"./CModalFooter-COP8gJvv.js";import{C as ht}from"./CCardImage-DI-tOl1o.js";import{C as gt,a as Y}from"./CPaginationItem-CQqCx2lq.js";import"./CFormLabel-BSwA839n.js";var we=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M345.994,42.019,179.531,208.481A646.3,646.3,0,0,0,25.325,456.521a24.845,24.845,0,0,0,6,25.708l.087.087a24.84,24.84,0,0,0,17.611,7.342,25.172,25.172,0,0,0,8.1-1.344,646.283,646.283,0,0,0,248.04-154.207L471.62,167.646A88.831,88.831,0,0,0,345.994,42.019ZM282.531,311.48A614.445,614.445,0,0,1,60.419,453.221,614.435,614.435,0,0,1,202.158,231.108l99.162-99.161,80.372,80.372ZM448.993,145.019l-44.674,44.673L323.947,109.32l44.674-44.674a56.832,56.832,0,1,1,80.372,80.373Z' class='ci-primary'/>"];const Et=()=>{const[{user:y,token:n},c]=ot(),[Ne,d]=a.useState(!1),[ze,m]=a.useState(!1),[Le,ee]=a.useState(!1),[te,ut]=a.useState(0),[Ct,se]=a.useState(!0),[ve,ae]=a.useState(!0),[Ie,Be]=a.useState([]),[Ee,B]=a.useState("All Chains"),[E,k]=a.useState("All market"),[ft,T]=a.useState(""),[re,M]=a.useState(""),[Te,$]=a.useState([]);a.useState(""),a.useState(!1),a.useState(""),a.useState(""),a.useState(""),a.useState("NAME"),a.useState(!1),a.useState("");const[U,le]=a.useState([]),[R,oe]=a.useState("Selected Market ");let[P,ne]=a.useState([]),[ce,$e]=a.useState([]);const[Ue,F]=a.useState(!1),[pt,V]=a.useState("All Main Categories"),[xt,H]=a.useState(""),[Re,Fe]=a.useState([]),[Ve,S]=a.useState(""),[jt,ie]=a.useState("Select Main Categories"),[He,A]=a.useState(""),[Ze,de]=a.useState([]),[g,D]=a.useState({mainCategory:"",subCategory:"",category:""}),[Z,yt]=a.useState([]),[he,ge]=a.useState([]),[_e,ue]=a.useState(0),[w,N]=a.useState(1),[_,We]=a.useState(),[qe,Ce]=a.useState(!1),[Ge,p]=a.useState(!1),[z,L]=a.useState(0);a.useEffect(()=>{y&&n&&(re===""?(ee(!0),Je(),console.log("ok")):(ee(!1),console.log("no")),console.log("all"))},[y,n,re]),a.useEffect(()=>{n&&C.get(f+"assistant/market/chains/all",{headers:{Authorization:`Bearer ${n}`}}).then(t=>{t.status===200?Be(t.data):t.status===500&&c({type:i,payload:{status:!0,title:"Chain Loading error",message:t.data.message}})}).catch(t=>{console.error("Error: ",t)})},[]),a.useEffect(()=>{n&&C.get(f+"product/categories",{headers:{Authorization:`Bearer ${n}`}}).then(t=>{t.status===200?(console.log(t.data[1]),Fe(t.data)):t.status===500&&c({type:i,payload:{status:!0,title:"Main Category Loading error",message:"Main Category loading error"}})}).catch(t=>{console.error("Error: ",t)})},[]);const Je=()=>{y&&n&&(m(!0),C.get(f+"product/category/check/all",{headers:{Authorization:`Bearer ${n}`}}).then(t=>{t.status===200?($e(t.data),m(!1),console.log(t.data.length)):t.status===204?(m(!1),c({type:i,payload:{status:!0,title:"Unregistered Categories error",message:t.data.message,color:"danger"}}),d(!1)):t.status===500&&(m(!1),c({type:i,payload:{status:!0,title:"Unregistered Categories error",message:t.data.message,color:"danger"}}),d(!1))}).catch(t=>{m(!1),console.error("Error:",t),d(!1)}))},Ke=t=>{C.get(f+`assistant/market/locations?brand=${t}`,{headers:{Authorization:`Bearer ${n}`}}).then(s=>{s.status===200?($(s.data.data),s.data.data.length<20?(se(!0),console.log("ok")):s.data.data.length>19&&se(!1)):s.status===500&&c({type:i,payload:{status:!0,title:"Market Loading error",message:s.data.message}})}).catch(s=>{console.error("Error: ",s)})},fe=(t,s)=>{t==="all"?(T(""),B("All Chains"),M(""),k("All Markets"),$([])):(T(t),Ke(t),B(s),M(""),k("All Markets"))},W=(t,s)=>{t==="all"?(M(""),k("All Markets"),T(""),B("All Chains"),$([])):t==="select"?(le([]),oe("Selected Market ")):(M(t),k(s),le([...U,{id:t,name:s}]),oe(s))};a.useState(null),a.useState(null);const Oe=t=>{if(t.length>0){let s=t.map(r=>r.id);console.log(s),y&&n&&(d(!0),C.get(f+`product/category/check?markets=${s}`,{headers:{Authorization:`Bearer ${n}`}}).then(r=>{r.status===200?(ne(r.data),d(!1)):r.status===204?(c({type:i,payload:{status:!0,title:"Unregistered Categories error",message:r.data.message,color:"danger"}}),d(!1)):r.status===500&&(c({type:i,payload:{status:!0,title:"Unregistered Categories error",message:r.data.message,color:"danger"}}),d(!1))}).catch(r=>{console.error("Error:",r),d(!1)}))}else c({type:i,payload:{status:!0,title:"Select Market",message:"Please select the market to search",color:"warning"}}),d(!1)},pe=t=>{console.log(t),Z.push(t),D({...g,category:t}),F(!0)},Qe=()=>{g.mainCategory!==""&&g.subCategory!==""?(console.log(g),Xe(),F(!1),D({mainCategory:"",subCategory:"",category:""})):c({type:i,payload:{status:!0,title:"Check the fields",message:"Please select the Main and Sub Category",color:"warning"}})},Xe=()=>{if(g){let t={category:g};y&&n&&C.put(f+"product/add/category",t,{headers:{Authorization:`Bearer ${n}`}}).then(s=>{if(s.status===200){c({type:i,payload:{status:!0,title:"Category Update",message:"Category update Success",color:"success"}}),console.log(P.length),console.log(Z);const r=P.filter(b=>!Z.some(je=>je.name===b.name));console.log(r.length),S(""),A(""),ne([...r])}else s.status===204?c({type:i,payload:{status:!0,title:"Category Update",message:"No category found",color:"danger"}}):s.status===500&&c({type:i,payload:{status:!0,title:"Category Update",message:"Category update error",color:"danger"}})}).catch(s=>{console.error("Error:",s)})}else c({type:i,payload:{status:!0,title:"Category Update",message:"Please Check the Fields!",color:"warning"}})},Ye=(t,s)=>{t==="all"?(H(""),V("All Main Categories"),S("")):(H(t),et(t),V(s),S(t),D({...g,mainCategory:t}))},et=t=>{n&&C.get(f+"product/categories/sub/"+t,{headers:{Authorization:`Bearer ${n}`}}).then(s=>{s.status===200?de(s.data):s.status===500&&c({type:i,payload:{status:!0,title:"Sub Category Loading",message:"Sub Category loading error"}})}).catch(s=>{console.error("Error: ",s)})},tt=(t,s)=>{t==="all"?(A(""),ie("Select Main Categories"),H(""),V("All Main Categories"),de([]),S("")):(console.log("index",t),A(t),ie(s),D({...g,subCategory:t}))},xe=t=>{console.log(t),We(t.id),Ce(!0),v(0,t.id)},v=(t,s)=>{p(!0),C.get(f+`product/unregistered/category/${t}?id=${s}`,{headers:{Authorization:`Bearer ${n}`}}).then(r=>{r.status===200?(ge(r.data.list),ue(r.data.count),p(!1),r.data.list.length<50?(ae(!0),console.log("ok")):r.data.list.length>50&&ae(!1)):r.status===203?(p(!1),c({type:i,payload:{status:!0,title:"product loading error error",message:r.data.message}})):r.status===204?p(!1):r.status===500&&(p(!1),c({type:i,payload:{status:!0,title:"product loading error error",message:r.data.message}}))}).catch(r=>{p(!1),console.error("Error:",r)})},st=()=>{N(w+1);const t=z+50;L(t),v(t,_)},at=()=>{N(w-1);const t=z-50;console.log(t),L(t),v(t,_)},rt=t=>{N(t);const s=(t-1)*50;L(s),v(s,_)},lt=()=>{const t=Math.ceil(_e/50),s=[];for(let u=1;u<=t;u++)s.push(u);const r=Math.max(w-2,1),b=Math.min(r+4,t);return s.slice(r-1,b).map(u=>e.jsx(Y,{active:w===u,onClick:()=>rt(u),children:u},u))};return e.jsxs(ct,{children:[e.jsx(ye,{style:{marginLeft:"0%"},color:"secondary",children:"Filter by"}),e.jsxs(G,{style:{marginLeft:"2%",width:"19%",backgroundColor:"#ff4d4d"},children:[e.jsx(J,{children:Ee}),e.jsxs(K,{children:[e.jsx(j,{onClick:()=>fe("all"),children:"All"}),Ie.map((t,s)=>e.jsx(j,{onClick:()=>fe(t.id,t.name),children:t.name},s))]})]}),e.jsxs(G,{style:{marginLeft:"1%",width:"19%",backgroundColor:"#ff4d4d"},children:[e.jsx(J,{children:E.length>15?`${E.substring(0,15)}...`:E}),e.jsxs(K,{children:[e.jsx(j,{onClick:()=>W("all"),children:"Select the Chain"}),Te.map((t,s)=>e.jsx(j,{onClick:()=>W(t._id,t.address),children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{children:t.address.substring(0,t.address.length/2)}),e.jsx("span",{children:t.address.substring(t.address.length/2)})]})},s))]})]}),e.jsx(ye,{style:{marginLeft:"4%"},color:"secondary",children:"Selected Markets"}),e.jsxs(G,{style:{marginLeft:"2%",width:"19%",backgroundColor:"#ff4d4d"},children:[e.jsx(J,{children:R.length>15?`${R.substring(0,15)}...`:R}),e.jsxs(K,{children:[e.jsx(j,{onClick:()=>W("select"),children:"Select the Chain"}),U.map((t,s)=>e.jsx(j,{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{children:t.name.substring(0,t.name.length/2)}),e.jsx("span",{children:t.name.substring(t.name.length/2)})]})},s))]})]}),e.jsx(x,{style:{marginLeft:"1%",backgroundColor:"#ff4d4d",color:"white",width:"19%"},onClick:()=>{Oe(U)},children:"Search"}),e.jsx(it,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),Le?ze?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(q,{style:{marginTop:"15%"}})}):e.jsxs(O,{children:[e.jsx(Q,{children:e.jsxs(h,{children:[e.jsx(o,{scope:"col",children:"#"}),e.jsx(o,{scope:"col",children:"Category Name"}),e.jsx(o,{scope:"col",children:"Chain Name"}),e.jsx(o,{scope:"col",children:"Insert"}),e.jsx(o,{scope:"col",children:"Product"})]})}),e.jsx(X,{children:ce.length===0?e.jsx(h,{children:e.jsx(l,{colSpan:"5",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):ce.map((t,s)=>e.jsxs(h,{children:[e.jsx(l,{children:te+s+1}),e.jsx(l,{children:t.name}),e.jsx(l,{}),e.jsx(l,{children:e.jsx(x,{size:"sm",style:{backgroundColor:"#ff4d4d"},variant:"outline",onClick:()=>{pe(t)},children:e.jsx(I,{icon:we,size:"lg",style:{color:"white"}})})}),e.jsx(l,{children:e.jsx(x,{size:"sm",style:{backgroundColor:"#ff4d4d"},variant:"outline",onClick:()=>{xe(t)},children:e.jsx(I,{icon:me,size:"lg",style:{color:"white"}})})})]},s))})]}):Ne?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(q,{style:{marginTop:"15%"}})}):e.jsxs(O,{children:[e.jsx(Q,{children:e.jsxs(h,{children:[e.jsx(o,{scope:"col",children:"#"}),e.jsx(o,{scope:"col",children:"Category Name"}),e.jsx(o,{scope:"col",children:"Chain Name"}),e.jsx(o,{scope:"col",children:"Insert"}),e.jsx(o,{scope:"col",children:"Product"})]})}),e.jsx(X,{children:P.length===0?e.jsx(h,{children:e.jsx(l,{colSpan:"5",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):P.map((t,s)=>e.jsxs(h,{children:[e.jsx(l,{children:te+s+1}),e.jsx(l,{children:t.name}),e.jsx(l,{children:t.chainName.map((r,b)=>e.jsxs("span",{children:[r," / "]},b))}),e.jsx(l,{children:e.jsx(x,{size:"sm",style:{backgroundColor:"#ff4d4d"},variant:"outline",onClick:()=>{pe(t)},children:e.jsx(I,{icon:we,size:"lg",style:{color:"white"}})})}),e.jsx(l,{children:e.jsx(x,{size:"sm",style:{backgroundColor:"#ff4d4d"},variant:"outline",onClick:()=>{xe(t)},children:e.jsx(I,{icon:me,size:"lg",style:{color:"white"}})})})]},s))})]}),e.jsxs(Se,{alignment:"center",visible:Ue,scrollable:!0,size:"lg",onClose:()=>{S(""),A(""),F(!1)},children:[e.jsx(be,{closeButton:!0,children:e.jsx(ke,{children:"Add Category"})}),e.jsx(Me,{children:e.jsxs(dt,{children:[e.jsxs(Pe,{md:6,children:[e.jsx("a",{style:{fontSize:17,fontWeight:"bold"},children:"Select the Main Category"}),e.jsx("br",{}),e.jsx("br",{}),Re.map((t,s)=>e.jsx(Ae,{onChange:()=>Ye(s,t),type:"radio",name:"mainCategoryRadio",id:`flexRadioDefault${s}`,label:t,checked:Ve===s},s))]}),e.jsxs(Pe,{md:6,children:[e.jsx("a",{style:{fontSize:17,fontWeight:"bold"},children:"Select the Sub Category"}),e.jsx("br",{}),e.jsx("br",{}),Ze.map((t,s)=>e.jsx(Ae,{onChange:()=>tt(s,t),checked:He===s,type:"radio",name:"subCategory",id:`flexRadioDefault2-${s}`,label:t},s))]})]})}),e.jsx(De,{children:e.jsx(x,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>{Qe()},children:"Save"})})]}),e.jsxs(Se,{alignment:"center",visible:qe,scrollable:!0,size:"xl",onClose:()=>{Ce(!1),ge([]),ue(0),N(1),L(0)},children:[e.jsx(be,{closeButton:!0,children:e.jsx(ke,{children:"View Products"})}),e.jsx(Me,{children:Ge?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(q,{style:{marginTop:"15%"}})}):e.jsxs(O,{children:[e.jsx(Q,{children:e.jsxs(h,{children:[e.jsx(o,{scope:"col",children:"#"}),e.jsx(o,{scope:"col",children:"Product Id"}),e.jsx(o,{scope:"col",children:"Photo"}),e.jsx(o,{scope:"col",children:"Name"}),e.jsx(o,{scope:"col",children:"Price"}),e.jsx(o,{scope:"col",children:"Brand"}),e.jsx(o,{scope:"col",children:"Chain"}),e.jsx(o,{scope:"col",children:"Market Address"})]})}),e.jsx(X,{children:he.length===0?e.jsx(h,{children:e.jsx(l,{colSpan:"8",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):he.map((t,s)=>e.jsxs(h,{children:[e.jsx(l,{children:z+s+1}),e.jsx(l,{children:t.pid}),e.jsx(o,{onClick:()=>{},children:e.jsx(ht,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+t.image})}),e.jsx(l,{children:t.name}),e.jsxs(l,{children:[t.price,e.jsx(nt,{to:""})]}),e.jsx(l,{children:t.brand}),e.jsx(l,{children:t.chainName}),e.jsx(l,{children:t.marketAddress})]},s))})]})}),e.jsx(De,{children:e.jsxs(gt,{"aria-label":"Page navigation example",children:[e.jsx(Y,{disabled:z<=0,onClick:at,children:"Previous"}),lt(),e.jsx(Y,{disabled:ve===!0,onClick:st,children:"Next"})]})})]})]})};export{Et as default};
