import{r as o,y as Z,A as p,j as e,h as C,m as c,L as I}from"./index-DCIC8fO6.js";import{a as ee}from"./axios-Cm0UX6qg.js";import{B as se}from"./config-HOLfLxHr.js";import{b as ae}from"./CContainer-Dhr2RTMc.js";import{C as te}from"./CNavbar-R1oxGH4k.js";import{C as k,a as N,b as n,c as a,d as M,e as t}from"./CTable-Bvq_3Do7.js";import{c as z}from"./cil-info-CmGCY32x.js";import{e as B}from"./DefaultLayout-C0sUmu94.js";import{C as le,a as F}from"./CPaginationItem-Dt9jjho8.js";import{C as w,a as A,b as R,c as H}from"./CModalTitle-CmK17VBN.js";import{C as oe}from"./CCardImage-l6bmM88m.js";import{C as V}from"./CModalFooter-DFO6hTF8.js";import{C as re}from"./CRow-CIRkZyZo.js";import{C as f}from"./CFormLabel-BFz3Pslt.js";import{C as g}from"./CCol-Wc4ZYHsw.js";import{C as y}from"./CFormInput-S43P1cjW.js";const Le=()=>{const[b,T]=o.useState(!1),[G,v]=o.useState(!1),[{user:L,token:d},x]=Z(),[O,Y]=o.useState([]);o.useState([]);const[_,m]=o.useState(!1),[h,ie]=o.useState(!1);o.useState([]);const[u,q]=o.useState([]),[Q,U]=o.useState([]),[i,S]=o.useState(0),[$,D]=o.useState(!0);o.useEffect(()=>{const s=setTimeout(()=>{x({type:p,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),m(!1)},2e4);return L&&d&&j(0,s),()=>{clearTimeout(s)}},[L,d]);const j=(s,r)=>{m(!0),ee.get(se+"assistant/grocery/list/"+s,{headers:{Authorization:`Bearer ${d}`}}).then(l=>{l.status===200?(Y(l.data),m(!1),clearTimeout(r),l.data.length<50?(D(!0),console.log("ok")):l.data.length>49&&D(!1)):l.status===204?x({type:p,payload:{status:!0,title:"Grocery List loading error",message:l.data.message}}):l.status===500&&x({type:p,payload:{status:!0,title:"Grocery List loading error",message:l.data.message}})}).catch(l=>{console.error("Error:",l)})},J=()=>{console.log(i);const s=i+50;S(s),j(s,!0)},K=()=>{const s=i-50;console.log(s),S(s),j(s,!1)},W=s=>{T(!b),U(s)},X=s=>{v(!h),q(s)};return e.jsxs(ae,{children:[e.jsx(te,{className:"bg-body-tertiary"}),_?e.jsx(C,{}):e.jsxs(k,{children:[e.jsx(N,{children:e.jsxs(n,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Type"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Items"}),e.jsx(a,{scope:"col",children:"Customer"})]})}),e.jsx(M,{children:O.map((s,r)=>e.jsxs(n,{children:[e.jsx(t,{children:i+r+1}),e.jsx(t,{children:s.name?s.name:""}),e.jsx(t,{children:s.data}),e.jsx(t,{children:s.type}),e.jsx(t,{children:s.address}),e.jsx(t,{children:s.items===null?e.jsx(c,{icon:z,size:"xl"}):e.jsx(I,{children:e.jsx(c,{icon:z,size:"xl",onClick:()=>W(s.items)})})}),e.jsx(t,{children:s.customer===null?e.jsx(c,{icon:B,size:"xl"}):e.jsx(I,{children:e.jsx(c,{icon:B,size:"xl",onClick:()=>X(s.customer)})})})]},r))})]}),e.jsxs(le,{"aria-label":"Page navigation example",children:[e.jsx(F,{disabled:i<=0,onClick:K,children:"Previous"}),e.jsx(F,{disabled:$===!0,onClick:J,children:"Next"})]}),e.jsxs(w,{visible:b,scrollable:!0,size:"xl",onClose:()=>T(!1),children:[e.jsx(A,{closeButton:!0,children:e.jsx(R,{children:"Customer Order List Information"})}),e.jsx(H,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:h?e.jsx(C,{}):e.jsxs(k,{children:[e.jsx(N,{children:e.jsxs(n,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Saving"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"})]})}),e.jsx(M,{children:Q.map((s,r)=>{var l,P,E;return e.jsxs(n,{children:[e.jsx(t,{children:r+1}),e.jsx(a,{children:e.jsx(oe,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.price}),e.jsx(t,{children:s.saving?s.saving.toFixed(2):null}),e.jsx(t,{children:s.qty}),e.jsx(t,{children:s.um}),e.jsxs(t,{children:[(P=(l=s.market)==null?void 0:l.chain)==null?void 0:P.name," - ",(E=s.market)==null?void 0:E.address]})]},r)})})]})}),e.jsx(V,{})]}),e.jsxs(w,{visible:G,scrollable:!0,size:"lg",onClose:()=>v(!1),children:[e.jsx(A,{closeButton:!0,children:e.jsx(R,{children:"Customer Information"})}),e.jsx(H,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:h?e.jsx(C,{}):e.jsx("div",{children:e.jsxs(re,{className:"mb-3",children:[e.jsx(f,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(g,{sm:10,children:e.jsx(y,{type:"text",defaultValue:u.name,readOnly:!0,plainText:!0})}),e.jsx(f,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(g,{sm:10,children:e.jsx(y,{type:"text",defaultValue:u.email,readOnly:!0,plainText:!0})}),e.jsx(f,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(g,{sm:10,children:e.jsx(y,{type:"text",defaultValue:u.contact,readOnly:!0,plainText:!0})})]})})}),e.jsx(V,{})]})]})};export{Le as default};
