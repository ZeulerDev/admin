import{y as ie,r as a,A as l,j as e,h as ne,m as ce}from"./index-CWrNKnUn.js";import{a as R}from"./axios-Cm0UX6qg.js";import{B as v}from"./config-HOLfLxHr.js";import{b as ue,a as C}from"./CContainer-rLvsNxDy.js";import{C as de}from"./CNavbar-DgcRwyXb.js";import{C as w}from"./CFormInput-BFhklKIl.js";import{C as ge,a as he,b as B,c as T,d as me,e as D}from"./CTable-BefVuclu.js";import{c as Ce}from"./cil-pencil-m516yCOw.js";import{C as ye,a as E}from"./CPaginationItem-Cuw6EKc4.js";import{C as z,a as $,b as L,c as H}from"./CModalTitle-KQ4EoNH0.js";import{C as _}from"./CModalFooter-Ndk1GWoC.js";import"./CFormLabel-DxUs0q6J.js";import"./DefaultLayout-Dl-jL1Ob.js";const Ae=()=>{const[{user:N,token:n},r]=ie();a.useState(!1),a.useState(!1);const[F,y]=a.useState(0),[p,pe]=a.useState(0),[Q,A]=a.useState(!0);a.useState([]),a.useState("All Chains"),a.useState("All market"),a.useState(""),a.useState(""),a.useState([]);const[g,V]=a.useState("");a.useState([]);const[U,q]=a.useState(0),[h,f]=a.useState(1),[x,fe]=a.useState(),[G,J]=a.useState([]),[K,b]=a.useState(!1),[O,u]=a.useState(!1),[W,S]=a.useState(!1),[m,j]=a.useState(""),[P,M]=a.useState(""),[k,I]=a.useState("");a.useEffect(()=>{const t=setTimeout(()=>{r({type:l,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),b(!1)},2e4);return N&&n&&d(0,t),()=>{clearTimeout(t)}},[N,n,g]);const d=(t,o)=>{console.log("search",g),b(!0),R.get(v+`product/category/main/${t}?name=${g}`,{headers:{Authorization:`Bearer ${n}`}}).then(s=>{s.status===200?(J(s.data.list),q(s.data.count),console.log(s.data.list.length),b(!1),clearTimeout(o),s.data.list.length<50?(A(!0),console.log("ok")):s.data.list.length>49&&A(!1),console.log(s.data.list.length)):s.status===500&&r({type:l,payload:{status:!0,title:"Category loading error",message:s.data.message}})}).catch(s=>{console.error("Error:",s)})},X=()=>{f(h+1);const t=p+50;y(t),d(t,x)},Y=()=>{f(h-1);const t=p-50;console.log(t),y(t),d(t,x)},Z=t=>{f(t);const o=(t-1)*50;y(o),d(o,x)},ee=()=>{const t=Math.ceil(U/50),o=[];for(let i=1;i<=t;i++)o.push(i);const s=Math.max(h-2,1),c=Math.min(s+4,t);return o.slice(s-1,c).map(i=>e.jsx(E,{active:h===i,onClick:()=>Z(i),children:i},i))},te=()=>{u(!0)},ae=t=>{S(!0),I(t)},se=()=>{m?(console.log(m),re(m),u(!1)):r({type:l,payload:{status:!0,title:"Check the fields",message:"Please check the fields",color:"warning"}})},oe=()=>{k?(console.log(P,k),le(P,k),u(!1)):r({type:l,payload:{status:!0,title:"Check the fields",message:"Please check the fields",color:"warning"}})},re=t=>{if(t){const o={name:t};n&&R.post(v+"product/category/main/add",o,{headers:{Authorization:`Bearer ${n}`}}).then(s=>{s.status===200?(r({type:l,payload:{status:!0,title:"Category Registration",message:"Category Registration Success",color:"success"}}),u(!1),j(""),d(0)):s.status===400?r({type:l,payload:{status:!0,title:"Category Registration error",message:"Category Registration error",color:"warning"}}):s.status===500&&r({type:l,payload:{status:!0,title:"Picker Registration error",message:"Picker Registration error 500",color:"warning"}})}).catch(s=>{console.error("Error:",s)})}else r({type:l,payload:{status:!0,title:"Error!",message:"Picker Registration error, Please Check the input fields",color:"warning"}})},le=(t,o)=>{if(t){const s={name:t,categoryId:o};n&&R.post(v+"product/category/sub/add",s,{headers:{Authorization:`Bearer ${n}`}}).then(c=>{c.status===200?(r({type:l,payload:{status:!0,title:"SubCategory Registration",message:"SubCategory Registration Success",color:"success"}}),S(!1),I(""),M("")):c.status===400?r({type:l,payload:{status:!0,title:"SubCategory Registration error",message:"SubCategory Registration error",color:"warning"}}):c.status===500&&r({type:l,payload:{status:!0,title:"SubCategory Registration error",message:"SubCategory Registration error 500",color:"warning"}})}).catch(c=>{console.error("Error:",c)})}else r({type:l,payload:{status:!0,title:"Error!",message:"Category Registration error, Please Check the input fields",color:"warning"}})};return e.jsxs(ue,{children:[e.jsx(C,{onClick:()=>{te()},style:{backgroundColor:"#ff4d4d",width:"17%",color:"white"},children:"Add Main Category"}),e.jsx(de,{style:{marginTop:"1%"},className:"bg-body-tertiary",children:e.jsx(w,{type:"text",placeholder:"Search here",style:{width:450,marginRight:"30%"},value:g,onChange:t=>V(t.target.value)})}),K?e.jsx(ne,{}):e.jsxs(ge,{children:[e.jsx(he,{children:e.jsxs(B,{children:[e.jsx(T,{scope:"col",children:"#"}),e.jsx(T,{scope:"col",children:"Name"}),e.jsx(T,{scope:"col",children:"Add Subcategory"})]})}),e.jsx(me,{children:G.map((t,o)=>e.jsxs(B,{children:[e.jsx(D,{children:F+o+1}),e.jsx(D,{children:t.name}),e.jsx(D,{children:e.jsx(C,{size:"sm",style:{backgroundColor:"#ff4d4d"},variant:"outline",onClick:()=>{ae(t._id)},children:e.jsx(ce,{icon:Ce,size:"lg",style:{color:"white"}})})})]},o))})]}),e.jsxs(ye,{"aria-label":"Page navigation example",children:[e.jsx(E,{disabled:p<=0,onClick:Y,children:"Previous"}),ee(),e.jsx(E,{disabled:Q===!0,onClick:X,children:"Next"})]}),e.jsxs(z,{alignment:"center",visible:O,scrollable:!0,size:"sm",onClose:()=>{u(!1),j("")},children:[e.jsx($,{closeButton:!0,children:e.jsx(L,{children:"Category Registration"})}),e.jsx(H,{children:e.jsx(w,{type:"text",placeholder:"Enter Category Name",value:m,onChange:t=>j(t.target.value)})}),e.jsx(_,{children:e.jsx(C,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>{se()},children:"Save"})})]}),e.jsxs(z,{alignment:"center",visible:W,scrollable:!0,size:"sm",onClose:()=>{S(!1),M("")},children:[e.jsx($,{closeButton:!0,children:e.jsx(L,{children:"Subcategory Registration"})}),e.jsx(H,{children:e.jsx(w,{type:"text",placeholder:"Enter Subcategory Name",value:P,onChange:t=>M(t.target.value)})}),e.jsx(_,{children:e.jsx(C,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>{oe()},children:"Save"})})]})]})};export{Ae as default};
