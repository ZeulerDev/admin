import{r as a,y as H,A as i,j as e,L,h as V,m as f}from"./index-BbIMGn6I.js";import{a as _}from"./axios-Cm0UX6qg.js";import{B as F}from"./config-HOLfLxHr.js";import{b as Y,a as Z}from"./CContainer-DW1l_mtt.js";import{C as $}from"./CNavbar-CaFAFoGR.js";import{C as q,a as G,b as P,c as u,d as J,e as m}from"./CTable-Bo3KO6JA.js";import{c as K}from"./cil-clipboard-CrSEg4F6.js";import{c as S}from"./cil-info-CmGCY32x.js";import{C as O,a as C}from"./CPaginationItem-Cm1VX4Uo.js";import{C as Q,a as W,b as X,c as ee}from"./CModalTitle-BlxPdlJz.js";import{C as se}from"./CModalFooter-Bw9Pc4Sk.js";import"./DefaultLayout-DAj23qfB.js";const he=()=>{const[j,y]=a.useState(!1);a.useState(!1);const[{user:b,token:x},r]=H(),[T,v]=a.useState([]);a.useState([]);const[D,p]=a.useState(!1);a.useState(!1),a.useState([]),a.useState([]);const[te,I]=a.useState([]),[n,g]=a.useState(0),[w,k]=a.useState(!0),[M,R]=a.useState(0),[c,h]=a.useState(1);a.useEffect(()=>{const s=setTimeout(()=>{r({type:i,payload:{status:!0,title:"Data Loading",message:"Data loading error or  Timeout exceeded",color:"warning"}}),p(!1)},2e4);return b&&x&&d(0,s),()=>{clearTimeout(s)}},[b,x]);const d=(s,o)=>{p(!0),_.get(F+"deepLinkUrls/all/"+s,{headers:{Authorization:`Bearer ${x}`}}).then(t=>{t.status===200?(v(t.data.list),R(t.data.count),p(!1),clearTimeout(o),t.data.length<50?k(!0):t.data.length>49&&k(!1)):t.status===204?r({type:i,payload:{status:!0,title:"Links loading error",message:t.data.message}}):t.status===500&&r({type:i,payload:{status:!0,title:"links loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t),r({type:i,payload:{status:!0,title:"links loading error",message:res.data.message}})})},B=()=>{h(c+1);const s=n+50;g(s),d(s,!0)},E=()=>{h(c-1);const s=n-50;console.log(s),g(s),d(s,!1)},N=s=>{h(s);const o=(s-1)*50;g(o),d(o,!0)},A=()=>{const s=Math.ceil(M/50),o=[];for(let l=1;l<=s;l++)o.push(l);const t=Math.max(c-2,1),z=Math.min(t+4,s);return o.slice(t-1,z).map(l=>e.jsx(C,{active:c===l,onClick:()=>N(l),children:l},l))},U=s=>{y(!j),I(s),console.log("items",s)};return e.jsxs(Y,{children:[e.jsx(L,{to:"/marketing/create/marketing",children:e.jsx(Z,{style:{marginLeft:"0%",width:"17%",backgroundColor:"#ff4d4d",color:"white"},children:"Create URL"})}),e.jsx($,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),D?e.jsx(V,{}):e.jsxs(q,{children:[e.jsx(G,{children:e.jsxs(P,{children:[e.jsx(u,{scope:"col",children:"#"}),e.jsx(u,{scope:"col",children:"Type"}),e.jsx(u,{scope:"col",children:"URL"}),e.jsx(u,{scope:"col",children:"View Details"})]})}),e.jsx(J,{children:T.map((s,o)=>e.jsxs(P,{children:[e.jsx(m,{children:n+o+1}),e.jsx(m,{children:s.type}),e.jsx(m,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:s.url}),e.jsx("div",{children:e.jsx(f,{icon:K,onClick:()=>{navigator.clipboard.writeText(s.url),r({type:i,payload:{status:!0,title:"Copy Success",message:"URL copied to clipboard",color:"success"}})}})})]})}),e.jsx(m,{children:s.items===null?e.jsx(f,{icon:S,size:"xl"}):e.jsx(L,{children:e.jsx(f,{icon:S,size:"xl",onClick:()=>U(s.market)})})})]},o))})]}),e.jsxs(O,{"aria-label":"Page navigation example",children:[e.jsx(C,{disabled:n<=0,onClick:E,children:"Previous"}),A(),e.jsx(C,{disabled:w===!0,onClick:B,children:"Next"})]}),e.jsxs(Q,{visible:j,scrollable:!0,size:"xl",onClose:()=>y(!1),children:[e.jsx(W,{closeButton:!0,children:e.jsx(X,{children:"Link Information"})}),e.jsx(ee,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"}}),e.jsx(se,{})]})]})};export{he as default};
