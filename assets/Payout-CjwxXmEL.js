function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./FlatRateVatRegistrationPDF-C7zTTo9V.js","./index-D3KQsf9W.js","./index-BQTabIt4.css","./react-pdf.browser-BNl-jRbW.js","./inheritsLoose-CkMbdMht.js","./index-C6_K5ivz.js","./_commonjs-dynamic-modules-TDtrdbi3.js","./zeuler-Bzj9BogB.js","./OccasionalEmployeePDF-CxRdL7f6.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{R as w,f as P,r as o,y as K,A as h,j as e,h as X}from"./index-D3KQsf9W.js";import{a as z}from"./axios-Cm0UX6qg.js";import{B}from"./config-HOLfLxHr.js";import{b as Z,a as p}from"./CContainer-DeYOFS1t.js";import{d as L,C as ss,a as es,b as as,c}from"./DefaultLayout-2NlSY9ji.js";import{C as ts}from"./CNavbar-8Vz5wnKh.js";import{C as os}from"./CFormInput-DDDSfwu-.js";import{C as ls,a as ns,b as V,c as l,d as rs,e as n}from"./CTable-B1yrUWiG.js";import{C as F,a as I,b as O,c as H}from"./CModalTitle-CaH6arnE.js";import"./CFormLabel-BuEYAOkN.js";const is=w.lazy(()=>P(()=>import("./FlatRateVatRegistrationPDF-C7zTTo9V.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),cs=w.lazy(()=>P(()=>import("./OccasionalEmployeePDF-CxRdL7f6.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]),import.meta.url)),M=w.lazy(()=>P(()=>import("./react-pdf.browser-BNl-jRbW.js"),__vite__mapDeps([3,4,1,2,5,6]),import.meta.url).then(d=>({default:d.PDFViewer}))),ws=()=>{const[d,b]=o.useState(!1),[N,f]=o.useState(!1),[{user:S,token:y},u]=K(),[$,T]=o.useState(!1),[D,_]=o.useState([]),[x,Y]=o.useState([]),[Q,k]=o.useState("All"),[v,E]=o.useState(""),[j,W]=o.useState(""),[m,g]=o.useState(""),[R,U]=o.useState("");o.useEffect(()=>{console.log("Payout with"),S&&y&&q()},[v,j]);const q=()=>{T(!0),z.get(B+`assistant/pickers/payouts/0?status=${v}&no=${j}`,{headers:{Authorization:`Bearer ${y}`}}).then(s=>{s.status===200?(_(s.data),T(!1)):s.status===204?u({type:h,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}}):s.status===500&&u({type:h,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}})}).catch(s=>{console.log("Error",s)})},G=(s,a)=>{b(!d),Y({type:s,item:a}),console.log("Toggle",s,a)},C=(s,a)=>{f(!d),U(s),console.log("VIew",s,a),a==="waiting"||a==="sent"?g("ready"):a==="ready"&&g("done")},J=()=>{console.log("Confirmation",m,R);const s={status:m};S&&y&&z.patch(B+"assistant/payout/change/"+R,s,{headers:{Authorization:`Bearer ${y}`}}).then(a=>{if(a.status===200){console.log("updated"),f(!1);const t=a.data,r=D.map(A=>A.id===t.id?t:A);_([...r])}else a.status===203?u({type:h,payload:{status:!0,title:"Pricker Payout status error",message:a.data.message}}):a.status===204?(console.log("204"),u({type:h,payload:{status:!0,title:"Pricker Payout status error",message:a.data.message}})):a.status===500&&u({type:h,payload:{status:!0,title:"Pricker Payout status update error",message:a.data.message}})}).catch(a=>{console.error(a)})},i=s=>{s==="all"?(E(""),k("All")):(console.log(s),E(s),k(s))};return e.jsxs(Z,{children:[e.jsx(L,{style:{marginLeft:"75%"},color:"secondary",children:"Filter by"}),e.jsxs(ss,{style:{marginLeft:"2%",width:"17%",backgroundColor:"#ff4d4d"},children:[e.jsx(es,{style:{color:"white"},children:Q}),e.jsxs(as,{children:[e.jsx(c,{onClick:()=>i("all"),children:"All"}),e.jsx(c,{onClick:()=>i("pending"),children:"Pending"}),e.jsx(c,{onClick:()=>i("sent"),children:"Sent"}),e.jsx(c,{onClick:()=>i("ready"),children:"Ready"}),e.jsx(c,{onClick:()=>i("waiting"),children:"Waiting"}),e.jsx(c,{onClick:()=>i("done"),children:"Done"})]})]}),e.jsx(ts,{style:{marginTop:"1%"},className:"bg-body-tertiary",children:e.jsx(os,{type:"text",placeholder:"Search By No",style:{width:450,marginLeft:"0%"},value:j,onChange:s=>W(s.target.value)})}),$?e.jsx(X,{}):e.jsxs(ls,{children:[e.jsx(ns,{children:e.jsxs(V,{children:[e.jsx(l,{scope:"col",children:"No"}),e.jsx(l,{scope:"col",children:"Name"}),e.jsx(l,{scope:"col",children:"Status"}),e.jsx(l,{scope:"col",children:"Date"}),e.jsx(l,{scope:"col",children:"Total"}),e.jsx(l,{scope:"col",children:"Tax"}),e.jsx(l,{scope:"col",children:"Tips"}),e.jsx(l,{scope:"col",children:"Payable"}),e.jsx(l,{scope:"col",children:"Action"}),e.jsx(l,{scope:"col",children:"PDF"})]})}),e.jsx(rs,{children:D.map((s,a)=>{let t="info",r="";return(s==null?void 0:s.status)==="pending"?(r="Pending",t="info"):(s==null?void 0:s.status)==="done"?(r="Paid",t="primary"):(s==null?void 0:s.status)==="sent"?(r="Sent",t="success"):(s==null?void 0:s.status)==="waiting"?(r="Waiting",t="warning"):(s==null?void 0:s.status)==="ready"&&(r="Ready",t="danger"),e.jsxs(V,{children:[e.jsx(n,{children:s.no}),e.jsx(n,{children:s.name}),e.jsx(n,{children:e.jsx(L,{style:{width:60},color:t,children:r})}),e.jsx(n,{children:s.date}),e.jsx(n,{children:s.total}),e.jsx(n,{children:s.tax}),e.jsx(n,{children:s.tips}),e.jsx(n,{children:s.payable}),e.jsxs(n,{children:[(s==null?void 0:s.status)==="waiting"&&e.jsx(p,{onClick:()=>C(s.id,s.status),size:"sm",color:t,style:{width:90},children:"Received"}),(s==null?void 0:s.status)==="sent"&&e.jsx(p,{size:"sm",onClick:()=>C(s.id,s.status),color:t,style:{width:90},children:"Received"}),(s==null?void 0:s.status)==="ready"&&e.jsx(p,{size:"sm",onClick:()=>C(s.id,s.status),color:t,style:{width:90},children:"To Pay"})]}),e.jsxs(n,{children:[e.jsx(p,{size:"sm",style:{backgroundColor:"#ff4d4d",width:80,color:"white"},onClick:()=>G(s.type,s),children:"View"})," "]})]},a)})})]}),e.jsxs(F,{visible:d,scrollable:!0,size:"xl",onClose:()=>b(!1),children:[e.jsx(I,{closeButton:!0,children:e.jsx(O,{children:"Information"})}),e.jsx(H,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading PDF Viewer..."}),children:x.type==="flat_rate"?e.jsx(M,{style:{width:"100%",height:"100vh"},children:e.jsx(is,{data:x.item})}):x.type==="occasional"?e.jsx(M,{style:{width:"100%",height:"100vh"},children:e.jsx(cs,{data:x.item})}):null})})]}),e.jsxs(F,{transition:!1,alignment:"center",visible:N,scrollable:!0,size:"lg",onClose:()=>f(!1),children:[e.jsx(I,{closeButton:!0,children:e.jsx(O,{children:"Confirmation"})}),e.jsxs(H,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:[e.jsx("a",{children:"Are you sure you want to pay out status ?"}),e.jsx(p,{onClick:()=>J(),style:{display:"flex",justifyContent:"center"},color:"primary",children:"Yes"})]})]})]})};export{ws as default};
