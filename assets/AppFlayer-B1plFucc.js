import{r,x as Ve,z as c,j as e,L as T,h as he,m as j}from"./index-DaboRuf6.js";import{a as L}from"./axios-B4uVmeYG.js";import{B as v}from"./config-HOLfLxHr.js";import{b as _e,a as F}from"./CContainer-2x7Z1Exw.js";import{C as ue}from"./CNavbar-C5whDHHf.js";import{C as p,a as g,b as o,c as t,d as m,e as l}from"./CTable-HWQYIuPu.js";import{c as je}from"./cil-clipboard-CrSEg4F6.js";import{c as Ye}from"./cil-plus-D8mtC-W5.js";import{C as qe,a as E}from"./CPaginationItem-Cr8xW1LR.js";import{C as R,a as G,b as U,c as $}from"./CModalTitle-Dr1SToxo.js";import{c as H}from"./cil-info-CmGCY32x.js";import{C as Je}from"./CCardImage-DJBTq3mB.js";import{C as V}from"./CModalFooter-C0lTLyiC.js";import{C as Ke,a as Oe,b as Qe,d as We,e as w}from"./DefaultLayout-C7qb2XTq.js";const js=()=>{var re,oe,ie,ne,ce,de,xe;const[_,Y]=r.useState(!1);r.useState(!1);const[{user:A,token:h},n]=Ve(),[q,pe]=r.useState([]);r.useState([]);const[ge,u]=r.useState(!1),[Xe,b]=r.useState(!1);r.useState(!1),r.useState([]);const[N,me]=r.useState([]),[f,I]=r.useState(0),[fe,J]=r.useState(!0),[Ce,ke]=r.useState(0),[S,B]=r.useState(1),[d,ye]=r.useState([]),[K,be]=r.useState([]),[O,Se]=r.useState([]),[Me,C]=r.useState("All"),[Q,k]=r.useState(""),[De,M]=r.useState(!1),[Pe,Te]=r.useState(!1),[W,Le]=r.useState([]);r.useState(0);const[ve,y]=r.useState(!1),[X,we]=r.useState(""),[Z,ee]=r.useState(!1),[Ae,se]=r.useState(!1),[ae,te]=r.useState([]),[Ne,le]=r.useState("");r.useEffect(()=>{const s=setTimeout(()=>{n({type:c,payload:{status:!0,title:"Data Loading",message:"Data loading error or  Timeout exceeded",color:"warning"}}),u(!1)},2e4);return A&&h&&D(0,s),()=>{clearTimeout(s)}},[A,h]);const D=(s,a)=>{u(!0),L.get(v+`base/link/all/${s}`,{headers:{Authorization:`Bearer ${h}`}}).then(i=>{i.status===200?(pe(i.data.list),ke(i.data.count),u(!1),clearTimeout(a),i.data.length<50?J(!0):i.data.length>49&&J(!1)):i.status===400?u(!1):i.status===500&&(u(!1),n({type:c,payload:{status:!0,title:"links loading error",message:i.data.message}}))}).catch(i=>{console.error("Error:",i),u(!1),n({type:c,payload:{status:!0,title:"links loading error",message:"Data loading error or  Timeout exceeded"}})})},Ie=()=>{B(S+1);const s=f+50;I(s),D(s,!0)},Be=()=>{B(S-1);const s=f-50;console.log(s),I(s),D(s,!1)},ze=s=>{B(s);const a=(s-1)*50;I(a),D(a,!0)},Fe=()=>{const s=Math.ceil(Ce/50),a=[];for(let x=1;x<=s;x++)a.push(x);const i=Math.max(S-2,1),He=Math.min(i+4,s);return a.slice(i-1,He).map(x=>e.jsx(E,{active:S===x,onClick:()=>ze(x),children:x},x))},Ee=s=>{if(Y(!_),M(!1),console.log("items",s),me(s),s.market!==null)console.log("market"),be(s.market);else if(s.marketGroup!==null){console.log("marketGroup"),Se(s.marketGroup);const a=new URLSearchParams(s.url.split("?")[1]);a.has("index")&&(ee(!0),le(a.get("index")),console.log(a.get("index")))}else s.product!==null&&(console.log("product"),Re(s.product._id))},Re=s=>{b(!0),L.get(v+`product/view/${s}`,{headers:{Authorization:`Bearer ${h}`}}).then(a=>{a.status===200?(ye(a.data.list),b(!1)):a.status===204?(b(!1),n({type:c,payload:{status:!0,title:"Product Loading error",message:a.data.message}})):a.status===500&&(b(!1),n({type:c,payload:{status:!0,title:"Product Loading error",message:a.data.message}}))}).catch(a=>{console.error("Error: ",a)})},P=s=>{s==="all"?(C("All"),k("")):s==="Product"?(C(s),k("Product")):s==="Market"?(C(s),k("Market")):s==="Market Group"&&(C(s),k("Market Group"))},Ge=s=>{M(!0),Te(!0),we(s),z(s)};r.useEffect(()=>{Pe&&z(X)},[A,h,Q]);const z=s=>{y(!0),L.get(v+`deepLinkUrls/base/all/${s}?type=${Q}`,{headers:{Authorization:`Bearer ${h}`}}).then(a=>{a.status===200?(Le(a.data.list),y(!1)):a.status===204?y(!1):a.status===500&&(y(!1),n({type:c,payload:{status:!0,title:"links loading error",message:a.data.message}}))}).catch(a=>{console.error("Error:",a),y(!1),n({type:c,payload:{status:!0,title:"links loading error",message:"Data loading error "}})})},Ue=s=>{se(!0),$e(s)},$e=s=>{L.get(v+`assistant/market/${s}`,{headers:{Authorization:`Bearer ${h}`}}).then(a=>{a.status===200?te(a.data):a.status===204?n({type:c,payload:{status:!0,title:"Market Data loading error",message:a.data.message}}):a.status===500&&n({type:c,payload:{status:!0,title:"Market Data loading error",message:a.data.message}})}).catch(a=>{console.error("Error:",a),n({type:c,payload:{status:!0,title:"Market Data loading error",message:"Data loading error "}})})};return e.jsxs(_e,{children:[e.jsx(T,{to:"/marketing/app/flayer/create",children:e.jsx(F,{style:{marginLeft:"0%",width:"17%",backgroundColor:"#ff4d4d",color:"white"},children:"Create URL"})}),e.jsx(ue,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),ge?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(he,{style:{marginTop:"15%"}})}):e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"URL"}),e.jsx(t,{scope:"col",children:"Add Campaign"}),e.jsx(t,{scope:"col",children:"View Campaign"})]})}),e.jsx(m,{children:q.length===0?e.jsx(o,{children:e.jsx(l,{colSpan:"5",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):q.map((s,a)=>e.jsxs(o,{children:[e.jsx(l,{children:f+a+1}),e.jsx(l,{children:s.name}),e.jsx(l,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:s.url}),e.jsx("div",{children:e.jsx(j,{icon:je,onClick:()=>{navigator.clipboard.writeText(s.url),n({type:c,payload:{status:!0,title:"Copy Success",message:"URL copied to clipboard",color:"success"}})}})})]})}),e.jsx(l,{children:e.jsx(T,{to:`/marketing/create/marketing/${s.id}`,children:e.jsx(F,{onClick:()=>{},size:"sm",style:{backgroundColor:"#ff4d4d",color:"white"},variant:"outline",children:e.jsx(j,{icon:Ye,size:"lg",style:{color:"white"}})})})}),e.jsx(l,{children:e.jsx(F,{onClick:()=>{Ge(s.id)},size:"sm",style:{backgroundColor:"#ff4d4d",color:"white"},variant:"outline",children:"View"})})]},a))})]}),e.jsxs(qe,{"aria-label":"Page navigation example",children:[e.jsx(E,{disabled:f<=0,onClick:Be,children:"Previous"}),Fe(),e.jsx(E,{disabled:fe===!0,onClick:Ie,children:"Next"})]}),e.jsxs(R,{visible:_,scrollable:!0,size:"xl",onClose:()=>{z(X),M(!0),Y(!1),ee(!1),le(""),te([])},children:[e.jsx(G,{closeButton:!0,children:e.jsx(U,{children:"Link Information"})}),e.jsx($,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:N.market!==null?e.jsx(e.Fragment,{children:e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Chain Name"}),e.jsx(t,{scope:"col",children:"Address"})]})}),e.jsx(m,{children:e.jsxs(o,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:(re=K.chain)==null?void 0:re.name}),e.jsx(l,{children:K.address})]})})]})}):N.marketGroup!==null?e.jsx(e.Fragment,{children:e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"City"}),Z?e.jsx(t,{scope:"col",children:"Market"}):e.jsx(e.Fragment,{})]})}),e.jsx(m,{children:e.jsxs(o,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:O.name}),e.jsx(l,{children:O.city}),Z?e.jsxs(l,{children:[" ",e.jsxs(T,{children:[" ",e.jsx(j,{icon:H,size:"xl",onClick:()=>{Ue(Ne)}})," "]})]}):e.jsx(e.Fragment,{})]})})]})}):N.product!==null?e.jsx(e.Fragment,{children:e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Product Id"}),e.jsx(t,{scope:"col",children:"Photo"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"Base Price"}),e.jsx(t,{scope:"col",children:"Tax"}),e.jsx(t,{scope:"col",children:"Markup Percentage "}),e.jsx(t,{scope:"col",children:"Markup"}),e.jsx(t,{scope:"col",children:"Total"}),e.jsx(t,{scope:"col",children:"Brand"}),e.jsx(t,{scope:"col",children:"Chain"}),e.jsx(t,{scope:"col",children:"Market Address"})]})}),e.jsx(m,{children:e.jsxs(o,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:d.pid}),e.jsx(t,{children:e.jsx(Je,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+d.image})}),e.jsx(l,{children:d.name}),e.jsx(l,{children:(((oe=d.price)==null?void 0:oe.basePrice)??0).toFixed(2)}),e.jsx(l,{children:(((ie=d.price)==null?void 0:ie.tax)??0).toFixed(2)}),e.jsxs(l,{children:[(ne=d.price)==null?void 0:ne.percentage,"%"]}),e.jsx(l,{children:(((ce=d.price)==null?void 0:ce.markup)??0).toFixed(2)}),e.jsx(l,{children:(((de=d.price)==null?void 0:de.total)??0).toFixed(2)}),e.jsx(l,{children:d.brand}),e.jsx(l,{children:d.chainName}),e.jsx(l,{children:d.marketAddress})]})})]})}):e.jsx(e.Fragment,{})}),e.jsx(V,{})]}),e.jsxs(R,{visible:De,scrollable:!0,size:"xl",onClose:()=>{M(!1),C("All"),k("")},children:[e.jsx(G,{closeButton:!0,children:e.jsx(U,{children:"Campaign Information"})}),e.jsxs($,{children:[e.jsx(Ke,{style:{marginLeft:"74%"},color:"secondary",children:"Filter by"}),e.jsxs(Oe,{style:{marginLeft:"2%",width:"17%",backgroundColor:"#ff4d4d"},children:[e.jsx(Qe,{style:{color:"white"},children:Me}),e.jsxs(We,{children:[e.jsx(w,{onClick:()=>{P("all")},children:"All"}),e.jsx(w,{onClick:()=>{P("Product")},children:"Product"}),e.jsx(w,{onClick:()=>{P("Market")},children:"Market"}),e.jsx(w,{onClick:()=>{P("Market Group")},children:"Market Group"})]})]}),e.jsx(ue,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),ve?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(he,{style:{marginTop:"5%"}})}):e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Type"}),e.jsx(t,{scope:"col",children:"URL"}),e.jsx(t,{scope:"col",children:"View Details"})]})}),e.jsx(m,{children:W.length===0?e.jsx(o,{children:e.jsx(l,{colSpan:"4",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):W.map((s,a)=>e.jsxs(o,{children:[e.jsx(l,{children:f+a+1}),e.jsx(l,{children:s.type}),e.jsx(l,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:s.url}),e.jsx("div",{children:e.jsx(j,{icon:je,onClick:()=>{navigator.clipboard.writeText(s.url),n({type:c,payload:{status:!0,title:"Copy Success",message:"URL copied to clipboard",color:"success"}})}})})]})}),e.jsx(l,{children:s.items===null?e.jsx(j,{icon:H,size:"xl"}):e.jsx(T,{children:e.jsx(j,{icon:H,size:"xl",onClick:()=>Ee(s)})})})]},a))})]})]}),e.jsx(V,{})]}),e.jsxs(R,{visible:Ae,scrollable:!0,size:"xl",onClose:()=>{se(!1)},children:[e.jsx(G,{closeButton:!0,children:e.jsx(U,{children:"Link Market Information"})}),e.jsx($,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Chain Name"}),e.jsx(t,{scope:"col",children:"Address"})]})}),e.jsx(m,{children:e.jsxs(o,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:(xe=ae.chain)==null?void 0:xe.name}),e.jsx(l,{children:ae.address})]})})]})}),e.jsx(V,{})]})]})};export{js as default};
