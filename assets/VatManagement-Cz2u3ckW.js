import{r as t,x as I,z as n,j as e,i as z}from"./index-Dru6cJd9.js";import{a as D}from"./axios-B4uVmeYG.js";import{b as M,a as p}from"./CContainer-kO2Y6oaX.js";import{C as N}from"./CNavbar-DRD4R7UG.js";import{C as T}from"./CFormInput-B0afyM5h.js";import{C as H,a as L,b as E,c as r,d as R,e as o}from"./CTable-DhhKy43I.js";import{e as i}from"./DefaultLayout-vUwkg6tp.js";import{C as F,a as P,b as Q,c as Y}from"./CModalTitle-DqTBV8Od.js";import{C as $}from"./CModalFooter-CrSS0NQ5.js";import"./CFormLabel-Bk9i1EOs.js";const ee=()=>{const[g,c]=t.useState(!1),[{user:C,token:d},l]=I(),[x,f]=t.useState([]),[S,m]=t.useState(!1),[k,w]=t.useState(""),[v,y]=t.useState(""),[j,V]=t.useState("");t.useEffect(()=>{C&&d&&(m(!0),D.get("http://15.160.211.157/assistant/vat/riders/00?search="+j,{headers:{Authorization:`Bearer ${d}`}}).then(s=>{s.status===200?(f(s.data),m(!1),console.log("done")):s.status===204?l({type:n,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}}):s.status===500&&l({type:n,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}})}).catch(s=>{console.error("Error:",s)}))},[j]);const b=(s,a=null)=>{c(!g),w(s),a!==null?y(a):console.log("VAT DID not provided"),console.log(s)},A=()=>{const s={vat:v};C&&d&&D.patch("http://15.160.211.157/assistant/rider/vat/"+k,s,{headers:{Authorization:`Bearer ${d}`}}).then(a=>{if(a.status===200){console.log("updated"),c(!1);const h=a.data,u=x.find(B=>B.id===h.id);u&&(u.vat=h.vat),f([...x])}else a.status===203?(console.log("203"),l({type:n,payload:{status:!0,title:"Picker Disabled status error",message:a.data.message}})):a.status===204?(console.log("204"),l({type:n,payload:{status:!0,title:"Picker Disabled status error",message:a.data.message}})):a.status===500&&l({type:n,payload:{status:!0,title:"Picker Disabled status update error",message:a.data.message}})}).catch(a=>{console.error(a)})};return e.jsxs(M,{children:[e.jsx(N,{className:"bg-body-tertiary",children:e.jsx(T,{type:"text",placeholder:"Search",style:{width:450,marginLeft:"2%"},value:j,onChange:s=>V(s.target.value)})}),S?e.jsx(z,{}):e.jsxs(H,{children:[e.jsx(L,{children:e.jsxs(E,{children:[e.jsx(r,{scope:"col",children:"Name"}),e.jsx(r,{scope:"col",children:"City"}),e.jsx(r,{scope:"col",children:"Vat"}),e.jsx(r,{scope:"col",children:"Activate"}),e.jsx(r,{scope:"col",children:"Disabled"}),e.jsx(r,{scope:"col",children:"Groups"}),e.jsx(r,{scope:"col"})]})}),e.jsx(R,{children:x.map((s,a)=>e.jsxs(E,{children:[e.jsx(o,{children:s.name}),e.jsx(o,{children:s.city}),e.jsx(o,{children:s.vat?s.vat:e.jsx(i,{color:"warning",children:"Null"})}),e.jsx(o,{children:s.activate?e.jsx(i,{color:"success",children:"Yes"}):e.jsx(i,{color:"warning",children:"No"})}),e.jsx(o,{children:s.disabled?e.jsx(i,{color:"success",children:"No"}):e.jsx(i,{color:"warning",children:"Yes"})}),e.jsx(o,{children:s.groups.map((h,u)=>e.jsx("div",{children:h.name},u))}),e.jsx(o,{children:s.vat===""?e.jsx(p,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70},onClick:()=>b(s.id,s.vat),children:"Insert "}):e.jsx(p,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70},onClick:()=>b(s.id,s.vat),children:"Edit "})})]},a))})]}),e.jsxs(F,{alignment:"center",visible:g,scrollable:!0,size:"sm",onClose:()=>c(!1),children:[e.jsx(P,{closeButton:!0,children:e.jsx(Q,{children:"Confirmation"})}),e.jsxs(Y,{children:[e.jsx("a",{children:"Enter Driver's VAT id here"}),e.jsx("br",{}),e.jsx(T,{type:"text",placeholder:"Vat id",value:v,onChange:s=>y(s.target.value)})]}),e.jsxs($,{children:[e.jsx(p,{color:"secondary",onClick:()=>c(!1),children:"Close"}),e.jsx(p,{color:"primary",onClick:()=>A(),children:"Save changes"})]})]})]})};export{ee as default};
