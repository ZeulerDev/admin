import{r as t,y as M,A as c,j as e,i as z}from"./index-DeJ6Linw.js";import{a as T}from"./axios-Cm0UX6qg.js";import{B as A}from"./config-HOLfLxHr.js";import{b as D,a as f}from"./CContainer-Nzx2apIi.js";import{C as N}from"./CNavbar-DV7jkD--.js";import{C as V}from"./CFormInput-BmG3XIys.js";import{C as L,a as R,b as E,c as o,d as H,e as r}from"./CTable-c-O0N-WI.js";import{d as i}from"./DefaultLayout-BHJQB6yd.js";import{C as F,a as Q,b as U,c as Y}from"./CModalTitle-BT58mrqm.js";import{C as _}from"./CModalFooter-RCOxavhU.js";import"./CFormLabel-DClTady1.js";const ae=()=>{const[g,p]=t.useState(!1),[{user:m,token:h},l]=M(),[x,C]=t.useState([]),[w,y]=t.useState(!1),[I,S]=t.useState(""),[b,v]=t.useState(""),[j,B]=t.useState("");t.useEffect(()=>{m&&h&&(y(!0),T.get(A+"assistant/vat/shoppers/0?search="+j,{headers:{Authorization:`Bearer ${h}`}}).then(s=>{s.status===200?(C(s.data),y(!1),console.log("done")):s.status===204?l({type:c,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}}):s.status===500&&l({type:c,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}})}).catch(s=>{console.error("Error:",s)}))},[j]);const k=(s,a=null)=>{p(!g),S(s),a!==null?v(a):console.log("VAT PID not provided"),console.log(s)},P=()=>{const s={vat:b};m&&h&&T.patch(A+"assistant/shopper/vat/"+I,s,{headers:{Authorization:`Bearer ${h}`}}).then(a=>{if(a.status===200){console.log("updated"),p(!1);const d=a.data,n=x.find(u=>u.id===d.id);n&&(n.vat=d.vat),C([...x]),l({type:c,payload:{status:!0,title:"Picker VAT Id ",message:"VAT Id updated successfully"}})}else a.status===203?(console.log("203"),l({type:c,payload:{status:!0,title:"Picker VAT Id update error",message:a.data.message}})):a.status===204?(console.log("204"),l({type:c,payload:{status:!0,title:"Picker VAT Id update error",message:a.data.message}})):a.status===500&&l({type:c,payload:{status:!0,title:"Picker VAT Id update error",message:a.data.message}})}).catch(a=>{console.error(a)})};return e.jsxs(D,{children:[e.jsx(N,{className:"bg-body-tertiary",children:e.jsx(V,{type:"text",placeholder:"Search",style:{width:450,marginLeft:"0%"},value:j,onChange:s=>B(s.target.value)})}),w?e.jsx(z,{}):e.jsxs(L,{children:[e.jsx(R,{children:e.jsxs(E,{children:[e.jsx(o,{scope:"col",children:"Name"}),e.jsx(o,{scope:"col",children:"City"}),e.jsx(o,{scope:"col",children:"Vat"}),e.jsx(o,{scope:"col",children:"Activate"}),e.jsx(o,{scope:"col",children:"Disabled"}),e.jsx(o,{scope:"col",children:"market"}),e.jsx(o,{scope:"col"})]})}),e.jsx(H,{children:x.map((s,a)=>{var d,n,u;return e.jsxs(E,{children:[e.jsx(r,{children:s.name}),e.jsx(r,{children:s.city}),e.jsx(r,{children:s.vat?s.vat:e.jsx(i,{color:"warning",children:"Empty"})}),e.jsx(r,{children:s.activate?e.jsx(i,{color:"success",children:"Yes"}):e.jsx(i,{color:"warning",children:"No"})}),e.jsx(r,{children:s.disabled?e.jsx(i,{color:"success",children:"No"}):e.jsx(i,{color:"warning",children:"Yes"})}),e.jsxs(r,{children:[(n=(d=s.market)==null?void 0:d.chain)==null?void 0:n.name," - ",(u=s.market)==null?void 0:u.address]}),e.jsx(r,{children:s.vat===""?e.jsx(f,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70,color:"white"},onClick:()=>k(s.id,s.vat),children:"Insert "}):e.jsx(f,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70,color:"white"},onClick:()=>k(s.id,s.vat),children:"Edit "})})]},a)})})]}),e.jsxs(F,{alignment:"center",visible:g,scrollable:!0,size:"sm",onClose:()=>p(!1),children:[e.jsx(Q,{closeButton:!0,children:e.jsx(U,{children:"Confirmation"})}),e.jsxs(Y,{children:[e.jsx("a",{children:"Enter Picker's VAT id here"}),e.jsx("br",{}),e.jsx(V,{type:"text",placeholder:"Vat id",value:b,onChange:s=>v(s.target.value)})]}),e.jsx(_,{children:e.jsx(f,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>P(),children:"Save changes"})})]})]})};export{ae as default};
