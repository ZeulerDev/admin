import{r as l,x as N,A as E,z as d,j as e,h as g,L as I,m as z}from"./index-Dy30eiM6.js";import{a as F}from"./axios-B4uVmeYG.js";import{B as O}from"./config-HOLfLxHr.js";import{b as R}from"./CContainer-PswvU4of.js";import{C as H}from"./CNavbar-DSEUJjHx.js";import{C,a as y,b as c,c as a,d as b,e as t}from"./CTable-2kSvDEKq.js";import{C as T}from"./DefaultLayout-E8F3KeA2.js";import{c as P}from"./cil-info-CmGCY32x.js";import{C as _,a as q,b as Q,c as U}from"./CModalTitle-CFHTVTiy.js";import{C as V}from"./CCardImage-BhaXftd9.js";import{C as Y}from"./CModalFooter-BrzcW4v0.js";const le=()=>{const[j,m]=l.useState(!1),[{user:p,token:h},i]=N(),[u,k]=l.useState([]),[f,S]=l.useState([]),[M,x]=l.useState(!1),[B,$]=l.useState(!1);l.useState([]),l.useState([]);const{id:D,market:v}=E();l.useEffect(()=>{const s=setTimeout(()=>{i({type:d,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),x(!1)},2e4);return p&&h&&w(D,v,s),()=>{clearTimeout(s)}},[p,h]);const w=(s,o,n)=>{x(!0),F.get(O+"assistant/batch/market/orders/"+s+"/"+o,{headers:{Authorization:`Bearer ${h}`}}).then(r=>{r.status===200?(S(r.data.orders.flatMap(L=>L.items)),k(r.data.orders),x(!1),clearTimeout(n)):r.status===203?i({type:d,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===204?i({type:d,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===500&&i({type:d,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}})}).catch(r=>{console.error("Error:",r)})},A=()=>{m(!j)};return e.jsxs(R,{children:[e.jsx(H,{className:"bg-body-tertiary"}),M?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(g,{style:{marginTop:"15%"}})}):e.jsxs(C,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"No"}),e.jsx(a,{scope:"col",children:"Status"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Delivery Fee"}),e.jsx(a,{scope:"col",children:"Slot"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Total"}),e.jsx(a,{scope:"col",children:"Markup"}),e.jsx(a,{scope:"col",children:"Order Items"})]})}),e.jsx(b,{children:u.length===0?e.jsx(c,{children:e.jsx(t,{colSpan:"10",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):u.map((s,o)=>{var n,r;return e.jsxs(c,{children:[e.jsx(t,{children:o+1}),e.jsx(t,{children:s.order.no}),e.jsx(t,{children:e.jsx(T,{style:{width:80},color:"info",children:s.order.status})}),e.jsx(t,{children:s.order.address}),e.jsx(t,{children:(((n=s.order)==null?void 0:n.deliveryFee)??0).toFixed(2)}),e.jsx(t,{children:s.order.slot}),e.jsx(t,{children:s.order.date}),e.jsx(t,{children:(((r=s.order)==null?void 0:r.total)??0).toFixed(2)}),e.jsx(t,{children:s.order.markup}),e.jsx(t,{children:e.jsx(I,{children:e.jsx(z,{icon:P,size:"xl",onClick:()=>A()})})})]},o)})})]}),e.jsxs(_,{visible:j,scrollable:!0,size:"xl",onClose:()=>m(!1),children:[e.jsx(q,{closeButton:!0,children:e.jsx(Q,{children:"Customer Order List Information"})}),e.jsx(U,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:B?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(g,{style:{marginTop:"15%"}})}):e.jsxs(C,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"}),e.jsx(a,{scope:"col",children:"Status"})]})}),e.jsx(b,{children:f.length===0?e.jsx(c,{children:e.jsx(t,{colSpan:"8",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):f.map((s,o)=>e.jsxs(c,{children:[e.jsx(t,{children:o+1}),e.jsx(t,{children:e.jsx(V,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.price}),e.jsx(t,{children:s.qty}),e.jsx(t,{children:s.measure}),e.jsxs(t,{children:[s.chain," - ",s.market]}),e.jsx(t,{children:e.jsx(T,{style:{width:80},color:"info",children:s.status})})]},o))})]})}),e.jsx(Y,{})]})]})};export{le as default};
