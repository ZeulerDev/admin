function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-CjOYkMSq.js","assets/index-CqxShCkz.js","assets/index-BQTabIt4.css","assets/leaflet-DS4KrRZ4.js","assets/leaflet-D-6_-wuJ.css","assets/FeatureGroup-nMNy9eWH.js","assets/Marker-B1tEZw8H.js","assets/Polygon-Bq6q3ed1.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{R as P,f as T,r,y as N,A as u,j as e,m as z}from"./index-CqxShCkz.js";import{E as B}from"./leaflet.draw-DEjnK1IK.js";import{L as S,M as F,T as G,P as U}from"./leaflet-DS4KrRZ4.js";import{a as k}from"./axios-Cm0UX6qg.js";import{B as b}from"./config-HOLfLxHr.js";import{m as O,a as $,b as V}from"./marker-shadow-ClvVsAuX.js";import{b as H,a as W}from"./CContainer-BmaXnLJf.js";import{C as Z}from"./CNavbar-CKmVlwO9.js";import{C as q,a as J,b as K,c as M}from"./DefaultLayout-umetxDSO.js";import{c as Q}from"./cil-info-CmGCY32x.js";import{F as X}from"./FeatureGroup-nMNy9eWH.js";import{C as Y,a as ee,b as te,c as ae}from"./CModalTitle-7RGV4Fgd.js";import{C as re}from"./CFormInput-C7b0GOpH.js";import{C as oe}from"./CModalFooter-C7beuWX1.js";import"./index-Br0IS9sI.js";import"./CFormLabel-DjiHfxIS.js";const se=P.lazy(()=>T(()=>import("./index-CjOYkMSq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(l=>({default:l.Marker})));delete S.Icon.Default.prototype._getIconUrl;S.Icon.Default.mergeOptions({iconRetinaUrl:O,iconUrl:$,shadowUrl:V});function be(){const l=r.useRef(null),[{user:n,token:s},i]=N(),[c,f]=r.useState("Napoli"),[g,h]=r.useState("Napoli"),[L,w]=r.useState([]),[p,x]=r.useState(""),[E,d]=r.useState(!1),[C,_]=r.useState([]),A=t=>{const a=t.layerType,o=t.layer;console.log(a),console.log("layer",o._latlngs),d(!0),console.log("area",o);const m=o._latlngs.map(D=>D.map(j=>[j.lng,j.lat]));console.log(m);const I=R(m);console.log(I),_(m)};function R(t){return t.map(a=>a.map(o=>({lng:o[0],lat:o[1]})))}const v=()=>{if(d(!1),c&&p&&C){const t={area:C,name:p,city:g};console.log(t),n&&s&&k.post(b+"pickup/area/create",t,{headers:{Authorization:`Bearer ${s}`}}).then(a=>{a.status===200?(i({type:u,payload:{status:!0,title:"Pickup Area Registration",message:"Pick up area registration Success",color:"success"}}),x("")):a.status===500&&i({type:u,payload:{status:!0,title:"Pick up area registration  error",message:a.data.message,color:"danger"}})}).catch(a=>{console.error("Error:",a)})}else alert("Please Check the Fields!")},y=t=>{t==="all"?(f(""),h("Napoli")):(f(t),h(t))};return r.useEffect(()=>{n&&s&&k.get(b+`assistant/markets/groups/locations/pickup/${c}`,{headers:{Authorization:`Bearer ${s}`}}).then(t=>{t.status===200?w(t.data):t.status===500&&i({type:u,payload:{status:!0,title:"Market Group loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)})},[n,c]),e.jsxs(H,{children:[e.jsx(Z,{className:"bg-body-tertiary",children:e.jsxs(q,{style:{marginLeft:"90%",width:"10%",marginRight:"5px",backgroundColor:"#ff4d4d"},children:[e.jsx(J,{children:g}),e.jsxs(K,{children:[e.jsx(M,{onClick:()=>y("Napoli"),children:"Napoli"}),e.jsx(M,{onClick:()=>y("Milano"),children:"Milano"})]})]})}),e.jsxs(F,{dragging:!0,center:[40.85631,14.24641],zoom:13,scrollWheelZoom:!0,style:{height:"500px",width:"100%"},children:[e.jsx(G,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsxs(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:[L.map((t,a)=>e.jsx(se,{position:[t.lat,t.lng],children:e.jsx(U,{children:e.jsxs("div",{children:[e.jsx(z,{icon:Q,size:"lg",style:{marginLeft:"10px"}})," ",e.jsx("span",{children:t.address})]})})},a)),e.jsx(X,{ref:l,children:e.jsx(B,{position:"topright",onCreated:A,draw:{polygon:!0,circle:!0,polyline:!1,marker:!1,circlemarker:!1}})})]})]}),e.jsxs(Y,{alignment:"center",visible:E,scrollable:!0,size:"sm",onClose:()=>d(!1),children:[e.jsx(ee,{closeButton:!0,children:e.jsx(te,{children:"Confirmation"})}),e.jsxs(ae,{children:[e.jsx("a",{children:"Enter name for selected area"}),e.jsx("br",{}),e.jsx(re,{type:"text",value:p,onChange:t=>x(t.target.value)})]}),e.jsx(oe,{children:e.jsx(W,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>v(),children:"Save area"})})]})]})}export{be as default};
