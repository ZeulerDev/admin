import{B as L,y as O,r as t,A as h,j as e,h as m}from"./index-Bsn8dk4K.js";import{a as f}from"./axios-Cm0UX6qg.js";import{B as C}from"./config-CAsDK75y.js";import{b as k,a as z}from"./CContainer-AV4JspaL.js";import{C as N}from"./CNavbar-5ERL6Uil.js";import{C as g,a as y,b as d,c as a,d as b,e as r}from"./CTable-CwbSrcrF.js";import{C as H,a as R,b as I,c as V}from"./CModalTitle-BnZCXL7j.js";import{C as _}from"./CCardImage-QNsgrsKa.js";import{C as $}from"./CModalFooter-ylOqhqYb.js";import"./DefaultLayout-FA2rmZWX.js";const Z=()=>{const{id:T}=L(),[{token:c,user:S},i]=O(),[x,B]=t.useState([]),[D,n]=t.useState(!1),[M,v]=t.useState([]);t.useState([]);const[w,j]=t.useState(!1),[p,u]=t.useState(!1);t.useEffect(()=>{const s=setTimeout(()=>{i({type:h,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),n(!1)},2e4);return S&&c&&E(T,s),()=>{clearTimeout(s)}},[]);const E=(s,o)=>{c&&(n(!0),f.get(C+"assistant/list/customer/"+s,{headers:{Authorization:`Bearer ${c}`}}).then(l=>{l.status===200?(B(l.data),n(!1),clearTimeout(o)):l.status===500&&i({type:h,payload:{status:!0,title:"Orders loading error",message:l.data.message}})}).catch(l=>{console.error("Error:",l)}))},A=s=>{c&&(j(!0),f.get(C+"assistant/products/list/"+s,{headers:{Authorization:`Bearer ${c}`}}).then(o=>{o.status===200?(v(o.data.products),j(!1)):o.status===500&&i({type:h,payload:{status:!0,title:"Order product loading error error",message:o.data.message}})}).catch(o=>{console.error("Error:",o)}))},P=s=>{u(!p),A(s)};return e.jsxs(k,{children:[e.jsx(N,{className:"bg-body-tertiary"}),D?e.jsx(m,{}):e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs(d,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Total"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Saving"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Products"})]})}),e.jsx(b,{children:x.length===0?e.jsx("h6",{style:{marginTop:"1%"},children:"No data"}):x.map((s,o)=>e.jsxs(d,{children:[e.jsx(r,{children:o+1}),e.jsx(r,{scope:"row",children:s.name}),e.jsx(r,{children:s.total}),e.jsx(r,{children:s.date}),e.jsx(r,{children:s.saving}),e.jsx(r,{children:s.address.address}),e.jsx(r,{children:e.jsx(z,{onClick:()=>P(s.id),size:"sm",style:{backgroundColor:"#ff4d4d",color:"white"},children:"View"})})]},o))})]}),e.jsxs(H,{visible:p,scrollable:!0,size:"xl",onClose:()=>u(!1),children:[e.jsx(R,{closeButton:!0,children:e.jsx(I,{children:"Customer Order List Information"})}),e.jsx(V,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:w?e.jsx(m,{}):e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs(d,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"SubTotal"}),e.jsx(a,{scope:"col",children:"Measurement"}),e.jsx(a,{scope:"col",children:"Saving"}),e.jsx(a,{scope:"col",children:"Quantity"}),e.jsx(a,{scope:"col",children:"Chain"}),e.jsx(a,{scope:"col",children:"Market"})]})}),e.jsx(b,{children:M.map((s,o)=>e.jsxs(d,{children:[e.jsx(r,{children:o+1}),e.jsx(r,{scope:"row",children:e.jsx(_,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(r,{children:s.name}),e.jsx(r,{children:s.price}),e.jsx(r,{children:s.subTotal}),e.jsx(r,{children:s.measurement}),e.jsx(r,{children:s.saving}),e.jsx(r,{children:s.quantity}),e.jsx(r,{children:s.chain}),e.jsx(r,{children:s.market})]},o))})]})}),e.jsx($,{})]})]})};export{Z as default};
