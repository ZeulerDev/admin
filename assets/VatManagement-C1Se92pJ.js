import{r as t,x as I,z as i,j as e,i as z}from"./index-Dru6cJd9.js";import{a as T}from"./axios-B4uVmeYG.js";import{b as M,a as x}from"./CContainer-kO2Y6oaX.js";import{C as N}from"./CNavbar-DRD4R7UG.js";import{C as E}from"./CFormInput-B0afyM5h.js";import{C as P,a as H,b as S,c as o,d as L,e as r}from"./CTable-DhhKy43I.js";import{e as d}from"./DefaultLayout-vUwkg6tp.js";import{C as R,a as F,b as Q,c as Y}from"./CModalTitle-DqTBV8Od.js";import{C as $}from"./CModalFooter-CrSS0NQ5.js";import"./CFormLabel-Bk9i1EOs.js";const ee=()=>{const[C,h]=t.useState(!1),[{user:f,token:u},l]=I(),[j,m]=t.useState([]),[w,y]=t.useState(!1),[V,D]=t.useState(""),[b,v]=t.useState(""),[g,A]=t.useState("");t.useEffect(()=>{f&&u&&(y(!0),T.get("http://15.160.211.157/assistant/vat/shoppers/00?search="+g,{headers:{Authorization:`Bearer ${u}`}}).then(s=>{s.status===200?(m(s.data),y(!1),console.log("done")):s.status===204?l({type:i,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}}):s.status===500&&l({type:i,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}})}).catch(s=>{console.error("Error:",s)}))},[g]);const k=(s,a=null)=>{h(!C),D(s),a!==null?v(a):console.log("VAT PID not provided"),console.log(s)},B=()=>{const s={vat:b};f&&u&&T.patch("http://15.160.211.157/assistant/shopper/vat/"+V,s,{headers:{Authorization:`Bearer ${u}`}}).then(a=>{if(a.status===200){console.log("updated"),h(!1);const c=a.data,n=j.find(p=>p.id===c.id);n&&(n.vat=c.vat),m([...j])}else a.status===203?(console.log("203"),l({type:i,payload:{status:!0,title:"Picker Disabled status error",message:a.data.message}})):a.status===204?(console.log("204"),l({type:i,payload:{status:!0,title:"Picker Disabled status error",message:a.data.message}})):a.status===500&&l({type:i,payload:{status:!0,title:"Picker Disabled status update error",message:a.data.message}})}).catch(a=>{console.error(a)})};return e.jsxs(M,{children:[e.jsx(N,{className:"bg-body-tertiary",children:e.jsx(E,{type:"text",placeholder:"Search",style:{width:450,marginLeft:"2%"},value:g,onChange:s=>A(s.target.value)})}),w?e.jsx(z,{}):e.jsxs(P,{children:[e.jsx(H,{children:e.jsxs(S,{children:[e.jsx(o,{scope:"col",children:"Name"}),e.jsx(o,{scope:"col",children:"City"}),e.jsx(o,{scope:"col",children:"Vat"}),e.jsx(o,{scope:"col",children:"Activate"}),e.jsx(o,{scope:"col",children:"Disabled"}),e.jsx(o,{scope:"col",children:"market"}),e.jsx(o,{scope:"col"})]})}),e.jsx(L,{children:j.map((s,a)=>{var c,n,p;return e.jsxs(S,{children:[e.jsx(r,{children:s.name}),e.jsx(r,{children:s.city}),e.jsx(r,{children:s.vat?s.vat:e.jsx(d,{color:"warning",children:"Null"})}),e.jsx(r,{children:s.activate?e.jsx(d,{color:"success",children:"Yes"}):e.jsx(d,{color:"warning",children:"No"})}),e.jsx(r,{children:s.disabled?e.jsx(d,{color:"success",children:"No"}):e.jsx(d,{color:"warning",children:"Yes"})}),e.jsxs(r,{children:[(n=(c=s.market)==null?void 0:c.chain)==null?void 0:n.name," - ",(p=s.market)==null?void 0:p.address]}),e.jsx(r,{children:s.vat===""?e.jsx(x,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70},onClick:()=>k(s.id,s.vat),children:"Insert "}):e.jsx(x,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70},onClick:()=>k(s.id,s.vat),children:"Edit "})})]},a)})})]}),e.jsxs(R,{alignment:"center",visible:C,scrollable:!0,size:"sm",onClose:()=>h(!1),children:[e.jsx(F,{closeButton:!0,children:e.jsx(Q,{children:"Confirmation"})}),e.jsxs(Y,{children:[e.jsx("a",{children:"Enter Picker's VAT id here"}),e.jsx("br",{}),e.jsx(E,{type:"text",placeholder:"Vat id",value:b,onChange:s=>v(s.target.value)})]}),e.jsxs($,{children:[e.jsx(x,{color:"secondary",onClick:()=>h(!1),children:"Close"}),e.jsx(x,{color:"primary",onClick:()=>B(),children:"Save changes"})]})]})]})};export{ee as default};
