function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-B3_p-sl5.js","./index-CJhmNy2g.js","./index-BQTabIt4.css","./leaflet-BXbVEXfC.js","./leaflet-D-6_-wuJ.css","./FeatureGroup-DN-bcbYo.js","./Popup-DMFaovKC.js","./Polygon-CPsiPnMP.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{R as v,f as w,r as i,y as N,l as $,A as o,j as e,m as L}from"./index-CJhmNy2g.js";import{M as P,T as G}from"./leaflet-BXbVEXfC.js";import{a as p}from"./axios-Cm0UX6qg.js";import{B as u}from"./config-HOLfLxHr.js";import{b as H,a as k}from"./CContainer-DiSFBEfd.js";import{C as I}from"./CNavbar-EvOJOPJz.js";import{C as O,a as V,b as F,c as M}from"./DefaultLayout-CAwAg_Gg.js";import{c as U}from"./cil-info-CmGCY32x.js";import{C as W,a as Y,b as Z,c as q}from"./CModalTitle-DRU8BoUK.js";import{C as J,a as K,b,c as h,d as Q,e as m}from"./CTable-5XNdRfB0.js";import{C as X}from"./CModalFooter-XB2GlyqN.js";const ee=v.lazy(()=>w(()=>import("./index-B3_p-sl5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url).then(n=>({default:n.Marker}))),te=v.lazy(()=>w(()=>import("./index-B3_p-sl5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url).then(n=>({default:n.Popup}))),he=()=>{const[n,c]=i.useState(!1),[{user:d,token:l},r]=N(),[g,x]=i.useState("Napoli"),[_,C]=i.useState("Napoli"),[A,T]=i.useState([]),[E,R]=i.useState([]),[f,S]=i.useState();$();const y=(t,a)=>{c(!n),S(a),p.get(u+`market/groups/fetch/0?city=${t}`,{headers:{Authorization:`Bearer ${l}`}}).then(s=>{s.status===200?R(s.data):s.status===500&&r({type:o,payload:{status:!0,title:"City loading error",message:s.data.message}})}).catch(s=>{console.error("Error:",s)})},j=t=>{t==="all"?(x(""),C("Napoli")):(x(t),C(t))};i.useEffect(()=>{d&&l&&p.get(u+`assistant/markets/groups/locations/delivery/${g}`,{headers:{Authorization:`Bearer ${l}`}}).then(t=>{t.status===200?T(t.data):t.status===500&&r({type:o,payload:{status:!0,title:"Market Group loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)})},[d,g]);const z=(t,a)=>{t&&a&&d&&l&&(console.log("one"),p.put(u+`market/groups/assign/${a}/${t}`,{},{headers:{Authorization:`Bearer ${l}`}}).then(s=>{s.status===200?(c(!1),r({type:o,payload:{status:!0,title:"Market Assign",message:"New Market Assign Successfully",color:"success"}})):s.status===204?r({type:o,payload:{status:!0,title:"Market Assign error",message:s.data.message}}):s.status===500&&r({type:o,payload:{status:!0,title:"Market Assign error",message:s.data.message}})}).catch(s=>{console.error("Error:",s)}))},B=(t,a)=>{t&&a&&d&&l&&p.put(u+`market/groups/remove/${a}/${t}`,{},{headers:{Authorization:`Bearer ${l}`}}).then(s=>{s.status===200?(c(!1),r({type:o,payload:{status:!0,title:"Market Remove",message:"Market removed Successfully",color:"success"}})):s.status===204?r({type:o,payload:{status:!0,title:"Market Remove error",message:s.data.message}}):s.status===500&&r({type:o,payload:{status:!0,title:"Market Remove error",message:s.data.message}})}).catch(s=>{console.error("Error:",s)})};return e.jsxs(H,{children:[e.jsx(I,{className:"bg-body-tertiary",children:e.jsxs(O,{style:{marginLeft:"90%",width:"17%",marginRight:"5px",backgroundColor:"#ff4d4d"},children:[e.jsx(V,{style:{color:"white"},children:_}),e.jsxs(F,{children:[e.jsx(M,{onClick:()=>j("Napoli"),children:"Napoli"}),e.jsx(M,{onClick:()=>j("Milano"),children:"Milano"})]})]})}),e.jsxs(P,{dragging:!0,center:[40.85631,14.24641],zoom:13,scrollWheelZoom:!0,style:{height:"500px",width:"100%"},children:[e.jsx(G,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),A.map((t,a)=>e.jsx(ee,{position:[t.lat,t.lng],onClick:y,children:e.jsx(te,{children:e.jsxs("div",{onClick:()=>y(t.city,t._id),children:[e.jsx(L,{icon:U,size:"lg",style:{marginLeft:"10px"}})," ",e.jsx("span",{children:t.address})]})})},a))]}),e.jsxs(W,{visible:n,scrollable:!0,size:"xl",onClose:()=>c(!1),children:[e.jsx(Y,{closeButton:!0,children:e.jsx(Z,{children:"Map Information"})}),e.jsx(q,{style:{overflowY:"auto",maxHeight:"70vh"},children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsxs(b,{children:[e.jsx(h,{scope:"col",children:"#"}),e.jsx(h,{scope:"col",children:"Name"}),e.jsx(h,{scope:"col",children:"Market"}),e.jsx(h,{scope:"col",children:"Action"})]})}),e.jsx(Q,{children:E.map((t,a)=>e.jsxs(b,{children:[e.jsx(m,{children:a+1}),e.jsx(m,{children:t.name}),e.jsx(m,{children:t.markets.map((s,D)=>e.jsxs("div",{children:[s.chain.name," - ",s.address," "]},D))}),e.jsx(m,{children:t.markets.some(s=>s.id===f)?e.jsx(k,{style:{backgroundColor:"#ff4d4d",width:"90px",color:"white"},onClick:()=>B(f,t._id),children:"Remove"}):e.jsx(k,{style:{backgroundColor:"#ff4d4d",width:"90px",color:"white"},onClick:()=>z(f,t._id),children:"Assign"})})]},a))})]})}),e.jsx(X,{})]})]})};export{he as default};
