import{B as P,x as z,r as t,z as j,j as s,h as p}from"./index-eVF03vmO.js";import{a as u}from"./axios-B4uVmeYG.js";import{B as C}from"./config-HOLfLxHr.js";import{b as A,a as D}from"./CContainer-C1oeA7kP.js";import{C as O}from"./CNavbar-BdfoZl9G.js";import{C as m,a as f,b as c,c as a,d as g,e as r}from"./CTable-vBbhEe3m.js";import{C as k,a as L,b as H,c as N}from"./CModalTitle-aa6PqSjO.js";import{C as R}from"./CCardImage-DR-oTiRK.js";import{C as I}from"./CModalFooter-CnphZc4h.js";import"./DefaultLayout-C3vwYFSh.js";const K=()=>{const{id:b}=P(),[{token:l},d]=z(),[y,T]=t.useState([]),[S,i]=t.useState(!1),[B,M]=t.useState([]);t.useState([]);const[v,n]=t.useState(!1),[h,x]=t.useState(!1);t.useEffect(()=>{l&&(i(!0),u.get(C+"assistant/list/customer/"+b,{headers:{Authorization:`Bearer ${l}`}}).then(e=>{e.status===200?(T(e.data),i(!1)):e.status===500&&d({type:j,payload:{status:!0,title:"Orders loading error",message:e.data.message}})}).catch(e=>{console.error("Error:",e)}))},[]);const E=e=>{l&&(n(!0),u.get(C+"assistant/products/list/"+e,{headers:{Authorization:`Bearer ${l}`}}).then(o=>{o.status===200?(M(o.data.products),n(!1)):o.status===500&&d({type:j,payload:{status:!0,title:"Order product loading error error",message:o.data.message}})}).catch(o=>{console.error("Error:",o)}))},w=e=>{x(!h),E(e)};return s.jsxs(A,{children:[s.jsx(O,{className:"bg-body-tertiary"}),S?s.jsx(p,{}):s.jsxs(m,{children:[s.jsx(f,{children:s.jsxs(c,{children:[s.jsx(a,{scope:"col",children:"#"}),s.jsx(a,{scope:"col",children:"Name"}),s.jsx(a,{scope:"col",children:"Total"}),s.jsx(a,{scope:"col",children:"Date"}),s.jsx(a,{scope:"col",children:"Saving"}),s.jsx(a,{scope:"col",children:"Address"}),s.jsx(a,{scope:"col",children:"Products"})]})}),s.jsx(g,{children:y.map((e,o)=>s.jsxs(c,{children:[s.jsx(r,{children:o+1}),s.jsx(r,{scope:"row",children:e.name}),s.jsx(r,{children:e.total}),s.jsx(r,{children:e.date}),s.jsx(r,{children:e.saving}),s.jsx(r,{children:e.address.address}),s.jsx(r,{children:s.jsx(D,{onClick:()=>w(e.id),size:"sm",style:{backgroundColor:"#ff4d4d",color:"white"},children:"View"})})]},o))})]}),s.jsxs(k,{visible:h,scrollable:!0,size:"xl",onClose:()=>x(!1),children:[s.jsx(L,{closeButton:!0,children:s.jsx(H,{children:"Customer Order List Information"})}),s.jsx(N,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:v?s.jsx(p,{}):s.jsxs(m,{children:[s.jsx(f,{children:s.jsxs(c,{children:[s.jsx(a,{scope:"col",children:"#"}),s.jsx(a,{scope:"col",children:"Photo"}),s.jsx(a,{scope:"col",children:"Name"}),s.jsx(a,{scope:"col",children:"Price"}),s.jsx(a,{scope:"col",children:"SubTotal"}),s.jsx(a,{scope:"col",children:"Measurement"}),s.jsx(a,{scope:"col",children:"Saving"}),s.jsx(a,{scope:"col",children:"Quantity"}),s.jsx(a,{scope:"col",children:"Chain"}),s.jsx(a,{scope:"col",children:"Market"})]})}),s.jsx(g,{children:B.map((e,o)=>s.jsxs(c,{children:[s.jsx(r,{children:o+1}),s.jsx(r,{scope:"row",children:s.jsx(R,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+e.photo})}),s.jsx(r,{children:e.name}),s.jsx(r,{children:e.price}),s.jsx(r,{children:e.subTotal}),s.jsx(r,{children:e.measurement}),s.jsx(r,{children:e.saving}),s.jsx(r,{children:e.quantity}),s.jsx(r,{children:e.chain}),s.jsx(r,{children:e.market})]},o))})]})}),s.jsx(I,{})]})]})};export{K as default};
