import{r as l,y as re,A as P,j as e,h as T,m,L as B}from"./index-Bsn8dk4K.js";import{a as ce}from"./axios-Cm0UX6qg.js";import{B as ie}from"./config-CAsDK75y.js";import{b as ne}from"./CContainer-AV4JspaL.js";import{C as de}from"./CNavbar-5ERL6Uil.js";import{C as D,a as F,b as u,c as a,d as R,e as o}from"./CTable-CwbSrcrF.js";import{c as w}from"./cil-info-CmGCY32x.js";import{c as A}from"./DefaultLayout-FA2rmZWX.js";import{C as xe,a as S}from"./CPaginationItem-TLWytmzh.js";import{C as H,a as V,b as G,c as O}from"./CModalTitle-BnZCXL7j.js";import{C as he}from"./CCardImage-QNsgrsKa.js";import{C as Y}from"./CModalFooter-ylOqhqYb.js";import{C as me}from"./CRow-DDazsrmf.js";import{C as v}from"./CFormLabel-iOJk5yzm.js";import{C as L}from"./CCol-S6pnG2SN.js";import{C as N}from"./CFormInput--iaGGot-.js";const Ee=()=>{const[I,M]=l.useState(!1),[_,k]=l.useState(!1),[{user:E,token:j},p]=re(),[q,Q]=l.useState([]);l.useState([]);const[U,C]=l.useState(!1),[f,ue]=l.useState(!1);l.useState([]);const[c,$]=l.useState([]),[J,K]=l.useState([]),[n,g]=l.useState(0),[W,z]=l.useState(!0),[X,Z]=l.useState(0),[d,y]=l.useState(1);l.useEffect(()=>{const s=setTimeout(()=>{p({type:P,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),C(!1)},2e4);return E&&j&&x(0,s),()=>{clearTimeout(s)}},[E,j]);const x=(s,r)=>{C(!0),ce.get(ie+"assistant/grocery/list/"+s,{headers:{Authorization:`Bearer ${j}`}}).then(t=>{t.status===200?(Q(t.data.list),Z(t.data.count),C(!1),clearTimeout(r),t.data.length<50?(z(!0),console.log("ok")):t.data.length>49&&z(!1)):t.status===204?p({type:P,payload:{status:!0,title:"Grocery List loading error",message:t.data.message}}):t.status===500&&p({type:P,payload:{status:!0,title:"Grocery List loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)})},ee=()=>{y(d+1);const s=n+50;g(s),x(s,!0)},se=()=>{y(d-1);const s=n-50;console.log(s),g(s),x(s,!1)},te=s=>{y(s);const r=(s-1)*50;g(r),x(r,!0)},ae=()=>{const s=Math.ceil(X/50),r=[];for(let i=1;i<=s;i++)r.push(i);const t=Math.max(d-2,1),h=Math.min(t+4,s);return r.slice(t-1,h).map(i=>e.jsx(S,{active:d===i,onClick:()=>te(i),children:i},i))},le=s=>{M(!I),K(s)},oe=s=>{k(!f),$(s)};return e.jsxs(ne,{children:[e.jsx(de,{className:"bg-body-tertiary"}),U?e.jsx(T,{}):e.jsxs(D,{children:[e.jsx(F,{children:e.jsxs(u,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Type"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Items"}),e.jsx(a,{scope:"col",children:"Customer"})]})}),e.jsx(R,{children:q.map((s,r)=>e.jsxs(u,{children:[e.jsx(o,{children:n+r+1}),e.jsx(o,{children:s.name?s.name:""}),e.jsx(o,{children:s.data}),e.jsx(o,{children:s.type}),e.jsx(o,{children:s.address}),e.jsx(o,{children:s.items===null?e.jsx(m,{icon:w,size:"xl"}):e.jsx(B,{children:e.jsx(m,{icon:w,size:"xl",onClick:()=>le(s.items)})})}),e.jsx(o,{children:s.customer===null?e.jsx(m,{icon:A,size:"xl"}):e.jsx(B,{children:e.jsx(m,{icon:A,size:"xl",onClick:()=>oe(s.customer)})})})]},r))})]}),e.jsxs(xe,{"aria-label":"Page navigation example",children:[e.jsx(S,{disabled:n<=0,onClick:se,children:"Previous"}),ae(),e.jsx(S,{disabled:W===!0,onClick:ee,children:"Next"})]}),e.jsxs(H,{visible:I,scrollable:!0,size:"xl",onClose:()=>M(!1),children:[e.jsx(V,{closeButton:!0,children:e.jsx(G,{children:"Customer Order List Information"})}),e.jsx(O,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:f?e.jsx(T,{}):e.jsxs(D,{children:[e.jsx(F,{children:e.jsxs(u,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Saving"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"})]})}),e.jsx(R,{children:J.map((s,r)=>{var t,h,b;return e.jsxs(u,{children:[e.jsx(o,{children:r+1}),e.jsx(a,{children:e.jsx(he,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(o,{children:s.name}),e.jsx(o,{children:s.price}),e.jsx(o,{children:s.saving?s.saving.toFixed(2):null}),e.jsx(o,{children:s.qty}),e.jsx(o,{children:s.um}),e.jsxs(o,{children:[(h=(t=s.market)==null?void 0:t.chain)==null?void 0:h.name," - ",(b=s.market)==null?void 0:b.address]})]},r)})})]})}),e.jsx(Y,{})]}),e.jsxs(H,{visible:_,scrollable:!0,size:"lg",onClose:()=>k(!1),children:[e.jsx(V,{closeButton:!0,children:e.jsx(G,{children:"Customer Information"})}),e.jsx(O,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:f?e.jsx(T,{}):e.jsx("div",{children:e.jsxs(me,{className:"mb-3",children:[e.jsx(v,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(L,{sm:10,children:e.jsx(N,{type:"text",defaultValue:c==null?void 0:c.name,readOnly:!0,plainText:!0})}),e.jsx(v,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(L,{sm:10,children:e.jsx(N,{type:"text",defaultValue:c==null?void 0:c.email,readOnly:!0,plainText:!0})}),e.jsx(v,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(L,{sm:10,children:e.jsx(N,{type:"text",defaultValue:c==null?void 0:c.contact,readOnly:!0,plainText:!0})})]})})}),e.jsx(Y,{})]})]})};export{Ee as default};
