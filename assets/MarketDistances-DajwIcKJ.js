import{B,y as E,r as l,A as o,j as e,h as f}from"./index-CHsjmxnU.js";import{a as m}from"./axios-Cm0UX6qg.js";import{B as g}from"./config-HOLfLxHr.js";import{b as L,a as A}from"./CContainer-Dw7-AxLW.js";import{C as S}from"./CNavbar-DS_VKVWT.js";import{C as D,a as w,b as x,c as n,d as $,e as c}from"./CTable-CpDj-LAf.js";const P=()=>{const{id:d}=B(),[{user:i,token:r},a]=E(),[j,C]=l.useState([]),[y,u]=l.useState(!1),[b,h]=l.useState(!1);l.useEffect(()=>{p(d)},[i]);const p=t=>{t?i&&r&&(u(!0),m.get(g+`market/group/distance/${t}`,{headers:{Authorization:`Bearer ${r}`}}).then(s=>{s.status===200?(C(s.data),u(!1)):s.status===500&&a({type:o,payload:{status:!0,title:"Market group distance loading error",message:s.data.message}})}).catch(s=>{console.error("Error:",s)})):a({type:o,payload:{status:!0,title:"Id Not found",color:"danger"}})},R=t=>{i&&r?(h(!0),m.get(g+`market/group/fetch/routes/${t}`,{headers:{Authorization:`Bearer ${r}`}}).then(s=>{s.status===200?(h(!1),console.log("load data"),a({type:o,payload:{status:!0,title:"Routes fetched",message:"Routes fetched successfully",color:"success"}}),p(t)):s.status===500&&a({type:o,payload:{status:!0,title:"Routes fetching error",message:s.data.message,color:"danger"}})})):a({type:o,payload:{status:!0,title:"User not found",message:"Please login to continue"}})};return e.jsxs(L,{children:[e.jsx(A,{onClick:()=>{R(d)},style:{marginLeft:"82%",width:"17%",backgroundColor:"#ff4d4d",color:"white"},children:b?e.jsx(f,{color:"info",size:"sm"}):e.jsx(e.Fragment,{children:"  Fetch Routes"})}),e.jsx(S,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),y?e.jsx(f,{}):e.jsxs(D,{children:[e.jsx(w,{children:e.jsxs(x,{children:[e.jsx(n,{scope:"col",children:"#"}),e.jsx(n,{scope:"col",children:"Routers"}),e.jsx(n,{scope:"col",children:"Distance"}),e.jsx(n,{scope:"col",children:"Duration"})]})}),e.jsx($,{children:j.map((t,s)=>e.jsxs(x,{children:[e.jsx(c,{children:s+1}),e.jsx(c,{children:t.routeFlow.map((k,T)=>e.jsx("div",{children:k},T))}),e.jsxs(c,{children:[t.distance," m"]}),e.jsxs(c,{children:[t.duration," min"]})]},s))})]})]})};export{P as default};
