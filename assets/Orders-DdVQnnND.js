import{r as o,y as oe,l as ce,A as m,j as e,h as b,L as k,m as w}from"./index-Dr2bAMPU.js";import{a as D}from"./axios-Cm0UX6qg.js";/* empty css               */import{B as T}from"./config-HOLfLxHr.js";import{b as ie}from"./CContainer-u87GNtez.js";import{C as ne}from"./CNavbar-B7PVcNkl.js";import{D as de}from"./index-CIaeHDGO.js";import{C as B,a as I,b as f,c as t,d as V,e as l}from"./CTable-Bfn_R52F.js";import{C as A,c as xe}from"./DefaultLayout-B2Nh7q8u.js";import{c as he}from"./cil-info-CmGCY32x.js";import{C as me,a as z}from"./CPaginationItem-DP1tcg58.js";import{C as R,a as H,b as $,c as Y}from"./CModalTitle-DKRx84Yh.js";import{C as ue}from"./CCardImage-CGnGRqbq.js";import{C as _}from"./CModalFooter-op4IeWM8.js";import{C as q}from"./CRow-GyQAruCl.js";import{C as i}from"./CFormLabel-BwWU-nc5.js";import{C as n}from"./CCol-T9BjQEAn.js";import{C as d}from"./CFormInput-BN0BKVRX.js";import{f as Q}from"./index-PqYCJD3r.js";import"./inheritsLoose-BR9xv5Kf.js";import"./typeof-QjJsDpFa.js";const Ie=()=>{var L,P;const[O,E]=o.useState(!1),[U,S]=o.useState(!1),[{user:u,token:x},h]=oe();ce();const[G,J]=o.useState([]),[c,K]=o.useState([]),[W,g]=o.useState(!1),[y,j]=o.useState(!1),[X,Z]=o.useState([]),[v,N]=o.useState([]),[p,M]=o.useState(0),[ee,F]=o.useState(!0);o.useEffect(()=>{const s=setTimeout(()=>{h({type:m,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),g(!1)},2e4);return u&&x&&C(0,s),()=>{clearTimeout(s)}},[u,x,v]);const C=(s,a)=>{g(!0),D.get(T+"assistant/grocery/orders/"+s+"?date="+v,{headers:{Authorization:`Bearer ${x}`}}).then(r=>{r.status===200?(J(r.data),g(!1),clearTimeout(a),r.data.length<50?(F(!0),console.log("ok")):r.data.length>49&&F(!1)):r.status===204?h({type:m,payload:{status:!0,title:"Orders loading error",message:r.data.message}}):r.status===500&&h({type:m,payload:{status:!0,title:"Orders loading error",message:r.data.message}})}).catch(r=>{console.error("Error:",r)})},se=()=>{const s=p+50;M(s),C(s,!0)},ae=()=>{const s=p-50;console.log(s),M(s),C(s,!1)},te=s=>{E(!O),console.log(s),x&&u&&(j(!0),D.get(T+"assistant/grocery/order/details/"+s,{headers:{Authorization:`Bearer ${x}`}}).then(a=>{a.status===200?(Z(a.data),console.log("data",a.data),j(!1)):a.status===500&&h({type:m,payload:{status:!0,title:"Order details view error",message:a.data.message}})}).catch(a=>{console.error("Order details view error:",a)}))},le=s=>{S(!y),console.log(s),x&&u&&(j(!0),D.get(T+"assistant/grocery/customer/"+s,{headers:{Authorization:`Bearer ${x}`}}).then(a=>{a.status===200?(K(a.data),j(!1)):a.status===500&&h({type:m,payload:{status:!0,title:"Order details view error",message:a.data.message}})}).catch(a=>{console.error("Order details view error:",a)}))},re=s=>{if(s){const a=Q(s[0],"yyyy-MM-dd"),r=Q(s[1],"yyyy-MM-dd");N([a,r])}else N([])};return e.jsxs(ie,{children:[e.jsx(ne,{className:"bg-body-tertiary",children:e.jsx(de,{style:{marginLeft:0},format:"yyyy/MM/dd",onChange:re})}),W?e.jsx(b,{}):e.jsxs(B,{children:[e.jsx(I,{children:e.jsxs(f,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"No"}),e.jsx(t,{scope:"col",children:"Customer"}),e.jsx(t,{scope:"col",children:"Status"}),e.jsx(t,{scope:"col",children:"Address"}),e.jsx(t,{scope:"col",children:"Delivery Fee"}),e.jsx(t,{scope:"col",children:"Slot"}),e.jsx(t,{scope:"col",children:"Date"}),e.jsx(t,{scope:"col",children:"Total"}),e.jsx(t,{scope:"col",children:"Markup"}),e.jsx(t,{scope:"col",children:"Order Details"}),e.jsx(t,{scope:"col",children:"Info"})]})}),e.jsx(V,{children:G.map((s,a)=>e.jsxs(f,{children:[e.jsx(l,{children:p+a+1}),e.jsx(l,{children:s.no}),e.jsx(l,{children:s.customer}),e.jsx(l,{children:e.jsx(A,{style:{width:80},color:"info",children:s.status})}),e.jsx(l,{children:s.address}),e.jsx(l,{children:((s==null?void 0:s.deliveryFee)??0).toFixed(2)}),e.jsx(l,{children:s.slot}),e.jsx(l,{children:s.date}),e.jsx(l,{children:((s==null?void 0:s.total)??0).toFixed(2)}),e.jsx(l,{children:s.markup}),e.jsx(l,{children:e.jsx(k,{children:e.jsx(w,{icon:he,size:"xl",onClick:()=>te(s.id)})})}),e.jsx(l,{children:e.jsx(k,{children:e.jsx(w,{icon:xe,size:"xl",onClick:()=>le(s.id)})})})]},a))})]}),e.jsxs(me,{"aria-label":"Page navigation example",children:[e.jsx(z,{disabled:p<=0,onClick:ae,children:"Previous"}),e.jsx(z,{disabled:ee===!0,onClick:se,children:"Next"})]}),e.jsxs(R,{visible:O,scrollable:!0,size:"xl",onClose:()=>E(!1),children:[e.jsx(H,{closeButton:!0,children:e.jsx($,{children:"Customer Order Information"})}),e.jsx(Y,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:y?e.jsx(b,{}):e.jsxs(B,{children:[e.jsx(I,{children:e.jsxs(f,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Photo"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"Price"}),e.jsx(t,{scope:"col",children:"Qty"}),e.jsx(t,{scope:"col",children:"Measure"}),e.jsx(t,{scope:"col",children:"Market"}),e.jsx(t,{scope:"col",children:"Status"})]})}),e.jsx(V,{children:(L=X.items)==null?void 0:L.map((s,a)=>e.jsxs(f,{children:[e.jsx(l,{children:a+1}),e.jsx(l,{children:e.jsx(ue,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(l,{children:s.name}),e.jsx(l,{children:s.price}),e.jsx(l,{children:s.qty}),e.jsx(l,{children:s.measure}),e.jsxs(l,{children:[s.chain," - ",s.market]}),e.jsx(l,{children:e.jsx(A,{style:{width:80},color:"info",children:s.status})})]},a))})]})}),e.jsx(_,{})]}),e.jsxs(R,{visible:U,scrollable:!0,size:"lg",onClose:()=>S(!1),children:[e.jsx(H,{closeButton:!0,children:e.jsx($,{children:"Customer Information"})}),e.jsx(Y,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:y?e.jsx(b,{}):e.jsxs("div",{children:[e.jsxs(q,{className:"mb-3",children:[e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:c.name,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Address"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:(P=c.address)==null?void 0:P.name,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:c.email,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:c.contact,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Language"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:c.language==="en"?"English":c.language,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Country"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:c.country==="en"?"English":c.country,readOnly:!0,plainText:!0})})]}),e.jsxs(q,{className:"mb-3",children:[e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Latitude"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:c.lat,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Longitude"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:c.lng,readOnly:!0,plainText:!0})})]})]})}),e.jsx(_,{})]})]})};export{Ie as default};
