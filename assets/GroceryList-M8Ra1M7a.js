import{r as o,y as re,A as T,j as e,h as v,m as j,L as A}from"./index-D2Q_T69k.js";import{a as ne}from"./axios-Cm0UX6qg.js";import{B as ce}from"./config-CAsDK75y.js";import{b as ie}from"./CContainer-B1RJImIA.js";import{C as de}from"./CNavbar-B0gsUfYk.js";import{C as B,a as F,b as i,c as a,d as R,e as l}from"./CTable-DUaDDRgJ.js";import{c as H}from"./cil-info-CmGCY32x.js";import{c as V}from"./DefaultLayout-mKkUbqwN.js";import{C as xe,a as N}from"./CPaginationItem-CocKQ4po.js";import{C as G,a as O,b as Y,c as _}from"./CModalTitle-BPG5V7aQ.js";import{C as he}from"./CCardImage-DVFFENW9.js";import{C as q}from"./CModalFooter-CLXaxoDC.js";import{C as me}from"./CRow-BbZjzpyk.js";import{C as P}from"./CFormLabel-DVQIl4BV.js";import{C as S}from"./CCol-ChFaIx89.js";import{C as L}from"./CFormInput-Dd1r_NAb.js";const Ee=()=>{const[k,I]=o.useState(!1),[Q,M]=o.useState(!1),[{user:E,token:u},p]=re(),[D,U]=o.useState([]);o.useState([]);const[$,g]=o.useState(!1),[C,je]=o.useState(!1);o.useState([]);const[n,J]=o.useState([]),[w,K]=o.useState([]),[d,f]=o.useState(0),[W,z]=o.useState(!0),[X,Z]=o.useState(0),[x,y]=o.useState(1);o.useEffect(()=>{const s=setTimeout(()=>{p({type:T,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),g(!1)},2e4);return E&&u&&h(0,s),()=>{clearTimeout(s)}},[E,u]);const h=(s,r)=>{g(!0),ne.get(ce+"assistant/grocery/list/"+s,{headers:{Authorization:`Bearer ${u}`}}).then(t=>{t.status===200?(U(t.data.list),Z(t.data.count),g(!1),clearTimeout(r),t.data.length<50?(z(!0),console.log("ok")):t.data.length>49&&z(!1)):t.status===204?p({type:T,payload:{status:!0,title:"Grocery List loading error",message:t.data.message}}):t.status===500&&p({type:T,payload:{status:!0,title:"Grocery List loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)})},ee=()=>{y(x+1);const s=d+50;f(s),h(s,!0)},se=()=>{y(x-1);const s=d-50;console.log(s),f(s),h(s,!1)},te=s=>{y(s);const r=(s-1)*50;f(r),h(r,!0)},ae=()=>{const s=Math.ceil(X/50),r=[];for(let c=1;c<=s;c++)r.push(c);const t=Math.max(x-2,1),m=Math.min(t+4,s);return r.slice(t-1,m).map(c=>e.jsx(N,{active:x===c,onClick:()=>te(c),children:c},c))},le=s=>{I(!k),K(s)},oe=s=>{M(!C),J(s)};return e.jsxs(ie,{children:[e.jsx(de,{className:"bg-body-tertiary"}),$?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(v,{style:{marginTop:"15%"}})}):e.jsxs(B,{children:[e.jsx(F,{children:e.jsxs(i,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Type"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Items"}),e.jsx(a,{scope:"col",children:"Customer"})]})}),e.jsx(R,{children:D.length===0?e.jsx(i,{children:e.jsx(l,{colSpan:"7",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):D.map((s,r)=>e.jsxs(i,{children:[e.jsx(l,{children:d+r+1}),e.jsx(l,{children:s.name?s.name:""}),e.jsx(l,{children:s.data}),e.jsx(l,{children:s.type}),e.jsx(l,{children:s.address}),e.jsx(l,{children:s.items===null?e.jsx(j,{icon:H,size:"xl"}):e.jsx(A,{children:e.jsx(j,{icon:H,size:"xl",onClick:()=>le(s.items)})})}),e.jsx(l,{children:s.customer===null?e.jsx(j,{icon:V,size:"xl"}):e.jsx(A,{children:e.jsx(j,{icon:V,size:"xl",onClick:()=>oe(s.customer)})})})]},r))})]}),e.jsxs(xe,{"aria-label":"Page navigation example",children:[e.jsx(N,{disabled:d<=0,onClick:se,children:"Previous"}),ae(),e.jsx(N,{disabled:W===!0,onClick:ee,children:"Next"})]}),e.jsxs(G,{visible:k,scrollable:!0,size:"xl",onClose:()=>I(!1),children:[e.jsx(O,{closeButton:!0,children:e.jsx(Y,{children:"Customer Order List Information"})}),e.jsx(_,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:C?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(v,{style:{marginTop:"15%"}})}):e.jsxs(B,{children:[e.jsx(F,{children:e.jsxs(i,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Saving"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"})]})}),e.jsx(R,{children:w.length===0?e.jsx(i,{children:e.jsx(l,{colSpan:"8",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):w.map((s,r)=>{var t,m,b;return e.jsxs(i,{children:[e.jsx(l,{children:r+1}),e.jsx(a,{children:e.jsx(he,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(l,{children:s.name}),e.jsx(l,{children:s.price}),e.jsx(l,{children:s.saving?s.saving.toFixed(2):null}),e.jsx(l,{children:s.qty}),e.jsx(l,{children:s.um}),e.jsxs(l,{children:[(m=(t=s.market)==null?void 0:t.chain)==null?void 0:m.name," - ",(b=s.market)==null?void 0:b.address]})]},r)})})]})}),e.jsx(q,{})]}),e.jsxs(G,{visible:Q,scrollable:!0,size:"lg",onClose:()=>M(!1),children:[e.jsx(O,{closeButton:!0,children:e.jsx(Y,{children:"Customer Information"})}),e.jsx(_,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:C?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(v,{style:{marginTop:"15%"}})}):e.jsx("div",{children:e.jsxs(me,{className:"mb-3",children:[e.jsx(P,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(S,{sm:10,children:e.jsx(L,{type:"text",defaultValue:n==null?void 0:n.name,readOnly:!0,plainText:!0})}),e.jsx(P,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(S,{sm:10,children:e.jsx(L,{type:"text",defaultValue:n==null?void 0:n.email,readOnly:!0,plainText:!0})}),e.jsx(P,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(S,{sm:10,children:e.jsx(L,{type:"text",defaultValue:n==null?void 0:n.contact,readOnly:!0,plainText:!0})})]})})}),e.jsx(q,{})]})]})};export{Ee as default};
