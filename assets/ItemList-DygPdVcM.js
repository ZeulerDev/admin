import{B as E,r as o,y as P,l as I,A as x,j as e,h as C,L as z,m as F}from"./index-D2Q_T69k.js";import{a as y}from"./axios-Cm0UX6qg.js";/* empty css               */import{B as b}from"./config-CAsDK75y.js";import{b as R}from"./CContainer-B1RJImIA.js";import{C as H}from"./CNavbar-B0gsUfYk.js";import{C as S,a as T,b as c,c as t,d as D,e as a}from"./CTable-DUaDDRgJ.js";import{C as _}from"./DefaultLayout-mKkUbqwN.js";import{c as $}from"./cil-info-CmGCY32x.js";import{C as q,a as G,b as Q,c as U}from"./CModalTitle-BPG5V7aQ.js";import{C as V}from"./CCardImage-DVFFENW9.js";import{C as Y}from"./CModalFooter-CLXaxoDC.js";const de=()=>{const{id:v}=E(),[p,m]=o.useState(!1);o.useState(!1);const[{user:j,token:i},n]=P();I();const[g,k]=o.useState([]);o.useState([]);const[w,u]=o.useState(!1);o.useState(!1);const[A,d]=o.useState(!1),[h,B]=o.useState([]),[M,J]=o.useState([]),[N,K]=o.useState(0),[W,f]=o.useState(!0);o.useEffect(()=>{const s=setTimeout(()=>{n({type:x,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),u(!1)},2e4);return j&&i&&O(0,s),()=>{clearTimeout(s)}},[j,i,M]);const O=(s,r)=>{u(!0),y.get(b+"assistant/grocery/order/"+s+"?cid="+v,{headers:{Authorization:`Bearer ${i}`}}).then(l=>{l.status===200?(k(l.data),u(!1),clearTimeout(r),l.data.length<50?(f(!0),console.log("ok")):l.data.length>49&&f(!1)):l.status===204?n({type:x,payload:{status:!0,title:"Orders loading error",message:l.data.message}}):l.status===500&&n({type:x,payload:{status:!0,title:"Orders loading error",message:l.data.message}})}).catch(l=>{console.error("Error:",l)})},L=s=>{m(!p),console.log(s),i&&j&&(d(!0),y.get(b+"assistant/grocery/order/product/"+s,{headers:{Authorization:`Bearer ${i}`}}).then(r=>{r.status===200?(console.log(r.data),B(r.data),d(!1)):r.status===500&&(d(!1),n({type:x,payload:{status:!0,title:"Order details view error",message:r.data.message}}))}).catch(r=>{d(!1),console.error("Order details view error:",r)}))};return e.jsxs(R,{children:[e.jsx(H,{className:"bg-body-tertiary"}),w?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(C,{style:{marginTop:"15%"}})}):e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs(c,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"No"}),e.jsx(t,{scope:"col",children:"Customer"}),e.jsx(t,{scope:"col",children:"Status"}),e.jsx(t,{scope:"col",children:"Address"}),e.jsx(t,{scope:"col",children:"Delivery Fee"}),e.jsx(t,{scope:"col",children:"Slot"}),e.jsx(t,{scope:"col",children:"Date"}),e.jsx(t,{scope:"col",children:"Total"}),e.jsx(t,{scope:"col",children:"Markup"}),e.jsx(t,{scope:"col",children:"Order Details"})]})}),e.jsx(D,{children:g.length===0?e.jsx(c,{children:e.jsx(a,{colSpan:"11",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):g.map((s,r)=>e.jsxs(c,{children:[e.jsx(a,{children:N+r+1}),e.jsx(a,{children:s.no}),e.jsx(a,{children:s.customer}),e.jsx(a,{children:e.jsx(_,{style:{width:80},color:"info",children:s.status})}),e.jsx(a,{children:s.address}),e.jsx(a,{children:s.deliveryFee}),e.jsx(a,{children:s.slot}),e.jsx(a,{children:s.date}),e.jsx(a,{children:(s.total??0).toFixed(2)}),e.jsx(a,{children:s.markup}),e.jsx(a,{children:e.jsx(z,{children:e.jsx(F,{icon:$,size:"xl",onClick:()=>L(s.id)})})})]},r))})]}),e.jsxs(q,{visible:p,scrollable:!0,size:"xl",onClose:()=>m(!1),children:[e.jsx(G,{closeButton:!0,children:e.jsx(Q,{children:"Customer Order Information"})}),e.jsx(U,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:A?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(C,{style:{marginTop:"15%"}})}):e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs(c,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Photo"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"Price"}),e.jsx(t,{scope:"col",children:"Qty"}),e.jsx(t,{scope:"col",children:"Market"})]})}),e.jsx(D,{children:h.length===0?e.jsx(c,{children:e.jsx(a,{colSpan:"6",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):h==null?void 0:h.map((s,r)=>e.jsxs(c,{children:[e.jsx(a,{children:r+1}),e.jsx(a,{children:e.jsx(V,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(a,{children:s.name}),e.jsx(a,{children:(s.price??0).toFixed(2)}),e.jsx(a,{children:s.qty}),e.jsxs(a,{children:[s.chain," - ",s.market]})]},r))})]})}),e.jsx(Y,{})]})]})};export{de as default};
