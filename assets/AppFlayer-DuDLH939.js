import{r,y as Ne,A as d,j as e,L as I,h as Z,m as f}from"./index-BzWpTyRP.js";import{a as B}from"./axios-Cm0UX6qg.js";import{B as z}from"./config-HOLfLxHr.js";import{b as Ie,a as F}from"./CContainer-BohUAxSl.js";import{C as ee}from"./CNavbar-u7Q3iHwm.js";import{C,a as y,b as i,c as t,d as k,e as l}from"./CTable-C62CAHLk.js";import{c as se}from"./cil-clipboard-CrSEg4F6.js";import{c as Be}from"./cil-plus-D8mtC-W5.js";import{C as ze,a as E}from"./CPaginationItem-CQqCx2lq.js";import{C as ae,a as te,b as le,c as re}from"./CModalTitle-BEoCtNfZ.js";import{C as Fe}from"./CCardImage-DI-tOl1o.js";import{C as oe}from"./CModalFooter-COP8gJvv.js";import{C as Ee,a as Ge,b as Re,d as Ue,e as L}from"./DefaultLayout-Blmcm6y8.js";import{c as ie}from"./cil-info-CmGCY32x.js";const ts=()=>{var J,K,O,Q,W,X;const[G,R]=r.useState(!1);r.useState(!1);const[{user:w,token:x},c]=Ne(),[U,ne]=r.useState([]);r.useState([]);const[ce,u]=r.useState(!1),[$e,b]=r.useState(!1);r.useState(!1),r.useState([]);const[M,de]=r.useState([]),[p,v]=r.useState(0),[he,$]=r.useState(!0),[xe,ue]=r.useState(0),[S,A]=r.useState(1),[n,pe]=r.useState([]),[V,je]=r.useState([]),[H,ge]=r.useState([]),[me,j]=r.useState("All"),[_,g]=r.useState(""),[fe,P]=r.useState(!1),[Ce,ye]=r.useState(!1),[Y,ke]=r.useState([]);r.useState(0);const[be,m]=r.useState(!1),[q,Se]=r.useState("");r.useEffect(()=>{const s=setTimeout(()=>{c({type:d,payload:{status:!0,title:"Data Loading",message:"Data loading error or  Timeout exceeded",color:"warning"}}),u(!1)},2e4);return w&&x&&T(0,s),()=>{clearTimeout(s)}},[w,x]);const T=(s,a)=>{u(!0),B.get(z+`base/link/all/${s}`,{headers:{Authorization:`Bearer ${x}`}}).then(o=>{o.status===200?(console.log("res",o.data.list),ne(o.data.list),ue(o.data.count),u(!1),clearTimeout(a),o.data.length<50?$(!0):o.data.length>49&&$(!1)):o.status===400?u(!1):o.status===500&&(u(!1),c({type:d,payload:{status:!0,title:"links loading error",message:o.data.message}}))}).catch(o=>{console.error("Error:",o),u(!1),c({type:d,payload:{status:!0,title:"links loading error",message:"Data loading error or  Timeout exceeded"}})})},Pe=()=>{A(S+1);const s=p+50;v(s),T(s,!0)},Te=()=>{A(S-1);const s=p-50;console.log(s),v(s),T(s,!1)},De=s=>{A(s);const a=(s-1)*50;v(a),T(a,!0)},Le=()=>{const s=Math.ceil(xe/50),a=[];for(let h=1;h<=s;h++)a.push(h);const o=Math.max(S-2,1),Ae=Math.min(o+4,s);return a.slice(o-1,Ae).map(h=>e.jsx(E,{active:S===h,onClick:()=>De(h),children:h},h))},we=s=>{R(!G),P(!1),de(s),s.market!==null?(console.log("market"),je(s.market)):s.marketGroup!==null?(console.log("marketGroup"),ge(s.marketGroup)):s.product!==null&&(console.log("product"),Me(s.product._id))},Me=s=>{b(!0),B.get(z+`product/view/${s}`,{headers:{Authorization:`Bearer ${x}`}}).then(a=>{a.status===200?(pe(a.data.list),b(!1)):a.status===204?(b(!1),c({type:d,payload:{status:!0,title:"Product Loading error",message:a.data.message}})):a.status===500&&(b(!1),c({type:d,payload:{status:!0,title:"Product Loading error",message:a.data.message}}))}).catch(a=>{console.error("Error: ",a)})},D=s=>{s==="all"?(j("All"),g("")):s==="Product"?(j(s),g("Product")):s==="Market"?(j(s),g("Market")):s==="Market Group"&&(j(s),g("Market Group"))},ve=s=>{P(!0),ye(!0),Se(s),N(s)};r.useEffect(()=>{Ce&&N(q)},[w,x,_]);const N=s=>{m(!0),B.get(z+`deepLinkUrls/base/all/${s}?type=${_}`,{headers:{Authorization:`Bearer ${x}`}}).then(a=>{a.status===200?(ke(a.data.list),m(!1)):a.status===204?m(!1):a.status===500&&(m(!1),c({type:d,payload:{status:!0,title:"links loading error",message:a.data.message}}))}).catch(a=>{console.error("Error:",a),m(!1),c({type:d,payload:{status:!0,title:"links loading error",message:"Data loading error "}})})};return e.jsxs(Ie,{children:[e.jsx(I,{to:"/marketing/app/flayer/create",children:e.jsx(F,{style:{marginLeft:"0%",width:"17%",backgroundColor:"#ff4d4d",color:"white"},children:"Create URL"})}),e.jsx(ee,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),ce?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Z,{style:{marginTop:"15%"}})}):e.jsxs(C,{children:[e.jsx(y,{children:e.jsxs(i,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"URL"}),e.jsx(t,{scope:"col",children:"Add Campaign"}),e.jsx(t,{scope:"col",children:"View Campaign"})]})}),e.jsx(k,{children:U.length===null?e.jsx(i,{children:e.jsx(l,{colSpan:"4",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):U.map((s,a)=>e.jsxs(i,{children:[e.jsx(l,{children:p+a+1}),e.jsx(l,{children:s.name}),e.jsx(l,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:s.url}),e.jsx("div",{children:e.jsx(f,{icon:se,onClick:()=>{navigator.clipboard.writeText(s.url),c({type:d,payload:{status:!0,title:"Copy Success",message:"URL copied to clipboard",color:"success"}})}})})]})}),e.jsx(l,{children:e.jsx(I,{to:`/marketing/create/marketing/${s.id}`,children:e.jsx(F,{onClick:()=>{},size:"sm",style:{backgroundColor:"#ff4d4d",color:"white"},variant:"outline",children:e.jsx(f,{icon:Be,size:"lg",style:{color:"white"}})})})}),e.jsx(l,{children:e.jsx(F,{onClick:()=>{ve(s.id)},size:"sm",style:{backgroundColor:"#ff4d4d",color:"white"},variant:"outline",children:"View"})})]},a))})]}),e.jsxs(ze,{"aria-label":"Page navigation example",children:[e.jsx(E,{disabled:p<=0,onClick:Te,children:"Previous"}),Le(),e.jsx(E,{disabled:he===!0,onClick:Pe,children:"Next"})]}),e.jsxs(ae,{visible:G,scrollable:!0,size:"xl",onClose:()=>{N(q),P(!0),R(!1)},children:[e.jsx(te,{closeButton:!0,children:e.jsx(le,{children:"Link Information"})}),e.jsx(re,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:M.market!==null?e.jsx(e.Fragment,{children:e.jsxs(C,{children:[e.jsx(y,{children:e.jsxs(i,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Chain Name"}),e.jsx(t,{scope:"col",children:"Address"})]})}),e.jsx(k,{children:e.jsxs(i,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:(J=V.chain)==null?void 0:J.name}),e.jsx(l,{children:V.address})]})})]})}):M.marketGroup!==null?e.jsx(e.Fragment,{children:e.jsxs(C,{children:[e.jsx(y,{children:e.jsxs(i,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"City"})]})}),e.jsx(k,{children:e.jsxs(i,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:H.name}),e.jsx(l,{children:H.city})]})})]})}):M.product!==null?e.jsx(e.Fragment,{children:e.jsxs(C,{children:[e.jsx(y,{children:e.jsxs(i,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Product Id"}),e.jsx(t,{scope:"col",children:"Photo"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"Base Price"}),e.jsx(t,{scope:"col",children:"Tax"}),e.jsx(t,{scope:"col",children:"Markup Percentage "}),e.jsx(t,{scope:"col",children:"Markup"}),e.jsx(t,{scope:"col",children:"Total"}),e.jsx(t,{scope:"col",children:"Brand"}),e.jsx(t,{scope:"col",children:"Chain"}),e.jsx(t,{scope:"col",children:"Market Address"})]})}),e.jsx(k,{children:e.jsxs(i,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:n.pid}),e.jsx(t,{children:e.jsx(Fe,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+n.image})}),e.jsx(l,{children:n.name}),e.jsx(l,{children:(((K=n.price)==null?void 0:K.basePrice)??0).toFixed(2)}),e.jsx(l,{children:(((O=n.price)==null?void 0:O.tax)??0).toFixed(2)}),e.jsxs(l,{children:[(Q=n.price)==null?void 0:Q.percentage,"%"]}),e.jsx(l,{children:(((W=n.price)==null?void 0:W.markup)??0).toFixed(2)}),e.jsx(l,{children:(((X=n.price)==null?void 0:X.total)??0).toFixed(2)}),e.jsx(l,{children:n.brand}),e.jsx(l,{children:n.chainName}),e.jsx(l,{children:n.marketAddress})]})})]})}):e.jsx(e.Fragment,{})}),e.jsx(oe,{})]}),e.jsxs(ae,{visible:fe,scrollable:!0,size:"xl",onClose:()=>{P(!1),j("All"),g("")},children:[e.jsx(te,{closeButton:!0,children:e.jsx(le,{children:"Campaign Information"})}),e.jsxs(re,{children:[e.jsx(Ee,{style:{marginLeft:"74%"},color:"secondary",children:"Filter by"}),e.jsxs(Ge,{style:{marginLeft:"2%",width:"17%",backgroundColor:"#ff4d4d"},children:[e.jsx(Re,{style:{color:"white"},children:me}),e.jsxs(Ue,{children:[e.jsx(L,{onClick:()=>{D("all")},children:"All"}),e.jsx(L,{onClick:()=>{D("Product")},children:"Product"}),e.jsx(L,{onClick:()=>{D("Market")},children:"Market"}),e.jsx(L,{onClick:()=>{D("Market Group")},children:"Market Group"})]})]}),e.jsx(ee,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),be?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Z,{style:{marginTop:"5%"}})}):e.jsxs(C,{children:[e.jsx(y,{children:e.jsxs(i,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Type"}),e.jsx(t,{scope:"col",children:"URL"}),e.jsx(t,{scope:"col",children:"View Details"})]})}),e.jsx(k,{children:Y.length===0?e.jsx(i,{children:e.jsx(l,{colSpan:"4",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):Y.map((s,a)=>e.jsxs(i,{children:[e.jsx(l,{children:p+a+1}),e.jsx(l,{children:s.type}),e.jsx(l,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:s.url}),e.jsx("div",{children:e.jsx(f,{icon:se,onClick:()=>{navigator.clipboard.writeText(s.url),c({type:d,payload:{status:!0,title:"Copy Success",message:"URL copied to clipboard",color:"success"}})}})})]})}),e.jsx(l,{children:s.items===null?e.jsx(f,{icon:ie,size:"xl"}):e.jsx(I,{children:e.jsx(f,{icon:ie,size:"xl",onClick:()=>we(s)})})})]},a))})]})]}),e.jsx(oe,{})]})]})};export{ts as default};
