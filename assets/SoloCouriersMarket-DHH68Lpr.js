import{x as U,l as G,r as o,A as J,z as n,j as e,h as j,L as S,m as B}from"./index-BzIi4H5T.js";import{a as v}from"./axios-B4uVmeYG.js";import{B as D}from"./config-HOLfLxHr.js";import{b as K}from"./CContainer-B_5lyMll.js";import{C as W}from"./CNavbar-nRmbgC54.js";import{C as m,a as u,b as i,c as a,d as p,e as t}from"./CTable-DraPgbcK.js";import{c as X,C as N}from"./DefaultLayout-DahFU_Q2.js";import{C as A,a as I,b as L,c as w}from"./CModalTitle-Bvn1-2Di.js";import{c as Z}from"./cil-info-CmGCY32x.js";import{C as O}from"./CModalFooter-Br03FyMU.js";import{C as ee}from"./CCardImage-aelRjN4_.js";const je=()=>{var M;const[{user:g,token:d},c]=U();G();const[h,z]=o.useState([]),[E,x]=o.useState(!1),[F,f]=o.useState(!1),{id:H}=J(),[y,R]=o.useState([]),[P,C]=o.useState(!1),[V,b]=o.useState(!1),[k,T]=o.useState([]),[Y,se]=o.useState(!1);o.useEffect(()=>{const s=setTimeout(()=>{c({type:n,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),x(!1)},2e4);return g&&d&&_(H,s),()=>{clearTimeout(s)}},[g,d]);const _=(s,l)=>{x(!0),v.get(D+"assistant/solo/courier/markets/"+s,{headers:{Authorization:`Bearer ${d}`}}).then(r=>{r.status===200?(console.log(r.data),z(r.data),x(!1),clearTimeout(l)):r.status===203?c({type:n,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===204?c({type:n,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===500&&c({type:n,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}})}).catch(r=>{console.error("Error:",r)})},$=s=>{C(!0),console.log(s),q()},q=s=>{f(!0),v.get(D+"assistant/solo/couriers/market/orders/670d25c339b74a4f1462d5fd",{headers:{Authorization:`Bearer ${d}`}}).then(l=>{l.status===200?(R(l.data),f(!1)):l.status===203?c({type:n,payload:{status:!0,title:"Batch markets loading error",message:l.data.message}}):l.status===204?c({type:n,payload:{status:!0,title:"Batch markets loading error",message:l.data.message}}):l.status===500&&c({type:n,payload:{status:!0,title:"Batch markets loading error",message:l.data.message}})}).catch(l=>{console.error("Error:",l)})},Q=s=>{b(!0),T(s)};return e.jsxs(K,{children:[e.jsx(W,{className:"bg-body-tertiary"}),E?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(j,{style:{marginTop:"15%"}})}):e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(i,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Chain Name"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Orders"})]})}),e.jsx(p,{children:h.length===0?e.jsx(i,{children:e.jsx(t,{colSpan:"4",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):(M=h.markets)==null?void 0:M.map((s,l)=>e.jsxs(i,{children:[e.jsx(t,{children:l+1}),e.jsx(t,{children:s.chain}),e.jsx(t,{children:s.address}),e.jsx(t,{children:e.jsx(S,{children:e.jsx(B,{onClick:()=>{$(h.id)},icon:X,size:"xl"})})})]},l))})]}),e.jsxs(A,{visible:P,scrollable:!0,size:"xl",onClose:()=>C(!1),children:[e.jsx(I,{closeButton:!0,children:e.jsx(L,{children:"Market Order List Information"})}),e.jsx(w,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:F?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(j,{style:{marginTop:"15%"}})}):e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(i,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"No"}),e.jsx(a,{scope:"col",children:"Status"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Delivery Fee"}),e.jsx(a,{scope:"col",children:"Slot"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Total"}),e.jsx(a,{scope:"col",children:"Markup"}),e.jsx(a,{scope:"col",children:"Order Items"})]})}),e.jsx(p,{children:y.length===0?e.jsx(i,{children:e.jsx(t,{colSpan:"10",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):y.map((s,l)=>e.jsxs(i,{children:[e.jsx(t,{children:l+1}),e.jsx(t,{children:s.no}),e.jsx(t,{children:e.jsx(N,{style:{width:80},color:"info",children:s.status})}),e.jsx(t,{children:s.address}),e.jsx(t,{children:((s==null?void 0:s.deliveryFee)??0).toFixed(2)}),e.jsx(t,{children:s.slot}),e.jsx(t,{children:s.date}),e.jsx(t,{children:((s==null?void 0:s.total)??0).toFixed(2)}),e.jsx(t,{children:s.markup}),e.jsx(t,{children:e.jsx(S,{children:e.jsx(B,{icon:Z,size:"xl",onClick:()=>{Q(s.items)}})})})]},l))})]})}),e.jsx(O,{})]}),e.jsxs(A,{visible:V,scrollable:!0,size:"xl",onClose:()=>{T([]),b(!1)},children:[e.jsx(I,{closeButton:!0,children:e.jsx(L,{children:"Order Products List Information"})}),e.jsx(w,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:Y?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(j,{style:{marginTop:"15%"}})}):e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(i,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"}),e.jsx(a,{scope:"col",children:"Status"})]})}),e.jsx(p,{children:k.length===0?e.jsx(i,{children:e.jsx(t,{colSpan:"8",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):k.map((s,l)=>e.jsxs(i,{children:[e.jsx(t,{children:l+1}),e.jsx(t,{children:e.jsx(ee,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.price}),e.jsx(t,{children:s.qty}),e.jsx(t,{children:s.measure}),e.jsxs(t,{children:[s.chain," - ",s.market]}),e.jsx(t,{children:e.jsx(N,{style:{width:80},color:"info",children:s.status})})]},l))})]})}),e.jsx(O,{})]})]})};export{je as default};
