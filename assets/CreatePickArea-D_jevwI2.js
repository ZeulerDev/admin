function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-CmOSfymj.js","assets/index-DRBwahOQ.js","assets/index-BQTabIt4.css","assets/leaflet-YPufkYZl.js","assets/leaflet-D-6_-wuJ.css","assets/FeatureGroup-C7ATKoYr.js","assets/Marker-B4pJW-sP.js","assets/Polygon-C4WKqHm2.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{R as I,f as L,r,y as v,A as d,j as e,m as A}from"./index-DRBwahOQ.js";import{E as D}from"./leaflet.draw-BhayKEJz.js";import{L as b,M as P,T as N,P as T}from"./leaflet-YPufkYZl.js";import{a as y}from"./axios-Cm0UX6qg.js";import{B as j}from"./config-HOLfLxHr.js";import{m as z,a as B,b as F}from"./marker-shadow-ClvVsAuX.js";import{b as G,a as U}from"./CContainer-ClwVMbXL.js";import{C as O}from"./CNavbar-CwM8xPax.js";import{C as $,a as V,b as H,c as k}from"./DefaultLayout-BXq3TR03.js";import{c as W}from"./cil-info-CmGCY32x.js";import{F as Z}from"./FeatureGroup-C7ATKoYr.js";import{C as q,a as J,b as K,c as Q}from"./CModalTitle-BWuqRlN0.js";import{C as X}from"./CFormInput-BJeaTOMD.js";import{C as Y}from"./CModalFooter-Df6xhYcX.js";import"./index-QTP9ApTX.js";import"./CFormLabel-DvmqnOgH.js";const ee=I.lazy(()=>L(()=>import("./index-CmOSfymj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(s=>({default:s.Marker})));delete b.Icon.Default.prototype._getIconUrl;b.Icon.Default.mergeOptions({iconRetinaUrl:z,iconUrl:B,shadowUrl:F});function xe(){const s=r.useRef(null),[{user:i,token:o},l]=v(),[n,m]=r.useState("Napoli"),[u,f]=r.useState("Napoli"),[M,S]=r.useState([]),[c,h]=r.useState(""),[w,p]=r.useState(!1),[g,E]=r.useState([]),_=t=>{const a=t.layerType,C=t.layer;console.log(a),console.log("layer",C._latlngs),p(!0),E(C._latlngs)},R=()=>{if(p(!1),n&&c&&g){const t={area:g,name:c,city:u};console.log(t),i&&o&&y.post(j+"pickup/area/create",t,{headers:{Authorization:`Bearer ${o}`}}).then(a=>{a.status===200?(l({type:d,payload:{status:!0,title:"Pickup Area Registration",message:"Pick up area registration Success",color:"success"}}),h("")):a.status===500&&l({type:d,payload:{status:!0,title:"Pick up area registration  error",message:a.data.message,color:"danger"}})}).catch(a=>{console.error("Error:",a)})}else alert("Please Check the Fields!")},x=t=>{t==="all"?(m(""),f("Napoli")):(m(t),f(t))};return r.useEffect(()=>{i&&o&&y.get(j+`assistant/markets/groups/locations/pickup/${n}`,{headers:{Authorization:`Bearer ${o}`}}).then(t=>{t.status===200?S(t.data):t.status===500&&l({type:d,payload:{status:!0,title:"Market Group loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t)})},[i,n]),e.jsxs(G,{children:[e.jsx(O,{className:"bg-body-tertiary",children:e.jsxs($,{style:{marginLeft:"90%",width:"10%",marginRight:"5px",backgroundColor:"#ff4d4d"},children:[e.jsx(V,{children:u}),e.jsxs(H,{children:[e.jsx(k,{onClick:()=>x("Napoli"),children:"Napoli"}),e.jsx(k,{onClick:()=>x("Milano"),children:"Milano"})]})]})}),e.jsxs(P,{dragging:!0,center:[40.85631,14.24641],zoom:13,scrollWheelZoom:!0,style:{height:"500px",width:"100%"},children:[e.jsx(N,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsxs(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:[M.map((t,a)=>e.jsx(ee,{position:[t.lat,t.lng],children:e.jsx(T,{children:e.jsxs("div",{children:[e.jsx(A,{icon:W,size:"lg",style:{marginLeft:"10px"}})," ",e.jsx("span",{children:t.address})]})})},a)),e.jsx(Z,{ref:s,children:e.jsx(D,{position:"topright",onCreated:_,draw:{polygon:!0,circle:!0,polyline:!1,marker:!1,circlemarker:!1}})})]})]}),e.jsxs(q,{alignment:"center",visible:w,scrollable:!0,size:"sm",onClose:()=>p(!1),children:[e.jsx(J,{closeButton:!0,children:e.jsx(K,{children:"Confirmation"})}),e.jsxs(Q,{children:[e.jsx("a",{children:"Enter name for selected area"}),e.jsx("br",{}),e.jsx(X,{type:"text",value:c,onChange:t=>h(t.target.value)})]}),e.jsx(Y,{children:e.jsx(U,{style:{backgroundColor:"#ff4d4d",color:"white"},onClick:()=>R(),children:"Save area"})})]})]})}export{xe as default};
