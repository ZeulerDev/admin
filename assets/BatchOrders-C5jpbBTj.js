import{r as o,x as U,B as W,z as x,j as e,i as y,L as B,m as N}from"./index-B2mJY6nk.js";import{a as g}from"./axios-B4uVmeYG.js";import{b as X,a as F}from"./CContainer-HxaQKhHw.js";import{C as Z}from"./CNavbar-C6aw6t1r.js";import{C as ee}from"./CForm-Auzu0woL.js";import{C as k,a as w,b as j,c as l,d as D,e as t}from"./CTable-D7t5m_Bv.js";import{e as S,d as se}from"./DefaultLayout-CXJ534N4.js";import{c as ae}from"./cil-info-CmGCY32x.js";import{C as L,a as M,b as V,c as z}from"./CModalTitle-CJnjKzOP.js";import{C as le}from"./CCardImage-B6NAuy_J.js";import{C as A}from"./CModalFooter-DI0RJn1I.js";import{C as I}from"./CRow-BrOym7Mm.js";import{C as c}from"./CFormLabel-BMh_f0jF.js";import{C as i}from"./CCol-DExom2-S.js";import{C as n}from"./CFormInput-DIFYjtpM.js";const ye=()=>{var O,E,v;const[b,p]=o.useState(!1),[H,f]=o.useState(!1),[{user:m,token:d},h]=U(),[R,$]=o.useState([]),[P,T]=o.useState(!1),{id:Y}=W(),[C,u]=o.useState(!1),[r,q]=o.useState([]),[Q,_]=o.useState([]);o.useEffect(()=>{m&&d&&G(Y)},[m,d]);const G=a=>{T(!0),g.get("http://localhost:8003/assistant/batch/orders/"+a,{headers:{Authorization:`Bearer ${d}`}}).then(s=>{s.status===200?(console.log("done",s.data),$(s.data),T(!1)):s.status===203?h({type:x,payload:{status:!0,title:"Batch markets loading error",message:s.data.message}}):s.status===204?h({type:x,payload:{status:!0,title:"Batch markets loading error",message:s.data.message}}):s.status===500&&h({type:x,payload:{status:!0,title:"Batch markets loading error",message:s.data.message}})}).catch(s=>{console.error("Error:",s)})},J=a=>{p(!b),console.log(a),d&&m&&(u(!0),g.get("http://localhost:8003/assistant/grocery/order/"+a,{headers:{Authorization:`Bearer ${d}`}}).then(s=>{s.status===200?(_(s.data),u(!1)):s.status===500&&h({type:x,payload:{status:!0,title:"Order details view error",message:s.data.message}})}).catch(s=>{console.error("Order details view error:",s)}))},K=a=>{f(!C),console.log(a),d&&m&&(u(!0),g.get("http://localhost:8003/assistant/grocery/customer/"+a,{headers:{Authorization:`Bearer ${d}`}}).then(s=>{s.status===200?(q(s.data),u(!1)):s.status===500&&h({type:x,payload:{status:!0,title:"Order details view error",message:s.data.message}})}).catch(s=>{console.error("Order details view error:",s)}))};return e.jsxs(X,{children:[e.jsx(Z,{className:"bg-body-tertiary",children:e.jsx(ee,{})}),P?e.jsx(y,{}):e.jsxs(k,{children:[e.jsx(w,{children:e.jsxs(j,{children:[e.jsx(l,{scope:"col",children:"No"}),e.jsx(l,{scope:"col",children:"Status"}),e.jsx(l,{scope:"col",children:"Address"}),e.jsx(l,{scope:"col",children:"Delivery Fee"}),e.jsx(l,{scope:"col",children:"Slot"}),e.jsx(l,{scope:"col",children:"Date"}),e.jsx(l,{scope:"col",children:"Total"}),e.jsx(l,{scope:"col",children:"Markup"}),e.jsx(l,{scope:"col",children:"Orders"}),e.jsx(l,{scope:"col",children:"Info"})]})}),e.jsx(D,{children:(O=R.orders)==null?void 0:O.map((a,s)=>e.jsxs(j,{children:[e.jsx(t,{children:a.no}),e.jsx(t,{children:e.jsx(S,{style:{width:80},color:"info",children:a.status})}),e.jsx(t,{children:a.address}),e.jsx(t,{children:a.deliveryFee}),e.jsx(t,{children:a.slot}),e.jsx(t,{children:a.date}),e.jsx(t,{children:a.total}),e.jsx(t,{children:a.markup}),e.jsx(t,{children:e.jsx(B,{children:e.jsx(N,{icon:ae,size:"xl",onClick:()=>J(a.id)})})}),e.jsx(t,{children:e.jsx(B,{children:e.jsx(N,{icon:se,size:"xl",onClick:()=>K(a.id)})})})]},s))})]}),e.jsxs(L,{visible:b,scrollable:!0,size:"xl",onClose:()=>p(!1),children:[e.jsx(M,{closeButton:!0,children:e.jsx(V,{children:"Customer Information"})}),e.jsx(z,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:C?e.jsx(y,{}):e.jsxs(k,{children:[e.jsx(w,{children:e.jsxs(j,{children:[e.jsx(l,{scope:"col",children:"#"}),e.jsx(l,{scope:"col",children:"Name"}),e.jsx(l,{scope:"col",children:"Price"}),e.jsx(l,{scope:"col",children:"Qty"}),e.jsx(l,{scope:"col",children:"Measure"}),e.jsx(l,{scope:"col",children:"Market"}),e.jsx(l,{scope:"col",children:"Status"})]})}),e.jsx(D,{children:(E=Q.items)==null?void 0:E.map((a,s)=>e.jsxs(j,{children:[e.jsx(l,{scope:"row",children:e.jsx(le,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+a.photo})}),e.jsx(t,{children:a.name}),e.jsx(t,{children:a.price}),e.jsx(t,{children:a.qty}),e.jsx(t,{children:a.measure}),e.jsxs(t,{children:[a.chain," - ",a.market]}),e.jsx(t,{children:e.jsx(S,{style:{width:80},color:"info",children:a.status})})]},s))})]})}),e.jsx(A,{children:e.jsx(F,{color:"secondary",onClick:()=>p(!1),children:"Close"})})]}),e.jsxs(L,{visible:H,scrollable:!0,size:"lg",onClose:()=>f(!1),children:[e.jsx(M,{closeButton:!0,children:e.jsx(V,{children:"Customer Information"})}),e.jsx(z,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:C?e.jsx(y,{}):e.jsxs("div",{children:[e.jsxs(I,{className:"mb-3",children:[e.jsx(c,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(i,{sm:10,children:e.jsx(n,{type:"text",defaultValue:r.name,readOnly:!0,plainText:!0})}),e.jsx(c,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Address"}),e.jsx(i,{sm:10,children:e.jsx(n,{type:"text",defaultValue:(v=r.address)==null?void 0:v.name,readOnly:!0,plainText:!0})}),e.jsx(c,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(i,{sm:10,children:e.jsx(n,{type:"text",defaultValue:r.email,readOnly:!0,plainText:!0})}),e.jsx(c,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(i,{sm:10,children:e.jsx(n,{type:"text",defaultValue:r.contact,readOnly:!0,plainText:!0})}),e.jsx(c,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Language"}),e.jsx(i,{sm:10,children:e.jsx(n,{type:"text",defaultValue:r.language==="en"?"English":r.language,readOnly:!0,plainText:!0})}),e.jsx(c,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Country"}),e.jsx(i,{sm:10,children:e.jsx(n,{type:"text",defaultValue:r.country==="en"?"English":r.country,readOnly:!0,plainText:!0})})]}),e.jsxs(I,{className:"mb-3",children:[e.jsx(c,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Latitude"}),e.jsx(i,{sm:10,children:e.jsx(n,{type:"text",defaultValue:r.lat,readOnly:!0,plainText:!0})}),e.jsx(c,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Longitude"}),e.jsx(i,{sm:10,children:e.jsx(n,{type:"text",defaultValue:r.lng,readOnly:!0,plainText:!0})})]})]})}),e.jsx(A,{children:e.jsx(F,{color:"secondary",onClick:()=>f(!1),children:"Close"})})]})]})};export{ye as default};
