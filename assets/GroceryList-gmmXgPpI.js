import{r as t,x as ee,z as D,j as e,i as u,m as c,L as I}from"./index-B2mJY6nk.js";import{a as se}from"./axios-B4uVmeYG.js";import{b as ae,a as P}from"./CContainer-HxaQKhHw.js";import{C as le}from"./CNavbar-C6aw6t1r.js";import{C as oe}from"./CForm-Auzu0woL.js";import{C as E,a as z,b as i,c as a,d as M,e as o}from"./CTable-D7t5m_Bv.js";import{c as F}from"./cil-info-CmGCY32x.js";import{d as w}from"./DefaultLayout-CXJ534N4.js";import{C as te,a as B}from"./CPaginationItem-DTZe_mIK.js";import{C as H,a as R,b as V,c as A}from"./CModalTitle-CJnjKzOP.js";import{C as re}from"./CCardImage-B6NAuy_J.js";import{C as G}from"./CModalFooter-DI0RJn1I.js";import{C as ce}from"./CRow-BrOym7Mm.js";import{C as p}from"./CFormLabel-BMh_f0jF.js";import{C}from"./CCol-DExom2-S.js";import{C as f}from"./CFormInput-DIFYjtpM.js";const ke=()=>{const[g,n]=t.useState(!1),[O,d]=t.useState(!1),[{user:y,token:x},b]=ee(),[Y,q]=t.useState([]);t.useState([]);const[Q,v]=t.useState(!1),[h,ie]=t.useState(!1);t.useState([]);const[m,_]=t.useState([]),[$,J]=t.useState([]),[r,T]=t.useState(0),[K,S]=t.useState(!0);t.useEffect(()=>{y&&x&&j(0)},[y,x]);const j=(s,k)=>{v(!0),se.get("http://localhost:8003/assistant/grocery/list/"+s,{headers:{Authorization:`Bearer ${x}`}}).then(l=>{l.status===200?(q(l.data),console.log(l.data),v(!1),l.data.length<50?(S(!0),console.log("ok")):l.data.length>49&&S(!1)):l.status===204?b({type:D,payload:{status:!0,title:"Grocery List loading error",message:l.data.message}}):l.status===500&&b({type:D,payload:{status:!0,title:"Grocery List loading error",message:l.data.message}})}).catch(l=>{console.error("Error:",l)})},U=()=>{console.log(r);const s=r+50;T(s),j(s)},W=()=>{const s=r-50;console.log(s),T(s),j(s)},X=s=>{n(!g),J(s)},Z=s=>{d(!h),_(s)};return e.jsxs(ae,{children:[e.jsx(le,{className:"bg-body-tertiary",children:e.jsx(oe,{})}),Q?e.jsx(u,{}):e.jsxs(E,{children:[e.jsx(z,{children:e.jsxs(i,{children:[e.jsx(a,{scope:"col",children:"No"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Type"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Items"}),e.jsx(a,{scope:"col",children:"Customer"})]})}),e.jsx(M,{children:Y.map(s=>e.jsxs(i,{children:[e.jsx(o,{children:"#"}),e.jsx(o,{children:s.name?s.name:""}),e.jsx(o,{children:s.data}),e.jsx(o,{children:s.type}),e.jsx(o,{children:s.address}),e.jsx(o,{children:s.items===null?e.jsx(c,{icon:F,size:"xl"}):e.jsx(I,{children:e.jsx(c,{icon:F,size:"xl",onClick:()=>X(s.items)})})}),e.jsx(o,{children:s.customer===null?e.jsx(c,{icon:w,size:"xl"}):e.jsx(I,{children:e.jsx(c,{icon:w,size:"xl",onClick:()=>Z(s.customer)})})})]},s.id))})]}),e.jsxs(te,{"aria-label":"Page navigation example",children:[e.jsx(B,{disabled:r<=0,onClick:W,children:"Previous"}),e.jsx(B,{disabled:K===!0,onClick:U,children:"Next"})]}),e.jsxs(H,{visible:g,scrollable:!0,size:"xl",onClose:()=>n(!1),children:[e.jsx(R,{closeButton:!0,children:e.jsx(V,{children:"Customer Information"})}),e.jsx(A,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:h?e.jsx(u,{}):e.jsxs(E,{children:[e.jsx(z,{children:e.jsxs(i,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Saving"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Measure"}),e.jsx(a,{scope:"col",children:"Market"})]})}),e.jsx(M,{children:$.map((s,k)=>{var l,L,N;return e.jsxs(i,{children:[e.jsx(a,{scope:"row",children:e.jsx(re,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(o,{children:s.name}),e.jsx(o,{children:s.price}),e.jsx(o,{children:s.saving?s.saving.toFixed(2):null}),e.jsx(o,{children:s.qty}),e.jsx(o,{children:s.um}),e.jsxs(o,{children:[(L=(l=s.market)==null?void 0:l.chain)==null?void 0:L.name," - ",(N=s.market)==null?void 0:N.address]})]},k)})})]})}),e.jsx(G,{children:e.jsx(P,{color:"secondary",onClick:()=>n(!1),children:"Close"})})]}),e.jsxs(H,{visible:O,scrollable:!0,size:"lg",onClose:()=>d(!1),children:[e.jsx(R,{closeButton:!0,children:e.jsx(V,{children:"Customer Information"})}),e.jsx(A,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:h?e.jsx(u,{}):e.jsx("div",{children:e.jsxs(ce,{className:"mb-3",children:[e.jsx(p,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(C,{sm:10,children:e.jsx(f,{type:"text",defaultValue:m.name,readOnly:!0,plainText:!0})}),e.jsx(p,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(C,{sm:10,children:e.jsx(f,{type:"text",defaultValue:m.email,readOnly:!0,plainText:!0})}),e.jsx(p,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(C,{sm:10,children:e.jsx(f,{type:"text",defaultValue:m.contact,readOnly:!0,plainText:!0})})]})})}),e.jsx(G,{children:e.jsx(P,{color:"secondary",onClick:()=>d(!1),children:"Close"})})]})]})};export{ke as default};
