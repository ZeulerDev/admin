import{B as E,r as o,y as P,l as I,A as n,j as e,h as g,L as z,m as N}from"./index-1nLR5RGy.js";import{a as C}from"./axios-Cm0UX6qg.js";/* empty css               */import{B as R}from"./config-HOLfLxHr.js";import{b as H}from"./CContainer-DfgIIkA9.js";import{C as F}from"./CNavbar-Cn5Tba6R.js";import{C as y,a as b,b as h,c as a,d as S,e as t}from"./CTable-BbDDKHT4.js";import{C as _}from"./DefaultLayout-PY4GQLlg.js";import{c as $}from"./cil-info-CmGCY32x.js";import{C as q,a as G,b as Q,c as U}from"./CModalTitle-H_mL68lj.js";import{C as V}from"./CCardImage-BNe5Nk8h.js";import{C as Y}from"./CModalFooter-BePzWYJy.js";const ne=()=>{const{id:T}=E(),[p,f]=o.useState(!1);o.useState(!1);const[{user:x,token:c},i]=P();I();const[D,v]=o.useState([]);o.useState([]);const[B,j]=o.useState(!1);o.useState(!1);const[M,d]=o.useState(!1),[u,O]=o.useState([]),[k,J]=o.useState([]),[L,K]=o.useState(0),[W,m]=o.useState(!0);o.useEffect(()=>{const s=setTimeout(()=>{i({type:n,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),j(!1)},2e4);return x&&c&&w(0,s),()=>{clearTimeout(s)}},[x,c,k]);const w=(s,r)=>{j(!0),C.get(R+"assistant/grocery/order/"+s+"?cid="+T,{headers:{Authorization:`Bearer ${c}`}}).then(l=>{l.status===200?(v(l.data),j(!1),clearTimeout(r),l.data.length<50?(m(!0),console.log("ok")):l.data.length>49&&m(!1)):l.status===204?i({type:n,payload:{status:!0,title:"Orders loading error",message:l.data.message}}):l.status===500&&i({type:n,payload:{status:!0,title:"Orders loading error",message:l.data.message}})}).catch(l=>{console.error("Error:",l)})},A=s=>{f(!p),console.log(s),c&&x&&(d(!0),C.get("http://localhost:8003/assistant/grocery/order/product/"+s,{headers:{Authorization:`Bearer ${c}`}}).then(r=>{r.status===200?(console.log(r.data),O(r.data),d(!1)):r.status===500&&(d(!1),i({type:n,payload:{status:!0,title:"Order details view error",message:r.data.message}}))}).catch(r=>{d(!1),console.error("Order details view error:",r)}))};return e.jsxs(H,{children:[e.jsx(F,{className:"bg-body-tertiary"}),B?e.jsx(g,{}):e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs(h,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"No"}),e.jsx(a,{scope:"col",children:"Customer"}),e.jsx(a,{scope:"col",children:"Status"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Delivery Fee"}),e.jsx(a,{scope:"col",children:"Slot"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Total"}),e.jsx(a,{scope:"col",children:"Markup"}),e.jsx(a,{scope:"col",children:"Order Details"})]})}),e.jsx(S,{children:D.map((s,r)=>e.jsxs(h,{children:[e.jsx(t,{children:L+r+1}),e.jsx(t,{children:s.no}),e.jsx(t,{children:s.customer}),e.jsx(t,{children:e.jsx(_,{style:{width:80},color:"info",children:s.status})}),e.jsx(t,{children:s.address}),e.jsx(t,{children:s.deliveryFee}),e.jsx(t,{children:s.slot}),e.jsx(t,{children:s.date}),e.jsx(t,{children:s.total}),e.jsx(t,{children:s.markup}),e.jsx(t,{children:e.jsx(z,{children:e.jsx(N,{icon:$,size:"xl",onClick:()=>A(s.id)})})})]},r))})]}),e.jsxs(q,{visible:p,scrollable:!0,size:"xl",onClose:()=>f(!1),children:[e.jsx(G,{closeButton:!0,children:e.jsx(Q,{children:"Customer Order Information"})}),e.jsx(U,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:M?e.jsx(g,{}):e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs(h,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Market"})]})}),e.jsx(S,{children:u==null?void 0:u.map((s,r)=>e.jsxs(h,{children:[e.jsx(t,{children:r+1}),e.jsx(t,{children:e.jsx(V,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(t,{children:s.name}),e.jsx(t,{children:s.price}),e.jsx(t,{children:s.qty}),e.jsxs(t,{children:[s.chain," - ",s.market]})]},r))})]})}),e.jsx(Y,{})]})]})};export{ne as default};
