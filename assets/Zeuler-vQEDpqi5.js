import{r as l,y as Te,A as d,j as e,L as v,h as Le,m as P}from"./index-D2Q_T69k.js";import{a as w}from"./axios-Cm0UX6qg.js";import{B as A}from"./config-CAsDK75y.js";import{b as ve,a as we}from"./CContainer-B1RJImIA.js";import{a as Ae,b as Ie,d as Ne,e as S}from"./DefaultLayout-mKkUbqwN.js";import{C as Be}from"./CNavbar-B0gsUfYk.js";import{C as j,a as p,b as c,c as a,d as m,e as r}from"./CTable-DUaDDRgJ.js";import{c as Fe}from"./cil-clipboard-CrSEg4F6.js";import{c as I}from"./cil-info-CmGCY32x.js";import{C as Ge,a as N}from"./CPaginationItem-CocKQ4po.js";import{C as ee,a as se,b as te,c as ae}from"./CModalTitle-BPG5V7aQ.js";import{C as ze}from"./CCardImage-DVFFENW9.js";import{C as re}from"./CModalFooter-CLXaxoDC.js";const Xe=()=>{var q,J,K,O,Q,W,X;const[B,F]=l.useState(!1);l.useState(!1);const[{user:G,token:u},n]=Te(),[z,le]=l.useState([]);l.useState([]);const[oe,h]=l.useState(!1),[Ee,g]=l.useState(!1);l.useState(!1),l.useState([]);const[D,ie]=l.useState([]),[f,T]=l.useState(0),[ce,E]=l.useState(!0),[ne,de]=l.useState(0),[k,L]=l.useState(1),[i,xe]=l.useState([]),[R,he]=l.useState([]),[H,ue]=l.useState([]),[je,C]=l.useState("All"),[$,y]=l.useState(""),[U,pe]=l.useState(!1),[me,V]=l.useState(!1),[_,Y]=l.useState([]),[ge,Z]=l.useState("");l.useEffect(()=>{const s=setTimeout(()=>{n({type:d,payload:{status:!0,title:"Data Loading",message:"Data loading error or  Timeout exceeded",color:"warning"}}),h(!1)},2e4);return G&&u&&M(0,s),()=>{clearTimeout(s)}},[G,u,$]);const M=(s,t)=>{h(!0),w.get(A+`deepLinkUrls/all/${s}?type=${$}`,{headers:{Authorization:`Bearer ${u}`}}).then(o=>{o.status===200?(le(o.data.list),de(o.data.count),h(!1),clearTimeout(t),o.data.length<50?E(!0):o.data.length>49&&E(!1)):o.status===204?h(!1):o.status===500&&(h(!1),n({type:d,payload:{status:!0,title:"links loading error",message:o.data.message}}))}).catch(o=>{console.error("Error:",o),h(!1),n({type:d,payload:{status:!0,title:"links loading error",message:res.data.message}})})},fe=()=>{L(k+1);const s=f+50;T(s),M(s,!0)},ke=()=>{L(k-1);const s=f-50;console.log(s),T(s),M(s,!1)},Ce=s=>{L(s);const t=(s-1)*50;T(t),M(t,!0)},ye=()=>{const s=Math.ceil(ne/50),t=[];for(let x=1;x<=s;x++)t.push(x);const o=Math.max(k-2,1),De=Math.min(o+4,s);return t.slice(o-1,De).map(x=>e.jsx(N,{active:k===x,onClick:()=>Ce(x),children:x},x))},Me=s=>{if(F(!B),ie(s),s.market!==null)console.log("market"),he(s.market);else if(s.marketGroup!==null){console.log("marketGroup"),ue(s.marketGroup);const t=new URLSearchParams(s.url.split("?")[1]);t.has("index")&&(pe(!0),Z(t.get("index")),console.log(t.get("index")))}else s.product!==null&&(console.log("product"),be(s.product._id))},be=s=>{g(!0),w.get(A+`product/view/${s}`,{headers:{Authorization:`Bearer ${u}`}}).then(t=>{t.status===200?(xe(t.data.list),g(!1)):t.status===204?(g(!1),n({type:d,payload:{status:!0,title:"Product Loading error",message:t.data.message}})):t.status===500&&(g(!1),n({type:d,payload:{status:!0,title:"Product Loading error",message:t.data.message}}))}).catch(t=>{console.error("Error: ",t)})},b=s=>{s==="all"?(C("All"),y("")):s==="Product"?(C(s),y("Product")):s==="Market"?(C(s),y("Market")):s==="Market Group"&&(C(s),y("Market Group"))},Pe=s=>{V(!0),Se(s)},Se=s=>{w.get(A+`assistant/market/${s}`,{headers:{Authorization:`Bearer ${u}`}}).then(t=>{t.status===200?Y(t.data):t.status===204?n({type:d,payload:{status:!0,title:"Market Data loading error",message:t.data.message}}):t.status===500&&n({type:d,payload:{status:!0,title:"Market Data loading error",message:t.data.message}})}).catch(t=>{console.error("Error:",t),n({type:d,payload:{status:!0,title:"Market Data loading error",message:"Data loading error "}})})};return e.jsxs(ve,{children:[e.jsx(v,{to:"/marketing/create/marketing/none",children:e.jsx(we,{style:{marginLeft:"0%",width:"17%",backgroundColor:"#ff4d4d",color:"white"},children:"Create URL"})}),e.jsxs(Ae,{style:{marginLeft:"2%",width:"17%",backgroundColor:"#ff4d4d"},children:[e.jsx(Ie,{style:{color:"white"},children:je}),e.jsxs(Ne,{children:[e.jsx(S,{onClick:()=>{b("all")},children:"All"}),e.jsx(S,{onClick:()=>{b("Product")},children:"Product"}),e.jsx(S,{onClick:()=>{b("Market")},children:"Market"}),e.jsx(S,{onClick:()=>{b("Market Group")},children:"Market Group"})]})]}),e.jsx(Be,{style:{marginTop:"1%"},className:"bg-body-tertiary"}),oe?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Le,{style:{marginTop:"15%"}})}):e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Type"}),e.jsx(a,{scope:"col",children:"URL"}),e.jsx(a,{scope:"col",children:"View Details"})]})}),e.jsx(m,{children:z.length===0?e.jsx(c,{children:e.jsx(r,{colSpan:"4",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):z.map((s,t)=>e.jsxs(c,{children:[e.jsx(r,{children:f+t+1}),e.jsx(r,{children:s.type}),e.jsx(r,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{children:s.url}),e.jsx("div",{children:e.jsx(P,{icon:Fe,onClick:()=>{navigator.clipboard.writeText(s.url),n({type:d,payload:{status:!0,title:"Copy Success",message:"URL copied to clipboard",color:"success"}})}})})]})}),e.jsx(r,{children:s.items===null?e.jsx(P,{icon:I,size:"xl"}):e.jsx(v,{children:e.jsx(P,{icon:I,size:"xl",onClick:()=>Me(s)})})})]},t))})]}),e.jsxs(Ge,{"aria-label":"Page navigation example",children:[e.jsx(N,{disabled:f<=0,onClick:ke,children:"Previous"}),ye(),e.jsx(N,{disabled:ce===!0,onClick:fe,children:"Next"})]}),e.jsxs(ee,{visible:B,scrollable:!0,size:"xl",onClose:()=>{F(!1),Z(""),Y([])},children:[e.jsx(se,{closeButton:!0,children:e.jsx(te,{children:"Link Information"})}),e.jsx(ae,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:D.market!==null?e.jsx(e.Fragment,{children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Chain Name"}),e.jsx(a,{scope:"col",children:"Address"})]})}),e.jsx(m,{children:e.jsxs(c,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:(q=R.chain)==null?void 0:q.name}),e.jsx(r,{children:R.address})]})})]})}):D.marketGroup!==null?e.jsx(e.Fragment,{children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"City"}),U?e.jsx(a,{scope:"col",children:"Market"}):e.jsx(e.Fragment,{})]})}),e.jsx(m,{children:e.jsxs(c,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:H.name}),e.jsx(r,{children:H.city}),U?e.jsxs(r,{children:[" ",e.jsxs(v,{children:[" ",e.jsx(P,{icon:I,size:"xl",onClick:()=>{Pe(ge)}})," "]})]}):e.jsx(e.Fragment,{})]})})]})}):D.product!==null?e.jsx(e.Fragment,{children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Product Id"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Base Price"}),e.jsx(a,{scope:"col",children:"Tax"}),e.jsx(a,{scope:"col",children:"Markup Percentage "}),e.jsx(a,{scope:"col",children:"Markup"}),e.jsx(a,{scope:"col",children:"Total"}),e.jsx(a,{scope:"col",children:"Brand"}),e.jsx(a,{scope:"col",children:"Chain"}),e.jsx(a,{scope:"col",children:"Market Address"})]})}),e.jsx(m,{children:e.jsxs(c,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:i.pid}),e.jsx(a,{children:e.jsx(ze,{style:{width:"50px",height:"50px"},src:"https://api.zeuler.com/image/"+i.image})}),e.jsx(r,{children:i.name}),e.jsx(r,{children:(((J=i.price)==null?void 0:J.basePrice)??0).toFixed(2)}),e.jsx(r,{children:(((K=i.price)==null?void 0:K.tax)??0).toFixed(2)}),e.jsxs(r,{children:[(O=i.price)==null?void 0:O.percentage,"%"]}),e.jsx(r,{children:(((Q=i.price)==null?void 0:Q.markup)??0).toFixed(2)}),e.jsx(r,{children:(((W=i.price)==null?void 0:W.total)??0).toFixed(2)}),e.jsx(r,{children:i.brand}),e.jsx(r,{children:i.chainName}),e.jsx(r,{children:i.marketAddress})]})})]})}):e.jsx(e.Fragment,{})}),e.jsx(re,{})]}),e.jsxs(ee,{visible:me,scrollable:!0,size:"xl",onClose:()=>{V(!1)},children:[e.jsx(se,{closeButton:!0,children:e.jsx(te,{children:"Link Market Information"})}),e.jsx(ae,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs(c,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Chain Name"}),e.jsx(a,{scope:"col",children:"Address"})]})}),e.jsx(m,{children:e.jsxs(c,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:(X=_.chain)==null?void 0:X.name}),e.jsx(r,{children:_.address})]})})]})}),e.jsx(re,{})]})]})};export{Xe as default};
