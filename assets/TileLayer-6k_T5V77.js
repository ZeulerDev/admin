import{l as E}from"./leaflet-BHB__4Ge.js";import{r as c,R as y,e as N}from"./index-Bsn8dk4K.js";function h(n,t){const e=c.useRef(t);c.useEffect(function(){t!==e.current&&n.attributionControl!=null&&(e.current!=null&&n.attributionControl.removeAttribution(e.current),t!=null&&n.attributionControl.addAttribution(t)),e.current=t},[n,t])}const _=1;function z(n){return Object.freeze({__version:_,map:n})}function K(n,t){return Object.freeze({...n,...t})}const b=c.createContext(null),w=b.Provider;function C(){const n=c.useContext(b);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function H(n){function t(e,r){const{instance:u,context:o}=n(e).current;return c.useImperativeHandle(r,()=>u),e.children==null?null:y.createElement(w,{value:o},e.children)}return c.forwardRef(t)}function A(n){function t(e,r){const[u,o]=c.useState(!1),{instance:a}=n(e,o).current;c.useImperativeHandle(r,()=>a),c.useEffect(function(){u&&a.update()},[a,u,e.children]);const i=a._contentNode;return i?N.createPortal(e.children,i):null}return c.forwardRef(t)}function I(n){function t(e,r){const{instance:u}=n(e).current;return c.useImperativeHandle(r,()=>u),null}return c.forwardRef(t)}function D(n){return function(e){const r=C(),u=n(e,r),{instance:o}=u.current,a=c.useRef(e.position),{position:i}=e;return c.useEffect(function(){return o.addTo(r.map),function(){o.remove()}},[r.map,o]),c.useEffect(function(){i!=null&&i!==a.current&&(o.setPosition(i),a.current=i)},[o,i]),u}}function R(n,t){const e=c.useRef();c.useEffect(function(){return t!=null&&n.instance.on(t),e.current=t,function(){e.current!=null&&n.instance.off(e.current),e.current=null}},[n,t])}function v(n,t){const e=n.pane??t.pane;return e?{...n,pane:e}:n}function V(n,t){return function(r,u){const o=C(),a=n(v(r,o),o);return h(o.map,r.attribution),R(a.current,r.eventHandlers),t(a.current,o,r,u),a}}function O(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function p(n,t){return t==null?function(r,u){const o=c.useRef();return o.current||(o.current=n(r,u)),o}:function(r,u){const o=c.useRef();o.current||(o.current=n(r,u));const a=c.useRef(r),{instance:i}=o.current;return c.useEffect(function(){a.current!==r&&(t(i,r,a.current),a.current=r)},[i,r,u]),o}}function T(n,t){c.useEffect(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){var o;(o=t.layerContainer)==null||o.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function j(n){return function(e){const r=C(),u=n(v(e,r),r);return h(r.map,e.attribution),R(u.current,e.eventHandlers),T(u.current,r),u}}function B(n,t){const e=c.useRef();c.useEffect(function(){if(t.pathOptions!==e.current){const u=t.pathOptions??{};n.instance.setStyle(u),e.current=u}},[n,t])}function G(n){return function(e){const r=C(),u=n(v(e,r),r);return R(u.current,e.eventHandlers),T(u.current,r),B(u.current,e),u}}function Q(n){function t(u,o){return O(n(u),o)}const e=p(t),r=D(e);return I(r)}function W(n,t){const e=p(n,t),r=j(e);return H(r)}function U(n,t){const e=p(n),r=V(e,t);return A(r)}function Y(n,t){const e=p(n,t),r=G(e);return H(r)}function X(n,t){const e=p(n,t),r=j(e);return I(r)}function Z(n,t,e){const{opacity:r,zIndex:u}=t;r!=null&&r!==e.opacity&&n.setOpacity(r),u!=null&&u!==e.zIndex&&n.setZIndex(u)}function L(){return L=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},L.apply(this,arguments)}function q({bounds:n,boundsOptions:t,center:e,children:r,className:u,id:o,placeholder:a,style:i,whenReady:s,zoom:l,...m},x){const[g]=c.useState({className:u,id:o,style:i}),[f,M]=c.useState(null);c.useImperativeHandle(x,()=>(f==null?void 0:f.map)??null,[f]);const S=c.useCallback(P=>{if(P!==null&&f===null){const d=new E.Map(P,m);e!=null&&l!=null?d.setView(e,l):n!=null&&d.fitBounds(n,t),s!=null&&d.whenReady(s),M(z(d))}},[]);c.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const k=f?y.createElement(w,{value:f},r):a??null;return y.createElement("div",L({},g,{ref:S}),k)}const $=c.forwardRef(q),ee=U(function(t,e){const r=new E.Popup(t,e.overlayContainer);return O(r,e)},function(t,e,{position:r},u){c.useEffect(function(){const{instance:a}=t;function i(l){l.popup===a&&(a.update(),u(!0))}function s(l){l.popup===a&&u(!1)}return e.map.on({popupopen:i,popupclose:s}),e.overlayContainer==null?(r!=null&&a.setLatLng(r),a.openOn(e.map)):e.overlayContainer.bindPopup(a),function(){var m;e.map.off({popupopen:i,popupclose:s}),(m=e.overlayContainer)==null||m.unbindPopup(),e.map.removeLayer(a)}},[t,e,u,r])}),ne=X(function({url:t,...e},r){const u=new E.TileLayer(t,v(e,r));return O(u,r)},function(t,e,r){Z(t,e,r);const{url:u}=e;u!=null&&u!==r.url&&t.setUrl(u)});export{w as L,$ as M,ee as P,ne as T,O as a,Y as b,W as c,Q as d,K as e,H as f,D as g,p as h,j as i,U as j,X as k,Z as l,C as u,v as w};
