import{B as P,r as o,y as I,l as N,A as n,j as e,h as C,L as z,m as F}from"./index-D8W7eoM5.js";import{a as y}from"./axios-Cm0UX6qg.js";/* empty css               */import{B as b}from"./config-HOLfLxHr.js";import{b as R}from"./CContainer-EQGOw-z2.js";import{C as H}from"./CNavbar-bbh6w27I.js";import{C as S,a as T,b as h,c as a,d as D,e as t}from"./CTable-jf2tizix.js";import{C as _}from"./DefaultLayout-CwPF-zRq.js";import{c as $}from"./cil-info-CmGCY32x.js";import{C as q,a as G,b as Q,c as U}from"./CModalTitle-DXUyO86j.js";import{C as V}from"./CCardImage-DACW3cOe.js";import{C as Y}from"./CModalFooter-VrnOxKGp.js";const ne=()=>{const{id:v}=P(),[p,m]=o.useState(!1);o.useState(!1);const[{user:x,token:c},i]=I();N();const[f,B]=o.useState([]);o.useState([]);const[M,j]=o.useState(!1);o.useState(!1);const[O,d]=o.useState(!1),[u,k]=o.useState([]),[L,J]=o.useState([]),[w,K]=o.useState(0),[W,g]=o.useState(!0);o.useEffect(()=>{const s=setTimeout(()=>{i({type:n,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),j(!1)},2e4);return x&&c&&A(0,s),()=>{clearTimeout(s)}},[x,c,L]);const A=(s,r)=>{j(!0),y.get(b+"assistant/grocery/order/"+s+"?cid="+v,{headers:{Authorization:`Bearer ${c}`}}).then(l=>{l.status===200?(B(l.data),j(!1),clearTimeout(r),l.data.length<50?(g(!0),console.log("ok")):l.data.length>49&&g(!1)):l.status===204?i({type:n,payload:{status:!0,title:"Orders loading error",message:l.data.message}}):l.status===500&&i({type:n,payload:{status:!0,title:"Orders loading error",message:l.data.message}})}).catch(l=>{console.error("Error:",l)})},E=s=>{m(!p),console.log(s),c&&x&&(d(!0),y.get(b+"assistant/grocery/order/product/"+s,{headers:{Authorization:`Bearer ${c}`}}).then(r=>{r.status===200?(console.log(r.data),k(r.data),d(!1)):r.status===500&&(d(!1),i({type:n,payload:{status:!0,title:"Order details view error",message:r.data.message}}))}).catch(r=>{d(!1),console.error("Order details view error:",r)}))};return e.jsxs(R,{children:[e.jsx(H,{className:"bg-body-tertiary"}),M?e.jsx(C,{}):e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs(h,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"No"}),e.jsx(a,{scope:"col",children:"Customer"}),e.jsx(a,{scope:"col",children:"Status"}),e.jsx(a,{scope:"col",children:"Address"}),e.jsx(a,{scope:"col",children:"Delivery Fee"}),e.jsx(a,{scope:"col",children:"Slot"}),e.jsx(a,{scope:"col",children:"Date"}),e.jsx(a,{scope:"col",children:"Total"}),e.jsx(a,{scope:"col",children:"Markup"}),e.jsx(a,{scope:"col",children:"Order Details"})]})}),e.jsx(D,{children:f.length===0?e.jsx("h6",{style:{marginTop:"1%"},children:"No data"}):f.map((s,r)=>e.jsxs(h,{children:[e.jsx(t,{children:w+r+1}),e.jsx(t,{children:s.no}),e.jsx(t,{children:s.customer}),e.jsx(t,{children:e.jsx(_,{style:{width:80},color:"info",children:s.status})}),e.jsx(t,{children:s.address}),e.jsx(t,{children:s.deliveryFee}),e.jsx(t,{children:s.slot}),e.jsx(t,{children:s.date}),e.jsx(t,{children:(s.total??0).toFixed(2)}),e.jsx(t,{children:s.markup}),e.jsx(t,{children:e.jsx(z,{children:e.jsx(F,{icon:$,size:"xl",onClick:()=>E(s.id)})})})]},r))})]}),e.jsxs(q,{visible:p,scrollable:!0,size:"xl",onClose:()=>m(!1),children:[e.jsx(G,{closeButton:!0,children:e.jsx(Q,{children:"Customer Order Information"})}),e.jsx(U,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:O?e.jsx(C,{}):e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs(h,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Photo"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Price"}),e.jsx(a,{scope:"col",children:"Qty"}),e.jsx(a,{scope:"col",children:"Market"})]})}),e.jsx(D,{children:u==null?void 0:u.map((s,r)=>e.jsxs(h,{children:[e.jsx(t,{children:r+1}),e.jsx(t,{children:e.jsx(V,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(t,{children:s.name}),e.jsx(t,{children:(s.price??0).toFixed(2)}),e.jsx(t,{children:s.qty}),e.jsxs(t,{children:[s.chain," - ",s.market]})]},r))})]})}),e.jsx(Y,{})]})]})};export{ne as default};
