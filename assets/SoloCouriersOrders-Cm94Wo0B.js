import{r,y as J,B as K,A as j,j as e,h as m,L,m as A}from"./index-xkWvTOBi.js";import{a as W}from"./axios-Cm0UX6qg.js";import{B as X}from"./config-CAsDK75y.js";import{b as Z}from"./CContainer-3EDy8eE_.js";import{C as ee}from"./CNavbar-DMk1JdFZ.js";import{C as y,a as C,b as o,c as t,d as g,e as l}from"./CTable-B86afwyC.js";import{C as b,c as se}from"./DefaultLayout-CKh5LGPH.js";import{c as le}from"./cil-info-CmGCY32x.js";import{C as T,a as S,b as v,c as N}from"./CModalTitle-DjS0_zGB.js";import{C as z}from"./CCardImage-DSAnPZpJ.js";import{C as k}from"./CModalFooter-D1PfpphX.js";import{C as te}from"./CRow-DT1uvn0n.js";import{C as n}from"./CFormLabel-CPyH9RWq.js";import{C as d}from"./CCol-CrDgK7u-.js";import{C as h}from"./CFormInput-8S3bA1RE.js";const be=()=>{var F;const[V,R]=r.useState(!1),[H,D]=r.useState(!1),[{user:I,token:u},x]=J(),[B,P]=r.useState([]),[Y,p]=r.useState(!1),{id:q}=K(),[f,ae]=r.useState(!1),[i,Q]=r.useState([]),[E,ce]=r.useState([]),[_,w]=r.useState(!1),[M,O]=r.useState([]);r.useEffect(()=>{const s=setTimeout(()=>{x({type:j,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),p(!1)},2e4);return I&&u&&U(q,s),()=>{clearTimeout(s)}},[I,u]);const U=(s,c)=>{console.log("id",s),p(!0),W.get(X+"assistant/solo/couriers/market/orders/"+s,{headers:{Authorization:`Bearer ${u}`}}).then(a=>{a.status===200?(console.log("done",a.data),P(a.data),p(!1),clearTimeout(c)):a.status===203?x({type:j,payload:{status:!0,title:"Batch markets loading error",message:a.data.message}}):a.status===204?x({type:j,payload:{status:!0,title:"Batch markets loading error",message:a.data.message}}):a.status===500&&x({type:j,payload:{status:!0,title:"Batch markets loading error",message:a.data.message}})}).catch(a=>{console.error("Error:",a)})},$=s=>{w(!0),O(s)},G=s=>{D(!0),Q(s)};return e.jsxs(Z,{children:[e.jsx(ee,{className:"bg-body-tertiary"}),Y?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(m,{style:{marginTop:"15%"}})}):e.jsxs(y,{children:[e.jsx(C,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"No"}),e.jsx(t,{scope:"col",children:"Status"}),e.jsx(t,{scope:"col",children:"Address"}),e.jsx(t,{scope:"col",children:"Delivery Fee"}),e.jsx(t,{scope:"col",children:"Slot"}),e.jsx(t,{scope:"col",children:"Date"}),e.jsx(t,{scope:"col",children:"Total"}),e.jsx(t,{scope:"col",children:"Markup"}),e.jsx(t,{scope:"col",children:"Order Items"}),e.jsx(t,{scope:"col",children:"Info"})]})}),e.jsx(g,{children:B.length===0?e.jsx(o,{children:e.jsx(l,{colSpan:"11",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):B.map((s,c)=>e.jsxs(o,{children:[e.jsx(l,{children:c+1}),e.jsx(l,{children:s.no}),e.jsx(l,{children:e.jsx(b,{style:{width:80},color:"info",children:s.status})}),e.jsx(l,{children:s.address}),e.jsx(l,{children:((s==null?void 0:s.deliveryFee)??0).toFixed(2)}),e.jsx(l,{children:s.slot}),e.jsx(l,{children:s.date}),e.jsx(l,{children:((s==null?void 0:s.total)??0).toFixed(2)}),e.jsx(l,{children:s==null?void 0:s.markup}),e.jsx(l,{children:e.jsx(L,{children:e.jsx(A,{icon:le,size:"xl",onClick:()=>{$(s.items)}})})}),e.jsx(l,{children:e.jsx(L,{children:e.jsx(A,{icon:se,size:"xl",onClick:()=>G(s.customers)})})})]},c))})]}),e.jsxs(T,{visible:V,scrollable:!0,size:"xl",onClose:()=>R(!1),children:[e.jsx(S,{closeButton:!0,children:e.jsx(v,{children:"Customer Order List Information"})}),e.jsx(N,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:f?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(m,{style:{marginTop:"15%"}})}):e.jsxs(y,{children:[e.jsx(C,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Photo"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"Price"}),e.jsx(t,{scope:"col",children:"Qty"}),e.jsx(t,{scope:"col",children:"Measure"}),e.jsx(t,{scope:"col",children:"Market"}),e.jsx(t,{scope:"col",children:"Status"})]})}),e.jsx(g,{children:E.length===0?e.jsx(o,{children:e.jsx(l,{colSpan:"8",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):(F=E.items)==null?void 0:F.map((s,c)=>e.jsxs(o,{children:[e.jsx(l,{children:c+1}),e.jsx(l,{children:e.jsx(z,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(l,{children:s.name}),e.jsx(l,{children:s.price}),e.jsx(l,{children:s.qty}),e.jsx(l,{children:s.measure}),e.jsxs(l,{children:[s.chain," - ",s.market]}),e.jsx(l,{children:e.jsx(b,{style:{width:80},color:"info",children:s.status})})]},c))})]})}),e.jsx(k,{})]}),e.jsxs(T,{visible:H,scrollable:!0,size:"lg",onClose:()=>D(!1),children:[e.jsx(S,{closeButton:!0,children:e.jsx(v,{children:"Customer Information"})}),e.jsx(N,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:f?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(m,{style:{marginTop:"15%"}})}):e.jsx("div",{children:e.jsxs(te,{className:"mb-3",children:[e.jsx(n,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(d,{sm:10,children:e.jsx(h,{type:"text",defaultValue:i.name,readOnly:!0,plainText:!0})}),e.jsx(n,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(d,{sm:10,children:e.jsx(h,{type:"text",defaultValue:i.email,readOnly:!0,plainText:!0})}),e.jsx(n,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(d,{sm:10,children:e.jsx(h,{type:"text",defaultValue:i.contact,readOnly:!0,plainText:!0})}),e.jsx(n,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Language"}),e.jsx(d,{sm:10,children:e.jsx(h,{type:"text",defaultValue:i.language==="en"?"English":i.language,readOnly:!0,plainText:!0})}),e.jsx(n,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Country"}),e.jsx(d,{sm:10,children:e.jsx(h,{type:"text",defaultValue:i.country==="en"?"English":i.country==="it"?"Italy":i.country,readOnly:!0,plainText:!0})})]})})}),e.jsx(k,{})]}),e.jsxs(T,{visible:_,scrollable:!0,size:"xl",onClose:()=>{O([]),w(!1)},children:[e.jsx(S,{closeButton:!0,children:e.jsx(v,{children:"Order Products List Information"})}),e.jsx(N,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:f?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(m,{style:{marginTop:"15%"}})}):e.jsxs(y,{children:[e.jsx(C,{children:e.jsxs(o,{children:[e.jsx(t,{scope:"col",children:"#"}),e.jsx(t,{scope:"col",children:"Photo"}),e.jsx(t,{scope:"col",children:"Name"}),e.jsx(t,{scope:"col",children:"Price"}),e.jsx(t,{scope:"col",children:"Qty"}),e.jsx(t,{scope:"col",children:"Measure"}),e.jsx(t,{scope:"col",children:"Market"}),e.jsx(t,{scope:"col",children:"Status"})]})}),e.jsx(g,{children:M.length===0?e.jsx(o,{children:e.jsx(l,{colSpan:"8",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):M.map((s,c)=>e.jsxs(o,{children:[e.jsx(l,{children:c+1}),e.jsx(l,{children:e.jsx(z,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(l,{children:s.name}),e.jsx(l,{children:s.price}),e.jsx(l,{children:s.qty}),e.jsx(l,{children:s.measure}),e.jsxs(l,{children:[s.chain," - ",s.market]}),e.jsx(l,{children:e.jsx(b,{style:{width:80},color:"info",children:s.status})})]},c))})]})}),e.jsx(k,{})]})]})};export{be as default};
