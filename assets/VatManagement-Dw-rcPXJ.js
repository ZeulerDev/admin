import{r as t,y as M,A as i,j as e,i as N}from"./index-BEL8iiBe.js";import{a as D}from"./axios-Cm0UX6qg.js";import{B as E}from"./config-HOLfLxHr.js";import{b as z,a as p}from"./CContainer-BE8jROB3.js";import{C as L}from"./CNavbar-Bwcn215x.js";import{C as S}from"./CFormInput-BloMmJZ9.js";import{C as R,a as H,b as T,c as r,d as F,e as o}from"./CTable-13l3bNsY.js";import{e as n}from"./DefaultLayout-CYvJWWT6.js";import{C as P,a as Q,b as U,c as Y}from"./CModalTitle-D9qGwksP.js";import{C as _}from"./CModalFooter-_7ZbuOgJ.js";import"./CFormLabel-BgNDNCcX.js";const ae=()=>{const[g,c]=t.useState(!1),[{user:f,token:d},l]=M(),[x,C]=t.useState([]),[k,m]=t.useState(!1),[w,A]=t.useState(""),[y,v]=t.useState(""),[j,B]=t.useState("");t.useEffect(()=>{f&&d&&(m(!0),D.get(E+"assistant/vat/riders/00?search="+j,{headers:{Authorization:`Bearer ${d}`}}).then(s=>{s.status===200?(C(s.data),m(!1),console.log("done")):s.status===204?l({type:i,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}}):s.status===500&&l({type:i,payload:{status:!0,title:"Error",message:s.data.message,color:"warning"}})}).catch(s=>{console.error("Error:",s)}))},[j]);const b=(s,a=null)=>{c(!g),A(s),a!==null?v(a):console.log("VAT DID not provided"),console.log(s)},V=()=>{const s={vat:y};f&&d&&D.patch(E+"assistant/rider/vat/"+w,s,{headers:{Authorization:`Bearer ${d}`}}).then(a=>{if(a.status===200){console.log("updated"),c(!1);const h=a.data,u=x.find(I=>I.id===h.id);u&&(u.vat=h.vat),C([...x])}else a.status===203?(console.log("203"),l({type:i,payload:{status:!0,title:"Picker Disabled status error",message:a.data.message}})):a.status===204?(console.log("204"),l({type:i,payload:{status:!0,title:"Picker Disabled status error",message:a.data.message}})):a.status===500&&l({type:i,payload:{status:!0,title:"Picker Disabled status update error",message:a.data.message}})}).catch(a=>{console.error(a)})};return e.jsxs(z,{children:[e.jsx(L,{className:"bg-body-tertiary",children:e.jsx(S,{type:"text",placeholder:"Search",style:{width:450,marginLeft:"2%"},value:j,onChange:s=>B(s.target.value)})}),k?e.jsx(N,{}):e.jsxs(R,{children:[e.jsx(H,{children:e.jsxs(T,{children:[e.jsx(r,{scope:"col",children:"Name"}),e.jsx(r,{scope:"col",children:"City"}),e.jsx(r,{scope:"col",children:"Vat"}),e.jsx(r,{scope:"col",children:"Activate"}),e.jsx(r,{scope:"col",children:"Disabled"}),e.jsx(r,{scope:"col",children:"Groups"}),e.jsx(r,{scope:"col"})]})}),e.jsx(F,{children:x.map((s,a)=>e.jsxs(T,{children:[e.jsx(o,{children:s.name}),e.jsx(o,{children:s.city}),e.jsx(o,{children:s.vat?s.vat:e.jsx(n,{color:"warning",children:"Null"})}),e.jsx(o,{children:s.activate?e.jsx(n,{color:"success",children:"Yes"}):e.jsx(n,{color:"warning",children:"No"})}),e.jsx(o,{children:s.disabled?e.jsx(n,{color:"success",children:"No"}):e.jsx(n,{color:"warning",children:"Yes"})}),e.jsx(o,{children:s.groups.map((h,u)=>e.jsx("div",{children:h.name},u))}),e.jsx(o,{children:s.vat===""?e.jsx(p,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70},onClick:()=>b(s.id,s.vat),children:"Insert "}):e.jsx(p,{size:"sm",style:{backgroundColor:"#ff4d4d",width:70},onClick:()=>b(s.id,s.vat),children:"Edit "})})]},a))})]}),e.jsxs(P,{alignment:"center",visible:g,scrollable:!0,size:"sm",onClose:()=>c(!1),children:[e.jsx(Q,{closeButton:!0,children:e.jsx(U,{children:"Confirmation"})}),e.jsxs(Y,{children:[e.jsx("a",{children:"Enter Driver's VAT id here"}),e.jsx("br",{}),e.jsx(S,{type:"text",placeholder:"Vat id",value:y,onChange:s=>v(s.target.value)})]}),e.jsxs(_,{children:[e.jsx(p,{color:"secondary",onClick:()=>c(!1),children:"Close"}),e.jsx(p,{color:"primary",onClick:()=>V(),children:"Save changes"})]})]})]})};export{ae as default};
