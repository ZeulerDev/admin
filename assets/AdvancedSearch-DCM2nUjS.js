import{r as s,y as z,l as H,A as S,j as t,h as _}from"./index-B08OXeWv.js";import{a as F}from"./axios-Cm0UX6qg.js";/* empty css               */import{B as U}from"./config-HOLfLxHr.js";import{f as g}from"./index-PqYCJD3r.js";import{b as q}from"./CContainer-Bcycrjrg.js";import{C as G}from"./CNavbar-CI1ooECg.js";import{D as J}from"./index-BUfxvmRQ.js";import{C as K}from"./CFormInput-BdPiiS44.js";import{C as V,a as W,b as M,c as r,d as X,e as c}from"./CTable-isbk2Vch.js";import{C as Y}from"./CCardImage-BV2__KTV.js";import{C as Z,a as D}from"./CPaginationItem-BtMnBLEs.js";import"./typeof-QjJsDpFa.js";import"./inheritsLoose-BR9xv5Kf.js";import"./CFormLabel-SAczgcRM.js";const ye=()=>{s.useState(!1),s.useState(!1);const[{user:b,token:p},y]=z();H();const[E,I]=s.useState([]);s.useState([]);const[w,f]=s.useState(!1);s.useState(!1),s.useState([]);const[i,x]=s.useState([]),[d,C]=s.useState(0),[N,P]=s.useState(!0),[R,v]=s.useState(0),[u,j]=s.useState(1);s.useState("EMAIL");const[n,L]=s.useState(""),[k,T]=s.useState(n);s.useEffect(()=>{const e=new Date,o=new Date(e.getTime()-30*24*60*60*1e3),a=g(o,"yyyy-MM-dd"),m=g(e,"yyyy-MM-dd");x([a,m]),console.log(a,m)},[]),s.useEffect(()=>{const e=setTimeout(()=>{y({type:S,payload:{status:!0,title:"Data Loading",message:"There no data to display at the moment or something went wrong",color:"warning"}}),f(!1)},2e4);return b&&p&&h(0,e),()=>{clearTimeout(e)}},[b,p,i,k]),s.useEffect(()=>{const e=setTimeout(()=>{(n.length>=3||n.length===0)&&T(n)},500);return()=>{clearTimeout(e)}},[n]);const h=(e,o)=>{console.log(e,i),f(!0),F.get(U+`assistant/users/advance/search/${e}?date=${i}&name=${n}`,{headers:{Authorization:`Bearer ${p}`}}).then(a=>{a.status===200?(I(a.data.list),v(a.data.count),console.log(a.data.list),f(!1),clearTimeout(o),a.data.list.length<50?(P(!0),console.log("ok")):a.data.list.length>49&&P(!1)):a.status===204?y({type:S,payload:{status:!0,title:"Orders loading error",message:a.data.message}}):a.status===500&&y({type:S,payload:{status:!0,title:"Orders loading error",message:a.data.message}})}).catch(a=>{console.error("Error:",a)})},A=()=>{j(u+1);const e=d+50;C(e),h(e,!0)},B=()=>{j(u-1);const e=d-50;console.log(e),C(e),h(e,!1)},O=e=>{j(e);const o=(e-1)*50;C(o),h(o,!0)},Q=()=>{const e=Math.ceil(R/50),o=[];for(let l=1;l<=e;l++)o.push(l);const a=Math.max(u-2,1),m=Math.min(a+4,e);return o.slice(a-1,m).map(l=>t.jsx(D,{active:u===l,onClick:()=>O(l),children:l},l))},$=e=>{if(e){const o=g(e[0],"yyyy-MM-dd"),a=g(e[1],"yyyy-MM-dd");x([o,a])}else x([])};return t.jsxs(q,{children:[t.jsxs(G,{className:"bg-body-tertiary",children:[t.jsx(J,{style:{marginLeft:0},format:"yyyy/MM/dd",onChange:$,value:i.length>0?[new Date(i[0]),new Date(i[1])]:null}),t.jsx(K,{type:"text",placeholder:"Search by customer name, surname, email and contact",style:{width:450,marginRight:"0%"},value:n,onChange:e=>L(e.target.value)})]}),w?t.jsx(_,{}):t.jsxs(V,{children:[t.jsx(W,{children:t.jsxs(M,{children:[t.jsx(r,{scope:"col",children:"#"}),t.jsx(r,{scope:"col",children:"Photo"}),t.jsx(r,{scope:"col",children:"Name"}),t.jsx(r,{scope:"col",children:"Surname"}),t.jsx(r,{scope:"col",children:"email"}),t.jsx(r,{scope:"col",children:"Contact"}),t.jsx(r,{scope:"col",children:"Country"}),t.jsx(r,{scope:"col",children:"Language"})]})}),t.jsx(X,{children:E.map((e,o)=>t.jsxs(M,{children:[t.jsx(c,{children:d+o+1}),t.jsx(r,{children:t.jsx(Y,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+e.photo})}),t.jsx(c,{children:e.name}),t.jsx(c,{children:e.surname}),t.jsx(c,{children:e.email}),t.jsx(c,{children:e.contact}),t.jsx(c,{children:e.country==="it"||e.country==="Italy"?"Italy":e.country}),t.jsx(c,{children:e.language==="en"?"English":e.language==="it"?"Italy":e.language})]},o))})]}),t.jsxs(Z,{"aria-label":"Page navigation example",children:[t.jsx(D,{disabled:d<=0,onClick:B,children:"Previous"}),Q(),t.jsx(D,{disabled:N===!0,onClick:A,children:"Next"})]})]})};export{ye as default};
