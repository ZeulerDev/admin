import{r as c,x as W,A as X,z as m,j as e,h as y,L as S,m as w}from"./index-DaboRuf6.js";import{a as C}from"./axios-B4uVmeYG.js";import{B as b}from"./config-HOLfLxHr.js";import{b as Z}from"./CContainer-2x7Z1Exw.js";import{C as ee}from"./CNavbar-C5whDHHf.js";import{C as k,a as L,b as u,c as l,d as A,e as a}from"./CTable-HWQYIuPu.js";import{C as M,c as se}from"./DefaultLayout-C7qb2XTq.js";import{c as te}from"./cil-info-CmGCY32x.js";import{C as V,a as z,b as I,c as R}from"./CModalTitle-Dr1SToxo.js";import{C as ae}from"./CCardImage-DJBTq3mB.js";import{C as H}from"./CModalFooter-C0lTLyiC.js";import{C as P}from"./CRow-knoYJ91G.js";import{C as i}from"./CFormLabel-DqqYeAmW.js";import{C as n}from"./CCol-nxyYJw1m.js";import{C as d}from"./CFormInput-BbE4b3UF.js";const ye=()=>{var D,B,F;const[T,N]=c.useState(!1),[$,O]=c.useState(!1),[{user:j,token:x},h]=W(),[v,Y]=c.useState([]),[_,f]=c.useState(!1),{id:q}=X(),[g,p]=c.useState(!1),[o,Q]=c.useState([]),[E,U]=c.useState([]);c.useEffect(()=>{const s=setTimeout(()=>{h({type:m,payload:{status:!0,title:"Data Loading",message:"Data loading error: Timeout exceeded",color:"warning"}}),f(!1)},2e4);return j&&x&&G(q,s),()=>{clearTimeout(s)}},[j,x]);const G=(s,t)=>{f(!0),C.get(b+"assistant/batch/orders/"+s,{headers:{Authorization:`Bearer ${x}`}}).then(r=>{r.status===200?(console.log("done",r.data),Y(r.data),f(!1),clearTimeout(t)):r.status===203?h({type:m,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===204?h({type:m,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}}):r.status===500&&h({type:m,payload:{status:!0,title:"Batch markets loading error",message:r.data.message}})}).catch(r=>{console.error("Error:",r)})},J=s=>{N(!T),console.log(s),x&&j&&(p(!0),C.get(b+"assistant/grocery/order/details/"+s,{headers:{Authorization:`Bearer ${x}`}}).then(t=>{t.status===200?(U(t.data),p(!1)):t.status===500&&h({type:m,payload:{status:!0,title:"Order details view error",message:t.data.message}})}).catch(t=>{console.error("Order details view error:",t)}))},K=s=>{O(!g),console.log(s),x&&j&&(p(!0),C.get(b+"assistant/grocery/customer/"+s,{headers:{Authorization:`Bearer ${x}`}}).then(t=>{t.status===200?(Q(t.data),p(!1)):t.status===500&&h({type:m,payload:{status:!0,title:"Order details view error",message:t.data.message}})}).catch(t=>{console.error("Order details view error:",t)}))};return e.jsxs(Z,{children:[e.jsx(ee,{className:"bg-body-tertiary"}),_?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(y,{style:{marginTop:"15%"}})}):e.jsxs(k,{children:[e.jsx(L,{children:e.jsxs(u,{children:[e.jsx(l,{scope:"col",children:"#"}),e.jsx(l,{scope:"col",children:"No"}),e.jsx(l,{scope:"col",children:"Status"}),e.jsx(l,{scope:"col",children:"Address"}),e.jsx(l,{scope:"col",children:"Delivery Fee"}),e.jsx(l,{scope:"col",children:"Slot"}),e.jsx(l,{scope:"col",children:"Date"}),e.jsx(l,{scope:"col",children:"Total"}),e.jsx(l,{scope:"col",children:"Markup"}),e.jsx(l,{scope:"col",children:"Orders"}),e.jsx(l,{scope:"col",children:"Info"})]})}),e.jsx(A,{children:v.length===0?e.jsx(u,{children:e.jsx(a,{colSpan:"11",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):(D=v.orders)==null?void 0:D.map((s,t)=>e.jsxs(u,{children:[e.jsx(a,{children:t+1}),e.jsx(a,{children:s.no}),e.jsx(a,{children:e.jsx(M,{style:{width:80},color:"info",children:s.status})}),e.jsx(a,{children:s.address}),e.jsx(a,{children:((s==null?void 0:s.deliveryFee)??0).toFixed(2)}),e.jsx(a,{children:s.slot}),e.jsx(a,{children:s.date}),e.jsx(a,{children:((s==null?void 0:s.total)??0).toFixed(2)}),e.jsx(a,{children:s.markup}),e.jsx(a,{children:e.jsx(S,{children:e.jsx(w,{icon:te,size:"xl",onClick:()=>J(s.id)})})}),e.jsx(a,{children:e.jsx(S,{children:e.jsx(w,{icon:se,size:"xl",onClick:()=>K(s.id)})})})]},t))})]}),e.jsxs(V,{visible:T,scrollable:!0,size:"xl",onClose:()=>N(!1),children:[e.jsx(z,{closeButton:!0,children:e.jsx(I,{children:"Customer Order List Information"})}),e.jsx(R,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:g?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(y,{style:{marginTop:"15%"}})}):e.jsxs(k,{children:[e.jsx(L,{children:e.jsxs(u,{children:[e.jsx(l,{scope:"col",children:"#"}),e.jsx(l,{scope:"col",children:"Photo"}),e.jsx(l,{scope:"col",children:"Name"}),e.jsx(l,{scope:"col",children:"Price"}),e.jsx(l,{scope:"col",children:"Qty"}),e.jsx(l,{scope:"col",children:"Measure"}),e.jsx(l,{scope:"col",children:"Market"}),e.jsx(l,{scope:"col",children:"Status"})]})}),e.jsx(A,{children:E.length===0?e.jsx(u,{children:e.jsx(a,{colSpan:"8",style:{textAlign:"center",backgroundColor:"white"},children:e.jsx("h6",{style:{marginTop:"1%"},children:"No Data"})})}):(B=E.items)==null?void 0:B.map((s,t)=>e.jsxs(u,{children:[e.jsx(a,{children:t+1}),e.jsx(a,{children:e.jsx(ae,{style:{width:50,height:50,borderRadius:10},src:"https://api.zeuler.com/image/"+s.photo})}),e.jsx(a,{children:s.name}),e.jsx(a,{children:s.price}),e.jsx(a,{children:s.qty}),e.jsx(a,{children:s.measure}),e.jsxs(a,{children:[s.chain," - ",s.market]}),e.jsx(a,{children:e.jsx(M,{style:{width:80},color:"info",children:s.status})})]},t))})]})}),e.jsx(H,{})]}),e.jsxs(V,{visible:$,scrollable:!0,size:"lg",onClose:()=>O(!1),children:[e.jsx(z,{closeButton:!0,children:e.jsx(I,{children:"Customer Information"})}),e.jsx(R,{style:{overflowY:"auto",maxHeight:"70vh",display:"flex",justifyContent:"center"},children:g?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(y,{style:{marginTop:"15%"}})}):e.jsxs("div",{children:[e.jsxs(P,{className:"mb-3",children:[e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Name"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:o.name,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Address"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:(F=o.address)==null?void 0:F.name,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Email"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:o.email,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Contact"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:o.contact,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Language"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:o.language==="en"?"English":o.language,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Country"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:o.country==="en"?"English":o.country,readOnly:!0,plainText:!0})})]}),e.jsxs(P,{className:"mb-3",children:[e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Latitude"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:o.lat,readOnly:!0,plainText:!0})}),e.jsx(i,{htmlFor:"staticEmail",className:"col-sm-2 col-form-label",children:"Longitude"}),e.jsx(n,{sm:10,children:e.jsx(d,{type:"text",defaultValue:o.lng,readOnly:!0,plainText:!0})})]})]})}),e.jsx(H,{})]})]})};export{ye as default};
